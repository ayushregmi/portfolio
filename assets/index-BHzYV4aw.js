var g1=Object.defineProperty;var y1=(t,e,n)=>e in t?g1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Un=(t,e,n)=>y1(t,typeof e!="symbol"?e+"":e,n);function v1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function lu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fv={exports:{}},uu={},Uv={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),w1=Symbol.for("react.portal"),_1=Symbol.for("react.fragment"),b1=Symbol.for("react.strict_mode"),x1=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),P1=Symbol.for("react.suspense"),k1=Symbol.for("react.memo"),C1=Symbol.for("react.lazy"),Bp=Symbol.iterator;function R1(t){return t===null||typeof t!="object"?null:(t=Bp&&t[Bp]||t["@@iterator"],typeof t=="function"?t:null)}var Vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bv=Object.assign,zv={};function ls(t,e,n){this.props=t,this.context=e,this.refs=zv,this.updater=n||Vv}ls.prototype.isReactComponent={};ls.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ls.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hv(){}Hv.prototype=ls.prototype;function Gf(t,e,n){this.props=t,this.context=e,this.refs=zv,this.updater=n||Vv}var Zf=Gf.prototype=new Hv;Zf.constructor=Gf;Bv(Zf,ls.prototype);Zf.isPureReactComponent=!0;var zp=Array.isArray,Wv=Object.prototype.hasOwnProperty,qf={current:null},Gv={key:!0,ref:!0,__self:!0,__source:!0};function Zv(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Wv.call(e,r)&&!Gv.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Za,type:t,key:s,ref:a,props:i,_owner:qf.current}}function O1(t,e){return{$$typeof:Za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Kf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Za}function A1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hp=/\/+/g;function Xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?A1(""+t.key):e.toString(36)}function Vo(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Za:case w1:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Xu(a,0):r,zp(i)?(n="",t!=null&&(n=t.replace(Hp,"$&/")+"/"),Vo(i,e,n,"",function(u){return u})):i!=null&&(Kf(i)&&(i=O1(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Hp,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",zp(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+Xu(s,o);a+=Vo(s,e,n,l,i)}else if(l=R1(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+Xu(s,o++),a+=Vo(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ho(t,e,n){if(t==null)return t;var r=[],i=0;return Vo(t,r,"","",function(s){return e.call(n,s,i++)}),r}function I1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nt={current:null},Bo={transition:null},N1={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:Bo,ReactCurrentOwner:qf};function qv(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:ho,forEach:function(t,e,n){ho(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ho(t,function(){e++}),e},toArray:function(t){return ho(t,function(e){return e})||[]},only:function(t){if(!Kf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=ls;Y.Fragment=_1;Y.Profiler=x1;Y.PureComponent=Gf;Y.StrictMode=b1;Y.Suspense=P1;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1;Y.act=qv;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Bv({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=qf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Wv.call(e,l)&&!Gv.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Za,type:t.type,key:i,ref:s,props:r,_owner:a}};Y.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S1,_context:t},t.Consumer=t};Y.createElement=Zv;Y.createFactory=function(t){var e=Zv.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:T1,render:t}};Y.isValidElement=Kf;Y.lazy=function(t){return{$$typeof:C1,_payload:{_status:-1,_result:t},_init:I1}};Y.memo=function(t,e){return{$$typeof:k1,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Bo.transition;Bo.transition={};try{t()}finally{Bo.transition=e}};Y.unstable_act=qv;Y.useCallback=function(t,e){return nt.current.useCallback(t,e)};Y.useContext=function(t){return nt.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return nt.current.useDeferredValue(t)};Y.useEffect=function(t,e){return nt.current.useEffect(t,e)};Y.useId=function(){return nt.current.useId()};Y.useImperativeHandle=function(t,e,n){return nt.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return nt.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return nt.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return nt.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return nt.current.useReducer(t,e,n)};Y.useRef=function(t){return nt.current.useRef(t)};Y.useState=function(t){return nt.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return nt.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return nt.current.useTransition()};Y.version="18.3.1";Uv.exports=Y;var S=Uv.exports;const Zt=lu(S),j1=v1({__proto__:null,default:Zt},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1=S,L1=Symbol.for("react.element"),D1=Symbol.for("react.fragment"),M1=Object.prototype.hasOwnProperty,F1=$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function Kv(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)M1.call(e,r)&&!U1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:L1,type:t,key:s,ref:a,props:i,_owner:F1.current}}uu.Fragment=D1;uu.jsx=Kv;uu.jsxs=Kv;Fv.exports=uu;var _=Fv.exports,dd={},Jv={exports:{}},Et={},Xv={exports:{}},Qv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,C){var P=E.length;E.push(C);e:for(;0<P;){var U=P-1>>>1,M=E[U];if(0<i(M,C))E[U]=C,E[P]=M,P=U;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var C=E[0],P=E.pop();if(P!==C){E[0]=P;e:for(var U=0,M=E.length,q=M>>>1;U<q;){var le=2*(U+1)-1,he=E[le],ht=le+1,fo=E[ht];if(0>i(he,P))ht<M&&0>i(fo,he)?(E[U]=fo,E[ht]=P,U=ht):(E[U]=he,E[le]=P,U=le);else if(ht<M&&0>i(fo,P))E[U]=fo,E[ht]=P,U=ht;else break e}}return C}function i(E,C){var P=E.sortIndex-C.sortIndex;return P!==0?P:E.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(E){for(var C=n(u);C!==null;){if(C.callback===null)r(u);else if(C.startTime<=E)r(u),C.sortIndex=C.expirationTime,e(l,C);else break;C=n(u)}}function b(E){if(v=!1,y(E),!p)if(n(l)!==null)p=!0,B(x);else{var C=n(u);C!==null&&j(b,C.startTime-E)}}function x(E,C){p=!1,v&&(v=!1,m(k),k=-1),h=!0;var P=f;try{for(y(C),d=n(l);d!==null&&(!(d.expirationTime>C)||E&&!ne());){var U=d.callback;if(typeof U=="function"){d.callback=null,f=d.priorityLevel;var M=U(d.expirationTime<=C);C=t.unstable_now(),typeof M=="function"?d.callback=M:d===n(l)&&r(l),y(C)}else r(l);d=n(l)}if(d!==null)var q=!0;else{var le=n(u);le!==null&&j(b,le.startTime-C),q=!1}return q}finally{d=null,f=P,h=!1}}var T=!1,R=null,k=-1,G=5,V=-1;function ne(){return!(t.unstable_now()-V<G)}function Ae(){if(R!==null){var E=t.unstable_now();V=E;var C=!0;try{C=R(!0,E)}finally{C?Xe():(T=!1,R=null)}}else T=!1}var Xe;if(typeof g=="function")Xe=function(){g(Ae)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,N=$.port2;$.port1.onmessage=Ae,Xe=function(){N.postMessage(null)}}else Xe=function(){w(Ae,0)};function B(E){R=E,T||(T=!0,Xe())}function j(E,C){k=w(function(){E(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,B(x))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(E){switch(f){case 1:case 2:case 3:var C=3;break;default:C=f}var P=f;f=C;try{return E()}finally{f=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,C){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var P=f;f=E;try{return C()}finally{f=P}},t.unstable_scheduleCallback=function(E,C,P){var U=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?U+P:U):P=U,E){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=P+M,E={id:c++,callback:C,priorityLevel:E,startTime:P,expirationTime:M,sortIndex:-1},P>U?(E.sortIndex=P,e(u,E),n(l)===null&&E===n(u)&&(v?(m(k),k=-1):v=!0,j(b,P-U))):(E.sortIndex=M,e(l,E),p||h||(p=!0,B(x))),E},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(E){var C=f;return function(){var P=f;f=C;try{return E.apply(this,arguments)}finally{f=P}}}})(Qv);Xv.exports=Qv;var V1=Xv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1=S,bt=V1;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Yv=new Set,sa={};function oi(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(sa[t]=e,t=0;t<e.length;t++)Yv.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fd=Object.prototype.hasOwnProperty,z1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wp={},Gp={};function H1(t){return fd.call(Gp,t)?!0:fd.call(Wp,t)?!1:z1.test(t)?Gp[t]=!0:(Wp[t]=!0,!1)}function W1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G1(t,e,n,r){if(e===null||typeof e>"u"||W1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ue[t]=new rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ue[e]=new rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ue[t]=new rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ue[t]=new rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ue[t]=new rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ue[t]=new rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ue[t]=new rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ue[t]=new rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ue[t]=new rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jf=/[\-:]([a-z])/g;function Xf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jf,Xf);Ue[e]=new rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jf,Xf);Ue[e]=new rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jf,Xf);Ue[e]=new rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ue[t]=new rt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ue[t]=new rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qf(t,e,n,r){var i=Ue.hasOwnProperty(e)?Ue[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(G1(e,n,i,r)&&(n=null),r||i===null?H1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fn=B1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,po=Symbol.for("react.element"),yi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),Yf=Symbol.for("react.strict_mode"),hd=Symbol.for("react.profiler"),ew=Symbol.for("react.provider"),tw=Symbol.for("react.context"),eh=Symbol.for("react.forward_ref"),pd=Symbol.for("react.suspense"),md=Symbol.for("react.suspense_list"),th=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),nw=Symbol.for("react.offscreen"),Zp=Symbol.iterator;function ws(t){return t===null||typeof t!="object"?null:(t=Zp&&t[Zp]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,Qu;function As(t){if(Qu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qu=e&&e[1]||""}return`
`+Qu+t}var Yu=!1;function ec(t,e){if(!t||Yu)return"";Yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?As(t):""}function Z1(t){switch(t.tag){case 5:return As(t.type);case 16:return As("Lazy");case 13:return As("Suspense");case 19:return As("SuspenseList");case 0:case 2:case 15:return t=ec(t.type,!1),t;case 11:return t=ec(t.type.render,!1),t;case 1:return t=ec(t.type,!0),t;default:return""}}function gd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case yi:return"Portal";case hd:return"Profiler";case Yf:return"StrictMode";case pd:return"Suspense";case md:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tw:return(t.displayName||"Context")+".Consumer";case ew:return(t._context.displayName||"Context")+".Provider";case eh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case th:return e=t.displayName||null,e!==null?e:gd(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return gd(t(e))}catch{}}return null}function q1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gd(e);case 8:return e===Yf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K1(t){var e=rw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mo(t){t._valueTracker||(t._valueTracker=K1(t))}function iw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yd(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sw(t,e){e=e.checked,e!=null&&Qf(t,"checked",e,!1)}function vd(t,e){sw(t,e);var n=fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wd(t,e.type,n):e.hasOwnProperty("defaultValue")&&wd(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wd(t,e,n){(e!=="number"||nl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Is=Array.isArray;function Mi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(Is(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function aw(t,e){var n=fr(e.value),r=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ow(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ow(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var go,lw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(go=go||document.createElement("div"),go.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=go.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J1=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(t){J1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bs[e]=Bs[t]})});function uw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bs.hasOwnProperty(t)&&Bs[t]?(""+e).trim():e+"px"}function cw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=uw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var X1=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xd(t,e){if(e){if(X1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function Sd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ed=null;function nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Td=null,Fi=null,Ui=null;function Qp(t){if(t=Ja(t)){if(typeof Td!="function")throw Error(O(280));var e=t.stateNode;e&&(e=pu(e),Td(t.stateNode,t.type,e))}}function dw(t){Fi?Ui?Ui.push(t):Ui=[t]:Fi=t}function fw(){if(Fi){var t=Fi,e=Ui;if(Ui=Fi=null,Qp(t),e)for(t=0;t<e.length;t++)Qp(e[t])}}function hw(t,e){return t(e)}function pw(){}var tc=!1;function mw(t,e,n){if(tc)return t(e,n);tc=!0;try{return hw(t,e,n)}finally{tc=!1,(Fi!==null||Ui!==null)&&(pw(),fw())}}function oa(t,e){var n=t.stateNode;if(n===null)return null;var r=pu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Pd=!1;if(jn)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Pd=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Pd=!1}function Q1(t,e,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var zs=!1,rl=null,il=!1,kd=null,Y1={onError:function(t){zs=!0,rl=t}};function eS(t,e,n,r,i,s,a,o,l){zs=!1,rl=null,Q1.apply(Y1,arguments)}function tS(t,e,n,r,i,s,a,o,l){if(eS.apply(this,arguments),zs){if(zs){var u=rl;zs=!1,rl=null}else throw Error(O(198));il||(il=!0,kd=u)}}function li(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yp(t){if(li(t)!==t)throw Error(O(188))}function nS(t){var e=t.alternate;if(!e){if(e=li(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yp(i),t;if(s===r)return Yp(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function yw(t){return t=nS(t),t!==null?vw(t):null}function vw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vw(t);if(e!==null)return e;t=t.sibling}return null}var ww=bt.unstable_scheduleCallback,em=bt.unstable_cancelCallback,rS=bt.unstable_shouldYield,iS=bt.unstable_requestPaint,xe=bt.unstable_now,sS=bt.unstable_getCurrentPriorityLevel,rh=bt.unstable_ImmediatePriority,_w=bt.unstable_UserBlockingPriority,sl=bt.unstable_NormalPriority,aS=bt.unstable_LowPriority,bw=bt.unstable_IdlePriority,cu=null,hn=null;function oS(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(cu,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:cS,lS=Math.log,uS=Math.LN2;function cS(t){return t>>>=0,t===0?32:31-(lS(t)/uS|0)|0}var yo=64,vo=4194304;function Ns(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Ns(o):(s&=a,s!==0&&(r=Ns(s)))}else a=n&~i,a!==0?r=Ns(a):s!==0&&(r=Ns(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qt(e),i=1<<n,r|=t[n],e&=~i;return r}function dS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-qt(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=dS(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function Cd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xw(){var t=yo;return yo<<=1,!(yo&4194240)&&(yo=64),t}function nc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qt(e),t[e]=n}function hS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ih(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var oe=0;function Sw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ew,sh,Tw,Pw,kw,Rd=!1,wo=[],nr=null,rr=null,ir=null,la=new Map,ua=new Map,Kn=[],pS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tm(t,e){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":la.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function bs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ja(e),e!==null&&sh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mS(t,e,n,r,i){switch(e){case"focusin":return nr=bs(nr,t,e,n,r,i),!0;case"dragenter":return rr=bs(rr,t,e,n,r,i),!0;case"mouseover":return ir=bs(ir,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return la.set(s,bs(la.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ua.set(s,bs(ua.get(s)||null,t,e,n,r,i)),!0}return!1}function Cw(t){var e=Lr(t.target);if(e!==null){var n=li(e);if(n!==null){if(e=n.tag,e===13){if(e=gw(n),e!==null){t.blockedOn=e,kw(t.priority,function(){Tw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Od(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ed=r,n.target.dispatchEvent(r),Ed=null}else return e=Ja(n),e!==null&&sh(e),t.blockedOn=n,!1;e.shift()}return!0}function nm(t,e,n){zo(t)&&n.delete(e)}function gS(){Rd=!1,nr!==null&&zo(nr)&&(nr=null),rr!==null&&zo(rr)&&(rr=null),ir!==null&&zo(ir)&&(ir=null),la.forEach(nm),ua.forEach(nm)}function xs(t,e){t.blockedOn===e&&(t.blockedOn=null,Rd||(Rd=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,gS)))}function ca(t){function e(i){return xs(i,t)}if(0<wo.length){xs(wo[0],t);for(var n=1;n<wo.length;n++){var r=wo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nr!==null&&xs(nr,t),rr!==null&&xs(rr,t),ir!==null&&xs(ir,t),la.forEach(e),ua.forEach(e),n=0;n<Kn.length;n++)r=Kn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kn.length&&(n=Kn[0],n.blockedOn===null);)Cw(n),n.blockedOn===null&&Kn.shift()}var Vi=Fn.ReactCurrentBatchConfig,ol=!0;function yS(t,e,n,r){var i=oe,s=Vi.transition;Vi.transition=null;try{oe=1,ah(t,e,n,r)}finally{oe=i,Vi.transition=s}}function vS(t,e,n,r){var i=oe,s=Vi.transition;Vi.transition=null;try{oe=4,ah(t,e,n,r)}finally{oe=i,Vi.transition=s}}function ah(t,e,n,r){if(ol){var i=Od(t,e,n,r);if(i===null)fc(t,e,r,ll,n),tm(t,r);else if(mS(i,t,e,n,r))r.stopPropagation();else if(tm(t,r),e&4&&-1<pS.indexOf(t)){for(;i!==null;){var s=Ja(i);if(s!==null&&Ew(s),s=Od(t,e,n,r),s===null&&fc(t,e,r,ll,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fc(t,e,r,null,n)}}var ll=null;function Od(t,e,n,r){if(ll=null,t=nh(r),t=Lr(t),t!==null)if(e=li(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ll=t,null}function Rw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sS()){case rh:return 1;case _w:return 4;case sl:case aS:return 16;case bw:return 536870912;default:return 16}default:return 16}}var Qn=null,oh=null,Ho=null;function Ow(){if(Ho)return Ho;var t,e=oh,n=e.length,r,i="value"in Qn?Qn.value:Qn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ho=i.slice(t,1<r?1-r:void 0)}function Wo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _o(){return!0}function rm(){return!1}function Tt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_o:rm,this.isPropagationStopped=rm,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_o)},persist:function(){},isPersistent:_o}),e}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=Tt(us),Ka=we({},us,{view:0,detail:0}),wS=Tt(Ka),rc,ic,Ss,du=we({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ss&&(Ss&&t.type==="mousemove"?(rc=t.screenX-Ss.screenX,ic=t.screenY-Ss.screenY):ic=rc=0,Ss=t),rc)},movementY:function(t){return"movementY"in t?t.movementY:ic}}),im=Tt(du),_S=we({},du,{dataTransfer:0}),bS=Tt(_S),xS=we({},Ka,{relatedTarget:0}),sc=Tt(xS),SS=we({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),ES=Tt(SS),TS=we({},us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PS=Tt(TS),kS=we({},us,{data:0}),sm=Tt(kS),CS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OS[t])?!!e[t]:!1}function uh(){return AS}var IS=we({},Ka,{key:function(t){if(t.key){var e=CS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(t){return t.type==="keypress"?Wo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NS=Tt(IS),jS=we({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),am=Tt(jS),$S=we({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),LS=Tt($S),DS=we({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),MS=Tt(DS),FS=we({},du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),US=Tt(FS),VS=[9,13,27,32],ch=jn&&"CompositionEvent"in window,Hs=null;jn&&"documentMode"in document&&(Hs=document.documentMode);var BS=jn&&"TextEvent"in window&&!Hs,Aw=jn&&(!ch||Hs&&8<Hs&&11>=Hs),om=" ",lm=!1;function Iw(t,e){switch(t){case"keyup":return VS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wi=!1;function zS(t,e){switch(t){case"compositionend":return Nw(e);case"keypress":return e.which!==32?null:(lm=!0,om);case"textInput":return t=e.data,t===om&&lm?null:t;default:return null}}function HS(t,e){if(wi)return t==="compositionend"||!ch&&Iw(t,e)?(t=Ow(),Ho=oh=Qn=null,wi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Aw&&e.locale!=="ko"?null:e.data;default:return null}}var WS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function um(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WS[t.type]:e==="textarea"}function jw(t,e,n,r){dw(r),e=ul(e,"onChange"),0<e.length&&(n=new lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ws=null,da=null;function GS(t){Ww(t,0)}function fu(t){var e=xi(t);if(iw(e))return t}function ZS(t,e){if(t==="change")return e}var $w=!1;if(jn){var ac;if(jn){var oc="oninput"in document;if(!oc){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),oc=typeof cm.oninput=="function"}ac=oc}else ac=!1;$w=ac&&(!document.documentMode||9<document.documentMode)}function dm(){Ws&&(Ws.detachEvent("onpropertychange",Lw),da=Ws=null)}function Lw(t){if(t.propertyName==="value"&&fu(da)){var e=[];jw(e,da,t,nh(t)),mw(GS,e)}}function qS(t,e,n){t==="focusin"?(dm(),Ws=e,da=n,Ws.attachEvent("onpropertychange",Lw)):t==="focusout"&&dm()}function KS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fu(da)}function JS(t,e){if(t==="click")return fu(e)}function XS(t,e){if(t==="input"||t==="change")return fu(e)}function QS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var en=typeof Object.is=="function"?Object.is:QS;function fa(t,e){if(en(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!fd.call(e,i)||!en(t[i],e[i]))return!1}return!0}function fm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hm(t,e){var n=fm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fm(n)}}function Dw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mw(){for(var t=window,e=nl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nl(t.document)}return e}function dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YS(t){var e=Mw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dw(n.ownerDocument.documentElement,n)){if(r!==null&&dh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=hm(n,s);var a=hm(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eE=jn&&"documentMode"in document&&11>=document.documentMode,_i=null,Ad=null,Gs=null,Id=!1;function pm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Id||_i==null||_i!==nl(r)||(r=_i,"selectionStart"in r&&dh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gs&&fa(Gs,r)||(Gs=r,r=ul(Ad,"onSelect"),0<r.length&&(e=new lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_i)))}function bo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bi={animationend:bo("Animation","AnimationEnd"),animationiteration:bo("Animation","AnimationIteration"),animationstart:bo("Animation","AnimationStart"),transitionend:bo("Transition","TransitionEnd")},lc={},Fw={};jn&&(Fw=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function hu(t){if(lc[t])return lc[t];if(!bi[t])return t;var e=bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fw)return lc[t]=e[n];return t}var Uw=hu("animationend"),Vw=hu("animationiteration"),Bw=hu("animationstart"),zw=hu("transitionend"),Hw=new Map,mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){Hw.set(t,e),oi(e,[t])}for(var uc=0;uc<mm.length;uc++){var cc=mm[uc],tE=cc.toLowerCase(),nE=cc[0].toUpperCase()+cc.slice(1);Sr(tE,"on"+nE)}Sr(Uw,"onAnimationEnd");Sr(Vw,"onAnimationIteration");Sr(Bw,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(zw,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rE=new Set("cancel close invalid load scroll toggle".split(" ").concat(js));function gm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tS(r,e,void 0,t),t.currentTarget=null}function Ww(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;gm(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;gm(i,o,u),s=l}}}if(il)throw t=kd,il=!1,kd=null,t}function de(t,e){var n=e[Dd];n===void 0&&(n=e[Dd]=new Set);var r=t+"__bubble";n.has(r)||(Gw(e,t,2,!1),n.add(r))}function dc(t,e,n){var r=0;e&&(r|=4),Gw(n,t,r,e)}var xo="_reactListening"+Math.random().toString(36).slice(2);function ha(t){if(!t[xo]){t[xo]=!0,Yv.forEach(function(n){n!=="selectionchange"&&(rE.has(n)||dc(n,!1,t),dc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xo]||(e[xo]=!0,dc("selectionchange",!1,e))}}function Gw(t,e,n,r){switch(Rw(e)){case 1:var i=yS;break;case 4:i=vS;break;default:i=ah}n=i.bind(null,e,n,t),i=void 0,!Pd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Lr(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}mw(function(){var u=s,c=nh(n),d=[];e:{var f=Hw.get(t);if(f!==void 0){var h=lh,p=t;switch(t){case"keypress":if(Wo(n)===0)break e;case"keydown":case"keyup":h=NS;break;case"focusin":p="focus",h=sc;break;case"focusout":p="blur",h=sc;break;case"beforeblur":case"afterblur":h=sc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=bS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=LS;break;case Uw:case Vw:case Bw:h=ES;break;case zw:h=MS;break;case"scroll":h=wS;break;case"wheel":h=US;break;case"copy":case"cut":case"paste":h=PS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=am}var v=(e&4)!==0,w=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,y;g!==null;){y=g;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,m!==null&&(b=oa(g,m),b!=null&&v.push(pa(g,b,y)))),w)break;g=g.return}0<v.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Ed&&(p=n.relatedTarget||n.fromElement)&&(Lr(p)||p[$n]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?Lr(p):null,p!==null&&(w=li(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(v=im,b="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=am,b="onPointerLeave",m="onPointerEnter",g="pointer"),w=h==null?f:xi(h),y=p==null?f:xi(p),f=new v(b,g+"leave",h,n,c),f.target=w,f.relatedTarget=y,b=null,Lr(c)===u&&(v=new v(m,g+"enter",p,n,c),v.target=y,v.relatedTarget=w,b=v),w=b,h&&p)t:{for(v=h,m=p,g=0,y=v;y;y=di(y))g++;for(y=0,b=m;b;b=di(b))y++;for(;0<g-y;)v=di(v),g--;for(;0<y-g;)m=di(m),y--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=di(v),m=di(m)}v=null}else v=null;h!==null&&ym(d,f,h,v,!1),p!==null&&w!==null&&ym(d,w,p,v,!0)}}e:{if(f=u?xi(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var x=ZS;else if(um(f))if($w)x=XS;else{x=KS;var T=qS}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=JS);if(x&&(x=x(t,u))){jw(d,x,n,c);break e}T&&T(t,f,u),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&wd(f,"number",f.value)}switch(T=u?xi(u):window,t){case"focusin":(um(T)||T.contentEditable==="true")&&(_i=T,Ad=u,Gs=null);break;case"focusout":Gs=Ad=_i=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,pm(d,n,c);break;case"selectionchange":if(eE)break;case"keydown":case"keyup":pm(d,n,c)}var R;if(ch)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else wi?Iw(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Aw&&n.locale!=="ko"&&(wi||k!=="onCompositionStart"?k==="onCompositionEnd"&&wi&&(R=Ow()):(Qn=c,oh="value"in Qn?Qn.value:Qn.textContent,wi=!0)),T=ul(u,k),0<T.length&&(k=new sm(k,t,null,n,c),d.push({event:k,listeners:T}),R?k.data=R:(R=Nw(n),R!==null&&(k.data=R)))),(R=BS?zS(t,n):HS(t,n))&&(u=ul(u,"onBeforeInput"),0<u.length&&(c=new sm("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=R))}Ww(d,e)})}function pa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ul(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=oa(t,n),s!=null&&r.unshift(pa(t,s,i)),s=oa(t,e),s!=null&&r.push(pa(t,s,i))),t=t.return}return r}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ym(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=oa(n,s),l!=null&&a.unshift(pa(n,l,o))):i||(l=oa(n,s),l!=null&&a.push(pa(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var iE=/\r\n?/g,sE=/\u0000|\uFFFD/g;function vm(t){return(typeof t=="string"?t:""+t).replace(iE,`
`).replace(sE,"")}function So(t,e,n){if(e=vm(e),vm(t)!==e&&n)throw Error(O(425))}function cl(){}var Nd=null,jd=null;function $d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ld=typeof setTimeout=="function"?setTimeout:void 0,aE=typeof clearTimeout=="function"?clearTimeout:void 0,wm=typeof Promise=="function"?Promise:void 0,oE=typeof queueMicrotask=="function"?queueMicrotask:typeof wm<"u"?function(t){return wm.resolve(null).then(t).catch(lE)}:Ld;function lE(t){setTimeout(function(){throw t})}function hc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ca(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ca(e)}function sr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cs=Math.random().toString(36).slice(2),un="__reactFiber$"+cs,ma="__reactProps$"+cs,$n="__reactContainer$"+cs,Dd="__reactEvents$"+cs,uE="__reactListeners$"+cs,cE="__reactHandles$"+cs;function Lr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_m(t);t!==null;){if(n=t[un])return n;t=_m(t)}return e}t=n,n=t.parentNode}return null}function Ja(t){return t=t[un]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function pu(t){return t[ma]||null}var Md=[],Si=-1;function Er(t){return{current:t}}function fe(t){0>Si||(t.current=Md[Si],Md[Si]=null,Si--)}function ce(t,e){Si++,Md[Si]=t.current,t.current=e}var hr={},qe=Er(hr),ut=Er(!1),Jr=hr;function qi(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ct(t){return t=t.childContextTypes,t!=null}function dl(){fe(ut),fe(qe)}function bm(t,e,n){if(qe.current!==hr)throw Error(O(168));ce(qe,e),ce(ut,n)}function Zw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,q1(t)||"Unknown",i));return we({},n,r)}function fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Jr=qe.current,ce(qe,t),ce(ut,ut.current),!0}function xm(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=Zw(t,e,Jr),r.__reactInternalMemoizedMergedChildContext=t,fe(ut),fe(qe),ce(qe,t)):fe(ut),ce(ut,n)}var Sn=null,mu=!1,pc=!1;function qw(t){Sn===null?Sn=[t]:Sn.push(t)}function dE(t){mu=!0,qw(t)}function Tr(){if(!pc&&Sn!==null){pc=!0;var t=0,e=oe;try{var n=Sn;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,mu=!1}catch(i){throw Sn!==null&&(Sn=Sn.slice(t+1)),ww(rh,Tr),i}finally{oe=e,pc=!1}}return null}var Ei=[],Ti=0,hl=null,pl=0,Ot=[],At=0,Xr=null,En=1,Tn="";function Ar(t,e){Ei[Ti++]=pl,Ei[Ti++]=hl,hl=t,pl=e}function Kw(t,e,n){Ot[At++]=En,Ot[At++]=Tn,Ot[At++]=Xr,Xr=t;var r=En;t=Tn;var i=32-qt(r)-1;r&=~(1<<i),n+=1;var s=32-qt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,En=1<<32-qt(e)+i|n<<i|r,Tn=s+t}else En=1<<s|n<<i|r,Tn=t}function fh(t){t.return!==null&&(Ar(t,1),Kw(t,1,0))}function hh(t){for(;t===hl;)hl=Ei[--Ti],Ei[Ti]=null,pl=Ei[--Ti],Ei[Ti]=null;for(;t===Xr;)Xr=Ot[--At],Ot[At]=null,Tn=Ot[--At],Ot[At]=null,En=Ot[--At],Ot[At]=null}var vt=null,yt=null,pe=!1,Ht=null;function Jw(t,e){var n=It(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vt=t,yt=sr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vt=t,yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xr!==null?{id:En,overflow:Tn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=It(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vt=t,yt=null,!0):!1;default:return!1}}function Fd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ud(t){if(pe){var e=yt;if(e){var n=e;if(!Sm(t,e)){if(Fd(t))throw Error(O(418));e=sr(n.nextSibling);var r=vt;e&&Sm(t,e)?Jw(r,n):(t.flags=t.flags&-4097|2,pe=!1,vt=t)}}else{if(Fd(t))throw Error(O(418));t.flags=t.flags&-4097|2,pe=!1,vt=t}}}function Em(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vt=t}function Eo(t){if(t!==vt)return!1;if(!pe)return Em(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$d(t.type,t.memoizedProps)),e&&(e=yt)){if(Fd(t))throw Xw(),Error(O(418));for(;e;)Jw(t,e),e=sr(e.nextSibling)}if(Em(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yt=sr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yt=null}}else yt=vt?sr(t.stateNode.nextSibling):null;return!0}function Xw(){for(var t=yt;t;)t=sr(t.nextSibling)}function Ki(){yt=vt=null,pe=!1}function ph(t){Ht===null?Ht=[t]:Ht.push(t)}var fE=Fn.ReactCurrentBatchConfig;function Es(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function To(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tm(t){var e=t._init;return e(t._payload)}function Qw(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=ur(m,g),m.index=0,m.sibling=null,m}function s(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,g,y,b){return g===null||g.tag!==6?(g=bc(y,m.mode,b),g.return=m,g):(g=i(g,y),g.return=m,g)}function l(m,g,y,b){var x=y.type;return x===vi?c(m,g,y.props.children,b,y.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Wn&&Tm(x)===g.type)?(b=i(g,y.props),b.ref=Es(m,g,y),b.return=m,b):(b=Qo(y.type,y.key,y.props,null,m.mode,b),b.ref=Es(m,g,y),b.return=m,b)}function u(m,g,y,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=xc(y,m.mode,b),g.return=m,g):(g=i(g,y.children||[]),g.return=m,g)}function c(m,g,y,b,x){return g===null||g.tag!==7?(g=Hr(y,m.mode,b,x),g.return=m,g):(g=i(g,y),g.return=m,g)}function d(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=bc(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case po:return y=Qo(g.type,g.key,g.props,null,m.mode,y),y.ref=Es(m,null,g),y.return=m,y;case yi:return g=xc(g,m.mode,y),g.return=m,g;case Wn:var b=g._init;return d(m,b(g._payload),y)}if(Is(g)||ws(g))return g=Hr(g,m.mode,y,null),g.return=m,g;To(m,g)}return null}function f(m,g,y,b){var x=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:o(m,g,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case po:return y.key===x?l(m,g,y,b):null;case yi:return y.key===x?u(m,g,y,b):null;case Wn:return x=y._init,f(m,g,x(y._payload),b)}if(Is(y)||ws(y))return x!==null?null:c(m,g,y,b,null);To(m,y)}return null}function h(m,g,y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(y)||null,o(g,m,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case po:return m=m.get(b.key===null?y:b.key)||null,l(g,m,b,x);case yi:return m=m.get(b.key===null?y:b.key)||null,u(g,m,b,x);case Wn:var T=b._init;return h(m,g,y,T(b._payload),x)}if(Is(b)||ws(b))return m=m.get(y)||null,c(g,m,b,x,null);To(g,b)}return null}function p(m,g,y,b){for(var x=null,T=null,R=g,k=g=0,G=null;R!==null&&k<y.length;k++){R.index>k?(G=R,R=null):G=R.sibling;var V=f(m,R,y[k],b);if(V===null){R===null&&(R=G);break}t&&R&&V.alternate===null&&e(m,R),g=s(V,g,k),T===null?x=V:T.sibling=V,T=V,R=G}if(k===y.length)return n(m,R),pe&&Ar(m,k),x;if(R===null){for(;k<y.length;k++)R=d(m,y[k],b),R!==null&&(g=s(R,g,k),T===null?x=R:T.sibling=R,T=R);return pe&&Ar(m,k),x}for(R=r(m,R);k<y.length;k++)G=h(R,m,k,y[k],b),G!==null&&(t&&G.alternate!==null&&R.delete(G.key===null?k:G.key),g=s(G,g,k),T===null?x=G:T.sibling=G,T=G);return t&&R.forEach(function(ne){return e(m,ne)}),pe&&Ar(m,k),x}function v(m,g,y,b){var x=ws(y);if(typeof x!="function")throw Error(O(150));if(y=x.call(y),y==null)throw Error(O(151));for(var T=x=null,R=g,k=g=0,G=null,V=y.next();R!==null&&!V.done;k++,V=y.next()){R.index>k?(G=R,R=null):G=R.sibling;var ne=f(m,R,V.value,b);if(ne===null){R===null&&(R=G);break}t&&R&&ne.alternate===null&&e(m,R),g=s(ne,g,k),T===null?x=ne:T.sibling=ne,T=ne,R=G}if(V.done)return n(m,R),pe&&Ar(m,k),x;if(R===null){for(;!V.done;k++,V=y.next())V=d(m,V.value,b),V!==null&&(g=s(V,g,k),T===null?x=V:T.sibling=V,T=V);return pe&&Ar(m,k),x}for(R=r(m,R);!V.done;k++,V=y.next())V=h(R,m,k,V.value,b),V!==null&&(t&&V.alternate!==null&&R.delete(V.key===null?k:V.key),g=s(V,g,k),T===null?x=V:T.sibling=V,T=V);return t&&R.forEach(function(Ae){return e(m,Ae)}),pe&&Ar(m,k),x}function w(m,g,y,b){if(typeof y=="object"&&y!==null&&y.type===vi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case po:e:{for(var x=y.key,T=g;T!==null;){if(T.key===x){if(x=y.type,x===vi){if(T.tag===7){n(m,T.sibling),g=i(T,y.props.children),g.return=m,m=g;break e}}else if(T.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Wn&&Tm(x)===T.type){n(m,T.sibling),g=i(T,y.props),g.ref=Es(m,T,y),g.return=m,m=g;break e}n(m,T);break}else e(m,T);T=T.sibling}y.type===vi?(g=Hr(y.props.children,m.mode,b,y.key),g.return=m,m=g):(b=Qo(y.type,y.key,y.props,null,m.mode,b),b.ref=Es(m,g,y),b.return=m,m=b)}return a(m);case yi:e:{for(T=y.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=i(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=xc(y,m.mode,b),g.return=m,m=g}return a(m);case Wn:return T=y._init,w(m,g,T(y._payload),b)}if(Is(y))return p(m,g,y,b);if(ws(y))return v(m,g,y,b);To(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,y),g.return=m,m=g):(n(m,g),g=bc(y,m.mode,b),g.return=m,m=g),a(m)):n(m,g)}return w}var Ji=Qw(!0),Yw=Qw(!1),ml=Er(null),gl=null,Pi=null,mh=null;function gh(){mh=Pi=gl=null}function yh(t){var e=ml.current;fe(ml),t._currentValue=e}function Vd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bi(t,e){gl=t,mh=Pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lt=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(mh!==t)if(t={context:t,memoizedValue:e,next:null},Pi===null){if(gl===null)throw Error(O(308));Pi=t,gl.dependencies={lanes:0,firstContext:t}}else Pi=Pi.next=t;return e}var Dr=null;function vh(t){Dr===null?Dr=[t]:Dr.push(t)}function e0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vh(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ln(t,r)}function Ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ln(t,n)}return i=r.interleaved,i===null?(e.next=e,vh(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ln(t,n)}function Go(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}function Pm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yl(t,e,n,r){var i=t.updateQueue;Gn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,c=u=l=null,o=s;do{var f=o.lane,h=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=t,v=o;switch(f=e,h=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=we({},d,f);break e;case 2:Gn=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yr|=a,t.lanes=a,t.memoizedState=d}}function km(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var Xa={},pn=Er(Xa),ga=Er(Xa),ya=Er(Xa);function Mr(t){if(t===Xa)throw Error(O(174));return t}function _h(t,e){switch(ce(ya,e),ce(ga,t),ce(pn,Xa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bd(e,t)}fe(pn),ce(pn,e)}function Xi(){fe(pn),fe(ga),fe(ya)}function n0(t){Mr(ya.current);var e=Mr(pn.current),n=bd(e,t.type);e!==n&&(ce(ga,t),ce(pn,n))}function bh(t){ga.current===t&&(fe(pn),fe(ga))}var ge=Er(0);function vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mc=[];function xh(){for(var t=0;t<mc.length;t++)mc[t]._workInProgressVersionPrimary=null;mc.length=0}var Zo=Fn.ReactCurrentDispatcher,gc=Fn.ReactCurrentBatchConfig,Qr=0,ve=null,ke=null,Ne=null,wl=!1,Zs=!1,va=0,hE=0;function Ve(){throw Error(O(321))}function Sh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!en(t[n],e[n]))return!1;return!0}function Eh(t,e,n,r,i,s){if(Qr=s,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zo.current=t===null||t.memoizedState===null?yE:vE,t=n(r,i),Zs){s=0;do{if(Zs=!1,va=0,25<=s)throw Error(O(301));s+=1,Ne=ke=null,e.updateQueue=null,Zo.current=wE,t=n(r,i)}while(Zs)}if(Zo.current=_l,e=ke!==null&&ke.next!==null,Qr=0,Ne=ke=ve=null,wl=!1,e)throw Error(O(300));return t}function Th(){var t=va!==0;return va=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ve.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function $t(){if(ke===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Ne===null?ve.memoizedState:Ne.next;if(e!==null)Ne=e,ke=t;else{if(t===null)throw Error(O(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ne===null?ve.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function wa(t,e){return typeof e=="function"?e(t):e}function yc(t){var e=$t(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=ke,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((Qr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,ve.lanes|=c,Yr|=c}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,en(r,e.memoizedState)||(lt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ve.lanes|=s,Yr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vc(t){var e=$t(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);en(s,e.memoizedState)||(lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function r0(){}function i0(t,e){var n=ve,r=$t(),i=e(),s=!en(r.memoizedState,i);if(s&&(r.memoizedState=i,lt=!0),r=r.queue,Ph(o0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,_a(9,a0.bind(null,n,r,i,e),void 0,null),$e===null)throw Error(O(349));Qr&30||s0(n,e,i)}return i}function s0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function a0(t,e,n,r){e.value=n,e.getSnapshot=r,l0(e)&&u0(t)}function o0(t,e,n){return n(function(){l0(e)&&u0(t)})}function l0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!en(t,n)}catch{return!0}}function u0(t){var e=Ln(t,1);e!==null&&Kt(e,t,1,-1)}function Cm(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},e.queue=t,t=t.dispatch=gE.bind(null,ve,t),[e.memoizedState,t]}function _a(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function c0(){return $t().memoizedState}function qo(t,e,n,r){var i=ln();ve.flags|=t,i.memoizedState=_a(1|e,n,void 0,r===void 0?null:r)}function gu(t,e,n,r){var i=$t();r=r===void 0?null:r;var s=void 0;if(ke!==null){var a=ke.memoizedState;if(s=a.destroy,r!==null&&Sh(r,a.deps)){i.memoizedState=_a(e,n,s,r);return}}ve.flags|=t,i.memoizedState=_a(1|e,n,s,r)}function Rm(t,e){return qo(8390656,8,t,e)}function Ph(t,e){return gu(2048,8,t,e)}function d0(t,e){return gu(4,2,t,e)}function f0(t,e){return gu(4,4,t,e)}function h0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p0(t,e,n){return n=n!=null?n.concat([t]):null,gu(4,4,h0.bind(null,e,t),n)}function kh(){}function m0(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g0(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function y0(t,e,n){return Qr&21?(en(n,e)||(n=xw(),ve.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lt=!0),t.memoizedState=n)}function pE(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=gc.transition;gc.transition={};try{t(!1),e()}finally{oe=n,gc.transition=r}}function v0(){return $t().memoizedState}function mE(t,e,n){var r=lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},w0(t))_0(e,n);else if(n=e0(t,e,n,r),n!==null){var i=et();Kt(n,t,r,i),b0(n,e,r)}}function gE(t,e,n){var r=lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(w0(t))_0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,en(o,a)){var l=e.interleaved;l===null?(i.next=i,vh(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=e0(t,e,i,r),n!==null&&(i=et(),Kt(n,t,r,i),b0(n,e,r))}}function w0(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function _0(t,e){Zs=wl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function b0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ih(t,n)}}var _l={readContext:jt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},yE={readContext:jt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Rm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qo(4194308,4,h0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qo(4194308,4,t,e)},useInsertionEffect:function(t,e){return qo(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mE.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:Cm,useDebugValue:kh,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=Cm(!1),e=t[0];return t=pE.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=ln();if(pe){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),$e===null)throw Error(O(349));Qr&30||s0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Rm(o0.bind(null,r,s,t),[t]),r.flags|=2048,_a(9,a0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ln(),e=$e.identifierPrefix;if(pe){var n=Tn,r=En;n=(r&~(1<<32-qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=va++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vE={readContext:jt,useCallback:m0,useContext:jt,useEffect:Ph,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:f0,useMemo:g0,useReducer:yc,useRef:c0,useState:function(){return yc(wa)},useDebugValue:kh,useDeferredValue:function(t){var e=$t();return y0(e,ke.memoizedState,t)},useTransition:function(){var t=yc(wa)[0],e=$t().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:i0,useId:v0,unstable_isNewReconciler:!1},wE={readContext:jt,useCallback:m0,useContext:jt,useEffect:Ph,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:f0,useMemo:g0,useReducer:vc,useRef:c0,useState:function(){return vc(wa)},useDebugValue:kh,useDeferredValue:function(t){var e=$t();return ke===null?e.memoizedState=t:y0(e,ke.memoizedState,t)},useTransition:function(){var t=vc(wa)[0],e=$t().memoizedState;return[t,e]},useMutableSource:r0,useSyncExternalStore:i0,useId:v0,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yu={isMounted:function(t){return(t=t._reactInternals)?li(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=et(),i=lr(t),s=Cn(r,i);s.payload=e,n!=null&&(s.callback=n),e=ar(t,s,i),e!==null&&(Kt(e,t,i,r),Go(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=et(),i=lr(t),s=Cn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ar(t,s,i),e!==null&&(Kt(e,t,i,r),Go(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=et(),r=lr(t),i=Cn(n,r);i.tag=2,e!=null&&(i.callback=e),e=ar(t,i,r),e!==null&&(Kt(e,t,r,n),Go(e,t,r))}};function Om(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(i,s):!0}function x0(t,e,n){var r=!1,i=hr,s=e.contextType;return typeof s=="object"&&s!==null?s=jt(s):(i=ct(e)?Jr:qe.current,r=e.contextTypes,s=(r=r!=null)?qi(t,i):hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Am(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yu.enqueueReplaceState(e,e.state,null)}function zd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jt(s):(s=ct(e)?Jr:qe.current,i.context=qi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yu.enqueueReplaceState(i,i.state,null),yl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qi(t,e){try{var n="",r=e;do n+=Z1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _E=typeof WeakMap=="function"?WeakMap:Map;function S0(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xl||(xl=!0,ef=r),Hd(t,e)},n}function E0(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hd(t,e),typeof r!="function"&&(or===null?or=new Set([this]):or.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Im(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _E;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jE.bind(null,t,e,n),e.then(t,t))}function Nm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,ar(n,e,1))),n.lanes|=1),t)}var bE=Fn.ReactCurrentOwner,lt=!1;function Ye(t,e,n,r){e.child=t===null?Yw(e,null,n,r):Ji(e,t.child,n,r)}function $m(t,e,n,r,i){n=n.render;var s=e.ref;return Bi(e,i),r=Eh(t,e,n,r,s,i),n=Th(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(pe&&n&&fh(e),e.flags|=1,Ye(t,e,r,i),e.child)}function Lm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!$h(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,T0(t,e,s,r,i)):(t=Qo(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(a,r)&&t.ref===e.ref)return Dn(t,e,i)}return e.flags|=1,t=ur(s,r),t.ref=e.ref,t.return=e,e.child=t}function T0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fa(s,r)&&t.ref===e.ref)if(lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(lt=!0);else return e.lanes=t.lanes,Dn(t,e,i)}return Wd(t,e,n,r,i)}function P0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Ci,mt),mt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Ci,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ce(Ci,mt),mt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ce(Ci,mt),mt|=r;return Ye(t,e,i,n),e.child}function k0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wd(t,e,n,r,i){var s=ct(n)?Jr:qe.current;return s=qi(e,s),Bi(e,i),n=Eh(t,e,n,r,s,i),r=Th(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dn(t,e,i)):(pe&&r&&fh(e),e.flags|=1,Ye(t,e,n,i),e.child)}function Dm(t,e,n,r,i){if(ct(n)){var s=!0;fl(e)}else s=!1;if(Bi(e,i),e.stateNode===null)Ko(t,e),x0(e,n,r),zd(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=ct(n)?Jr:qe.current,u=qi(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&Am(e,a,r,u),Gn=!1;var f=e.memoizedState;a.state=f,yl(e,r,a,i),l=e.memoizedState,o!==r||f!==l||ut.current||Gn?(typeof c=="function"&&(Bd(e,n,c,r),l=e.memoizedState),(o=Gn||Om(e,n,o,r,f,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,t0(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Bt(e.type,o),a.props=u,d=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=jt(l):(l=ct(n)?Jr:qe.current,l=qi(e,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&Am(e,a,r,l),Gn=!1,f=e.memoizedState,a.state=f,yl(e,r,a,i);var p=e.memoizedState;o!==d||f!==p||ut.current||Gn?(typeof h=="function"&&(Bd(e,n,h,r),p=e.memoizedState),(u=Gn||Om(e,n,u,r,f,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Gd(t,e,n,r,s,i)}function Gd(t,e,n,r,i,s){k0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&xm(e,n,!1),Dn(t,e,s);r=e.stateNode,bE.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ji(e,t.child,null,s),e.child=Ji(e,null,o,s)):Ye(t,e,o,s),e.memoizedState=r.state,i&&xm(e,n,!0),e.child}function C0(t){var e=t.stateNode;e.pendingContext?bm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bm(t,e.context,!1),_h(t,e.containerInfo)}function Mm(t,e,n,r,i){return Ki(),ph(i),e.flags|=256,Ye(t,e,n,r),e.child}var Zd={dehydrated:null,treeContext:null,retryLane:0};function qd(t){return{baseLanes:t,cachePool:null,transitions:null}}function R0(t,e,n){var r=e.pendingProps,i=ge.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ce(ge,i&1),t===null)return Ud(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=_u(a,r,0,null),t=Hr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qd(n),e.memoizedState=Zd,t):Ch(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return xE(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ur(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=ur(o,s):(s=Hr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?qd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Zd,r}return s=t.child,t=s.sibling,r=ur(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ch(t,e){return e=_u({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Po(t,e,n,r){return r!==null&&ph(r),Ji(e,t.child,null,n),t=Ch(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xE(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=wc(Error(O(422))),Po(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=_u({mode:"visible",children:r.children},i,0,null),s=Hr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ji(e,t.child,null,a),e.child.memoizedState=qd(a),e.memoizedState=Zd,s);if(!(e.mode&1))return Po(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(O(419)),r=wc(s,r,void 0),Po(t,e,a,r)}if(o=(a&t.childLanes)!==0,lt||o){if(r=$e,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ln(t,i),Kt(r,t,i,-1))}return jh(),r=wc(Error(O(421))),Po(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$E.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yt=sr(i.nextSibling),vt=e,pe=!0,Ht=null,t!==null&&(Ot[At++]=En,Ot[At++]=Tn,Ot[At++]=Xr,En=t.id,Tn=t.overflow,Xr=e),e=Ch(e,r.children),e.flags|=4096,e)}function Fm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vd(t.return,e,n)}function _c(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function O0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ye(t,e,r.children,n),r=ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Fm(t,n,e);else if(t.tag===19)Fm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_c(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_c(e,!0,n,null,s);break;case"together":_c(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ko(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SE(t,e,n){switch(e.tag){case 3:C0(e),Ki();break;case 5:n0(e);break;case 1:ct(e.type)&&fl(e);break;case 4:_h(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ce(ml,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ce(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?R0(t,e,n):(ce(ge,ge.current&1),t=Dn(t,e,n),t!==null?t.sibling:null);ce(ge,ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return O0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ce(ge,ge.current),r)break;return null;case 22:case 23:return e.lanes=0,P0(t,e,n)}return Dn(t,e,n)}var A0,Kd,I0,N0;A0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kd=function(){};I0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mr(pn.current);var s=null;switch(n){case"input":i=yd(t,i),r=yd(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=_d(t,i),r=_d(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=cl)}xd(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(sa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(sa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&de("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};N0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ts(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Be(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EE(t,e,n){var r=e.pendingProps;switch(hh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Be(e),null;case 1:return ct(e.type)&&dl(),Be(e),null;case 3:return r=e.stateNode,Xi(),fe(ut),fe(qe),xh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(rf(Ht),Ht=null))),Kd(t,e),Be(e),null;case 5:bh(e);var i=Mr(ya.current);if(n=e.type,t!==null&&e.stateNode!=null)I0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return Be(e),null}if(t=Mr(pn.current),Eo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[un]=e,r[ma]=s,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(i=0;i<js.length;i++)de(js[i],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":qp(r,s),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},de("invalid",r);break;case"textarea":Jp(r,s),de("invalid",r)}xd(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&So(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&So(r.textContent,o,t),i=["children",""+o]):sa.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&de("scroll",r)}switch(n){case"input":mo(r),Kp(r,s,!0);break;case"textarea":mo(r),Xp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=cl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ow(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[un]=e,t[ma]=r,A0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Sd(n,r),n){case"dialog":de("cancel",t),de("close",t),i=r;break;case"iframe":case"object":case"embed":de("load",t),i=r;break;case"video":case"audio":for(i=0;i<js.length;i++)de(js[i],t);i=r;break;case"source":de("error",t),i=r;break;case"img":case"image":case"link":de("error",t),de("load",t),i=r;break;case"details":de("toggle",t),i=r;break;case"input":qp(t,r),i=yd(t,r),de("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),de("invalid",t);break;case"textarea":Jp(t,r),i=_d(t,r),de("invalid",t);break;default:i=r}xd(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?cw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&aa(t,l):typeof l=="number"&&aa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&de("scroll",t):l!=null&&Qf(t,s,l,a))}switch(n){case"input":mo(t),Kp(t,r,!1);break;case"textarea":mo(t),Xp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Mi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=cl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Be(e),null;case 6:if(t&&e.stateNode!=null)N0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=Mr(ya.current),Mr(pn.current),Eo(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(s=r.nodeValue!==n)&&(t=vt,t!==null))switch(t.tag){case 3:So(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&So(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return Be(e),null;case 13:if(fe(ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&yt!==null&&e.mode&1&&!(e.flags&128))Xw(),Ki(),e.flags|=98560,s=!1;else if(s=Eo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[un]=e}else Ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Be(e),s=!1}else Ht!==null&&(rf(Ht),Ht=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Re===0&&(Re=3):jh())),e.updateQueue!==null&&(e.flags|=4),Be(e),null);case 4:return Xi(),Kd(t,e),t===null&&ha(e.stateNode.containerInfo),Be(e),null;case 10:return yh(e.type._context),Be(e),null;case 17:return ct(e.type)&&dl(),Be(e),null;case 19:if(fe(ge),s=e.memoizedState,s===null)return Be(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Ts(s,!1);else{if(Re!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=vl(t),a!==null){for(e.flags|=128,Ts(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(ge,ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&xe()>Yi&&(e.flags|=128,r=!0,Ts(s,!1),e.lanes=4194304)}else{if(!r)if(t=vl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ts(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!pe)return Be(e),null}else 2*xe()-s.renderingStartTime>Yi&&n!==1073741824&&(e.flags|=128,r=!0,Ts(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xe(),e.sibling=null,n=ge.current,ce(ge,r?n&1|2:n&1),e):(Be(e),null);case 22:case 23:return Nh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mt&1073741824&&(Be(e),e.subtreeFlags&6&&(e.flags|=8192)):Be(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function TE(t,e){switch(hh(e),e.tag){case 1:return ct(e.type)&&dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xi(),fe(ut),fe(qe),xh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bh(e),null;case 13:if(fe(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));Ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(ge),null;case 4:return Xi(),null;case 10:return yh(e.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var ko=!1,He=!1,PE=typeof WeakSet=="function"?WeakSet:Set,F=null;function ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(t,e,r)}else n.current=null}function Jd(t,e,n){try{n()}catch(r){_e(t,e,r)}}var Um=!1;function kE(t,e){if(Nd=ol,t=Mw(),dh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++u===i&&(o=a),f===s&&++c===r&&(l=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(jd={focusedElem:t,selectionRange:n},ol=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,w=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:Bt(e.type,v),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(b){_e(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return p=Um,Um=!1,p}function qs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Jd(e,n,s)}i=i.next}while(i!==r)}}function vu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function j0(t){var e=t.alternate;e!==null&&(t.alternate=null,j0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[ma],delete e[Dd],delete e[uE],delete e[cE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $0(t){return t.tag===5||t.tag===3||t.tag===4}function Vm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=cl));else if(r!==4&&(t=t.child,t!==null))for(Qd(t,e,n),t=t.sibling;t!==null;)Qd(t,e,n),t=t.sibling}function Yd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yd(t,e,n),t=t.sibling;t!==null;)Yd(t,e,n),t=t.sibling}var De=null,zt=!1;function Vn(t,e,n){for(n=n.child;n!==null;)L0(t,e,n),n=n.sibling}function L0(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(cu,n)}catch{}switch(n.tag){case 5:He||ki(n,e);case 6:var r=De,i=zt;De=null,Vn(t,e,n),De=r,zt=i,De!==null&&(zt?(t=De,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(zt?(t=De,n=n.stateNode,t.nodeType===8?hc(t.parentNode,n):t.nodeType===1&&hc(t,n),ca(t)):hc(De,n.stateNode));break;case 4:r=De,i=zt,De=n.stateNode.containerInfo,zt=!0,Vn(t,e,n),De=r,zt=i;break;case 0:case 11:case 14:case 15:if(!He&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Jd(n,e,a),i=i.next}while(i!==r)}Vn(t,e,n);break;case 1:if(!He&&(ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){_e(n,e,o)}Vn(t,e,n);break;case 21:Vn(t,e,n);break;case 22:n.mode&1?(He=(r=He)||n.memoizedState!==null,Vn(t,e,n),He=r):Vn(t,e,n);break;default:Vn(t,e,n)}}function Bm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new PE),e.forEach(function(r){var i=LE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:De=o.stateNode,zt=!1;break e;case 3:De=o.stateNode.containerInfo,zt=!0;break e;case 4:De=o.stateNode.containerInfo,zt=!0;break e}o=o.return}if(De===null)throw Error(O(160));L0(s,a,i),De=null,zt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){_e(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)D0(e,t),e=e.sibling}function D0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),an(t),r&4){try{qs(3,t,t.return),vu(3,t)}catch(v){_e(t,t.return,v)}try{qs(5,t,t.return)}catch(v){_e(t,t.return,v)}}break;case 1:Mt(e,t),an(t),r&512&&n!==null&&ki(n,n.return);break;case 5:if(Mt(e,t),an(t),r&512&&n!==null&&ki(n,n.return),t.flags&32){var i=t.stateNode;try{aa(i,"")}catch(v){_e(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&sw(i,s),Sd(o,a);var u=Sd(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?cw(i,d):c==="dangerouslySetInnerHTML"?lw(i,d):c==="children"?aa(i,d):Qf(i,c,d,u)}switch(o){case"input":vd(i,s);break;case"textarea":aw(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Mi(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Mi(i,!!s.multiple,s.defaultValue,!0):Mi(i,!!s.multiple,s.multiple?[]:"",!1))}i[ma]=s}catch(v){_e(t,t.return,v)}}break;case 6:if(Mt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){_e(t,t.return,v)}}break;case 3:if(Mt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ca(e.containerInfo)}catch(v){_e(t,t.return,v)}break;case 4:Mt(e,t),an(t);break;case 13:Mt(e,t),an(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ah=xe())),r&4&&Bm(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(He=(u=He)||c,Mt(e,t),He=u):Mt(e,t),an(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(F=t,c=t.child;c!==null;){for(d=F=c;F!==null;){switch(f=F,h=f.child,f.tag){case 0:case 11:case 14:case 15:qs(4,f,f.return);break;case 1:ki(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){_e(r,n,v)}}break;case 5:ki(f,f.return);break;case 22:if(f.memoizedState!==null){Hm(d);continue}}h!==null?(h.return=f,F=h):Hm(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=uw("display",a))}catch(v){_e(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){_e(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Mt(e,t),an(t),r&4&&Bm(t);break;case 21:break;default:Mt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($0(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(aa(i,""),r.flags&=-33);var s=Vm(t);Yd(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Vm(t);Qd(t,o,a);break;default:throw Error(O(161))}}catch(l){_e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CE(t,e,n){F=t,M0(t)}function M0(t,e,n){for(var r=(t.mode&1)!==0;F!==null;){var i=F,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ko;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||He;o=ko;var u=He;if(ko=a,(He=l)&&!u)for(F=i;F!==null;)a=F,l=a.child,a.tag===22&&a.memoizedState!==null?Wm(i):l!==null?(l.return=a,F=l):Wm(i);for(;s!==null;)F=s,M0(s),s=s.sibling;F=i,ko=o,He=u}zm(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,F=s):zm(t)}}function zm(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:He||vu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!He)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&km(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}km(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&ca(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}He||e.flags&512&&Xd(e)}catch(f){_e(e,e.return,f)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function Hm(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function Wm(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{vu(4,e)}catch(l){_e(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){_e(e,i,l)}}var s=e.return;try{Xd(e)}catch(l){_e(e,s,l)}break;case 5:var a=e.return;try{Xd(e)}catch(l){_e(e,a,l)}}}catch(l){_e(e,e.return,l)}if(e===t){F=null;break}var o=e.sibling;if(o!==null){o.return=e.return,F=o;break}F=e.return}}var RE=Math.ceil,bl=Fn.ReactCurrentDispatcher,Rh=Fn.ReactCurrentOwner,Nt=Fn.ReactCurrentBatchConfig,re=0,$e=null,Ee=null,Fe=0,mt=0,Ci=Er(0),Re=0,ba=null,Yr=0,wu=0,Oh=0,Ks=null,ot=null,Ah=0,Yi=1/0,xn=null,xl=!1,ef=null,or=null,Co=!1,Yn=null,Sl=0,Js=0,tf=null,Jo=-1,Xo=0;function et(){return re&6?xe():Jo!==-1?Jo:Jo=xe()}function lr(t){return t.mode&1?re&2&&Fe!==0?Fe&-Fe:fE.transition!==null?(Xo===0&&(Xo=xw()),Xo):(t=oe,t!==0||(t=window.event,t=t===void 0?16:Rw(t.type)),t):1}function Kt(t,e,n,r){if(50<Js)throw Js=0,tf=null,Error(O(185));qa(t,n,r),(!(re&2)||t!==$e)&&(t===$e&&(!(re&2)&&(wu|=n),Re===4&&Jn(t,Fe)),dt(t,r),n===1&&re===0&&!(e.mode&1)&&(Yi=xe()+500,mu&&Tr()))}function dt(t,e){var n=t.callbackNode;fS(t,e);var r=al(t,t===$e?Fe:0);if(r===0)n!==null&&em(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&em(n),e===1)t.tag===0?dE(Gm.bind(null,t)):qw(Gm.bind(null,t)),oE(function(){!(re&6)&&Tr()}),n=null;else{switch(Sw(r)){case 1:n=rh;break;case 4:n=_w;break;case 16:n=sl;break;case 536870912:n=bw;break;default:n=sl}n=G0(n,F0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F0(t,e){if(Jo=-1,Xo=0,re&6)throw Error(O(327));var n=t.callbackNode;if(zi()&&t.callbackNode!==n)return null;var r=al(t,t===$e?Fe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=El(t,r);else{e=r;var i=re;re|=2;var s=V0();($e!==t||Fe!==e)&&(xn=null,Yi=xe()+500,zr(t,e));do try{IE();break}catch(o){U0(t,o)}while(!0);gh(),bl.current=s,re=i,Ee!==null?e=0:($e=null,Fe=0,e=Re)}if(e!==0){if(e===2&&(i=Cd(t),i!==0&&(r=i,e=nf(t,i))),e===1)throw n=ba,zr(t,0),Jn(t,r),dt(t,xe()),n;if(e===6)Jn(t,r);else{if(i=t.current.alternate,!(r&30)&&!OE(i)&&(e=El(t,r),e===2&&(s=Cd(t),s!==0&&(r=s,e=nf(t,s))),e===1))throw n=ba,zr(t,0),Jn(t,r),dt(t,xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:Ir(t,ot,xn);break;case 3:if(Jn(t,r),(r&130023424)===r&&(e=Ah+500-xe(),10<e)){if(al(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ld(Ir.bind(null,t,ot,xn),e);break}Ir(t,ot,xn);break;case 4:if(Jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-qt(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RE(r/1960))-r,10<r){t.timeoutHandle=Ld(Ir.bind(null,t,ot,xn),r);break}Ir(t,ot,xn);break;case 5:Ir(t,ot,xn);break;default:throw Error(O(329))}}}return dt(t,xe()),t.callbackNode===n?F0.bind(null,t):null}function nf(t,e){var n=Ks;return t.current.memoizedState.isDehydrated&&(zr(t,e).flags|=256),t=El(t,e),t!==2&&(e=ot,ot=n,e!==null&&rf(e)),t}function rf(t){ot===null?ot=t:ot.push.apply(ot,t)}function OE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!en(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jn(t,e){for(e&=~Oh,e&=~wu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qt(e),r=1<<n;t[n]=-1,e&=~r}}function Gm(t){if(re&6)throw Error(O(327));zi();var e=al(t,0);if(!(e&1))return dt(t,xe()),null;var n=El(t,e);if(t.tag!==0&&n===2){var r=Cd(t);r!==0&&(e=r,n=nf(t,r))}if(n===1)throw n=ba,zr(t,0),Jn(t,e),dt(t,xe()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ir(t,ot,xn),dt(t,xe()),null}function Ih(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Yi=xe()+500,mu&&Tr())}}function ei(t){Yn!==null&&Yn.tag===0&&!(re&6)&&zi();var e=re;re|=1;var n=Nt.transition,r=oe;try{if(Nt.transition=null,oe=1,t)return t()}finally{oe=r,Nt.transition=n,re=e,!(re&6)&&Tr()}}function Nh(){mt=Ci.current,fe(Ci)}function zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aE(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(hh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dl();break;case 3:Xi(),fe(ut),fe(qe),xh();break;case 5:bh(r);break;case 4:Xi();break;case 13:fe(ge);break;case 19:fe(ge);break;case 10:yh(r.type._context);break;case 22:case 23:Nh()}n=n.return}if($e=t,Ee=t=ur(t.current,null),Fe=mt=e,Re=0,ba=null,Oh=wu=Yr=0,ot=Ks=null,Dr!==null){for(e=0;e<Dr.length;e++)if(n=Dr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Dr=null}return t}function U0(t,e){do{var n=Ee;try{if(gh(),Zo.current=_l,wl){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wl=!1}if(Qr=0,Ne=ke=ve=null,Zs=!1,va=0,Rh.current=null,n===null||n.return===null){Re=1,ba=e,Ee=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Fe,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Nm(a);if(h!==null){h.flags&=-257,jm(h,a,o,s,e),h.mode&1&&Im(s,u,e),e=h,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){Im(s,u,e),jh();break e}l=Error(O(426))}}else if(pe&&o.mode&1){var w=Nm(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),jm(w,a,o,s,e),ph(Qi(l,o));break e}}s=l=Qi(l,o),Re!==4&&(Re=2),Ks===null?Ks=[s]:Ks.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=S0(s,l,e);Pm(s,m);break e;case 1:o=l;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(or===null||!or.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=E0(s,o,e);Pm(s,b);break e}}s=s.return}while(s!==null)}z0(n)}catch(x){e=x,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function V0(){var t=bl.current;return bl.current=_l,t===null?_l:t}function jh(){(Re===0||Re===3||Re===2)&&(Re=4),$e===null||!(Yr&268435455)&&!(wu&268435455)||Jn($e,Fe)}function El(t,e){var n=re;re|=2;var r=V0();($e!==t||Fe!==e)&&(xn=null,zr(t,e));do try{AE();break}catch(i){U0(t,i)}while(!0);if(gh(),re=n,bl.current=r,Ee!==null)throw Error(O(261));return $e=null,Fe=0,Re}function AE(){for(;Ee!==null;)B0(Ee)}function IE(){for(;Ee!==null&&!rS();)B0(Ee)}function B0(t){var e=W0(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?z0(t):Ee=e,Rh.current=null}function z0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TE(n,e),n!==null){n.flags&=32767,Ee=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Re=6,Ee=null;return}}else if(n=EE(n,e,mt),n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);Re===0&&(Re=5)}function Ir(t,e,n){var r=oe,i=Nt.transition;try{Nt.transition=null,oe=1,NE(t,e,n,r)}finally{Nt.transition=i,oe=r}return null}function NE(t,e,n,r){do zi();while(Yn!==null);if(re&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hS(t,s),t===$e&&(Ee=$e=null,Fe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Co||(Co=!0,G0(sl,function(){return zi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nt.transition,Nt.transition=null;var a=oe;oe=1;var o=re;re|=4,Rh.current=null,kE(t,n),D0(n,t),YS(jd),ol=!!Nd,jd=Nd=null,t.current=n,CE(n),iS(),re=o,oe=a,Nt.transition=s}else t.current=n;if(Co&&(Co=!1,Yn=t,Sl=i),s=t.pendingLanes,s===0&&(or=null),oS(n.stateNode),dt(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xl)throw xl=!1,t=ef,ef=null,t;return Sl&1&&t.tag!==0&&zi(),s=t.pendingLanes,s&1?t===tf?Js++:(Js=0,tf=t):Js=0,Tr(),null}function zi(){if(Yn!==null){var t=Sw(Sl),e=Nt.transition,n=oe;try{if(Nt.transition=null,oe=16>t?16:t,Yn===null)var r=!1;else{if(t=Yn,Yn=null,Sl=0,re&6)throw Error(O(331));var i=re;for(re|=4,F=t.current;F!==null;){var s=F,a=s.child;if(F.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(F=u;F!==null;){var c=F;switch(c.tag){case 0:case 11:case 15:qs(8,c,s)}var d=c.child;if(d!==null)d.return=c,F=d;else for(;F!==null;){c=F;var f=c.sibling,h=c.return;if(j0(c),c===u){F=null;break}if(f!==null){f.return=h,F=f;break}F=h}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}F=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,F=a;else e:for(;F!==null;){if(s=F,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qs(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,F=m;break e}F=s.return}}var g=t.current;for(F=g;F!==null;){a=F;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,F=y;else e:for(a=g;F!==null;){if(o=F,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:vu(9,o)}}catch(x){_e(o,o.return,x)}if(o===a){F=null;break e}var b=o.sibling;if(b!==null){b.return=o.return,F=b;break e}F=o.return}}if(re=i,Tr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(cu,t)}catch{}r=!0}return r}finally{oe=n,Nt.transition=e}}return!1}function Zm(t,e,n){e=Qi(n,e),e=S0(t,e,1),t=ar(t,e,1),e=et(),t!==null&&(qa(t,1,e),dt(t,e))}function _e(t,e,n){if(t.tag===3)Zm(t,t,n);else for(;e!==null;){if(e.tag===3){Zm(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(or===null||!or.has(r))){t=Qi(n,t),t=E0(e,t,1),e=ar(e,t,1),t=et(),e!==null&&(qa(e,1,t),dt(e,t));break}}e=e.return}}function jE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=et(),t.pingedLanes|=t.suspendedLanes&n,$e===t&&(Fe&n)===n&&(Re===4||Re===3&&(Fe&130023424)===Fe&&500>xe()-Ah?zr(t,0):Oh|=n),dt(t,e)}function H0(t,e){e===0&&(t.mode&1?(e=vo,vo<<=1,!(vo&130023424)&&(vo=4194304)):e=1);var n=et();t=Ln(t,e),t!==null&&(qa(t,e,n),dt(t,n))}function $E(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),H0(t,n)}function LE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),H0(t,n)}var W0;W0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ut.current)lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return lt=!1,SE(t,e,n);lt=!!(t.flags&131072)}else lt=!1,pe&&e.flags&1048576&&Kw(e,pl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ko(t,e),t=e.pendingProps;var i=qi(e,qe.current);Bi(e,n),i=Eh(null,e,r,t,i,n);var s=Th();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ct(r)?(s=!0,fl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wh(e),i.updater=yu,e.stateNode=i,i._reactInternals=e,zd(e,r,t,n),e=Gd(null,e,r,!0,s,n)):(e.tag=0,pe&&s&&fh(e),Ye(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ko(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ME(r),t=Bt(r,t),i){case 0:e=Wd(null,e,r,t,n);break e;case 1:e=Dm(null,e,r,t,n);break e;case 11:e=$m(null,e,r,t,n);break e;case 14:e=Lm(null,e,r,Bt(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Wd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Dm(t,e,r,i,n);case 3:e:{if(C0(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,t0(t,e),yl(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qi(Error(O(423)),e),e=Mm(t,e,r,n,i);break e}else if(r!==i){i=Qi(Error(O(424)),e),e=Mm(t,e,r,n,i);break e}else for(yt=sr(e.stateNode.containerInfo.firstChild),vt=e,pe=!0,Ht=null,n=Yw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ki(),r===i){e=Dn(t,e,n);break e}Ye(t,e,r,n)}e=e.child}return e;case 5:return n0(e),t===null&&Ud(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,$d(r,i)?a=null:s!==null&&$d(r,s)&&(e.flags|=32),k0(t,e),Ye(t,e,a,n),e.child;case 6:return t===null&&Ud(e),null;case 13:return R0(t,e,n);case 4:return _h(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ji(e,null,r,n):Ye(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),$m(t,e,r,i,n);case 7:return Ye(t,e,e.pendingProps,n),e.child;case 8:return Ye(t,e,e.pendingProps.children,n),e.child;case 12:return Ye(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ce(ml,r._currentValue),r._currentValue=a,s!==null)if(en(s.value,a)){if(s.children===i.children&&!ut.current){e=Dn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Cn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Vd(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(O(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Vd(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ye(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bi(e,n),i=jt(i),r=r(i),e.flags|=1,Ye(t,e,r,n),e.child;case 14:return r=e.type,i=Bt(r,e.pendingProps),i=Bt(r.type,i),Lm(t,e,r,i,n);case 15:return T0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bt(r,i),Ko(t,e),e.tag=1,ct(r)?(t=!0,fl(e)):t=!1,Bi(e,n),x0(e,r,i),zd(e,r,i,n),Gd(null,e,r,!0,t,n);case 19:return O0(t,e,n);case 22:return P0(t,e,n)}throw Error(O(156,e.tag))};function G0(t,e){return ww(t,e)}function DE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(t,e,n,r){return new DE(t,e,n,r)}function $h(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ME(t){if(typeof t=="function")return $h(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eh)return 11;if(t===th)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=It(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qo(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")$h(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case vi:return Hr(n.children,i,s,e);case Yf:a=8,i|=8;break;case hd:return t=It(12,n,e,i|2),t.elementType=hd,t.lanes=s,t;case pd:return t=It(13,n,e,i),t.elementType=pd,t.lanes=s,t;case md:return t=It(19,n,e,i),t.elementType=md,t.lanes=s,t;case nw:return _u(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ew:a=10;break e;case tw:a=9;break e;case eh:a=11;break e;case th:a=14;break e;case Wn:a=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=It(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Hr(t,e,n,r){return t=It(7,t,r,e),t.lanes=n,t}function _u(t,e,n,r){return t=It(22,t,r,e),t.elementType=nw,t.lanes=n,t.stateNode={isHidden:!1},t}function bc(t,e,n){return t=It(6,t,null,e),t.lanes=n,t}function xc(t,e,n){return e=It(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nc(0),this.expirationTimes=nc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lh(t,e,n,r,i,s,a,o,l){return t=new FE(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=It(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(s),t}function UE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Z0(t){if(!t)return hr;t=t._reactInternals;e:{if(li(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if(ct(n))return Zw(t,n,e)}return e}function q0(t,e,n,r,i,s,a,o,l){return t=Lh(n,r,!0,t,i,s,a,o,l),t.context=Z0(null),n=t.current,r=et(),i=lr(n),s=Cn(r,i),s.callback=e??null,ar(n,s,i),t.current.lanes=i,qa(t,i,r),dt(t,r),t}function bu(t,e,n,r){var i=e.current,s=et(),a=lr(i);return n=Z0(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ar(i,e,a),t!==null&&(Kt(t,i,a,s),Go(t,i,a)),a}function Tl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dh(t,e){qm(t,e),(t=t.alternate)&&qm(t,e)}function VE(){return null}var K0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mh(t){this._internalRoot=t}xu.prototype.render=Mh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));bu(t,e,null,null)};xu.prototype.unmount=Mh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ei(function(){bu(null,t,null,null)}),e[$n]=null}};function xu(t){this._internalRoot=t}xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kn.length&&e!==0&&e<Kn[n].priority;n++);Kn.splice(n,0,t),n===0&&Cw(t)}};function Fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Km(){}function BE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Tl(a);s.call(u)}}var a=q0(e,r,t,0,null,!1,!1,"",Km);return t._reactRootContainer=a,t[$n]=a.current,ha(t.nodeType===8?t.parentNode:t),ei(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Tl(l);o.call(u)}}var l=Lh(t,0,!1,null,null,!1,!1,"",Km);return t._reactRootContainer=l,t[$n]=l.current,ha(t.nodeType===8?t.parentNode:t),ei(function(){bu(e,l,n,r)}),l}function Eu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Tl(a);o.call(l)}}bu(e,a,t,i)}else a=BE(n,e,t,i,r);return Tl(a)}Ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ns(e.pendingLanes);n!==0&&(ih(e,n|1),dt(e,xe()),!(re&6)&&(Yi=xe()+500,Tr()))}break;case 13:ei(function(){var r=Ln(t,1);if(r!==null){var i=et();Kt(r,t,1,i)}}),Dh(t,1)}};sh=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var n=et();Kt(e,t,134217728,n)}Dh(t,134217728)}};Tw=function(t){if(t.tag===13){var e=lr(t),n=Ln(t,e);if(n!==null){var r=et();Kt(n,t,e,r)}Dh(t,e)}};Pw=function(){return oe};kw=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};Td=function(t,e,n){switch(e){case"input":if(vd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=pu(r);if(!i)throw Error(O(90));iw(r),vd(r,i)}}}break;case"textarea":aw(t,n);break;case"select":e=n.value,e!=null&&Mi(t,!!n.multiple,e,!1)}};hw=Ih;pw=ei;var zE={usingClientEntryPoint:!1,Events:[Ja,xi,pu,dw,fw,Ih]},Ps={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HE={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance||VE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{cu=Ro.inject(HE),hn=Ro}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE;Et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fh(e))throw Error(O(200));return UE(t,e,null,n)};Et.createRoot=function(t,e){if(!Fh(t))throw Error(O(299));var n=!1,r="",i=K0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lh(t,1,!1,null,null,n,!1,r,i),t[$n]=e.current,ha(t.nodeType===8?t.parentNode:t),new Mh(e)};Et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=yw(e),t=t===null?null:t.stateNode,t};Et.flushSync=function(t){return ei(t)};Et.hydrate=function(t,e,n){if(!Su(e))throw Error(O(200));return Eu(null,t,e,!0,n)};Et.hydrateRoot=function(t,e,n){if(!Fh(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=K0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=q0(e,null,t,1,n??null,i,!1,s,a),t[$n]=e.current,ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xu(e)};Et.render=function(t,e,n){if(!Su(e))throw Error(O(200));return Eu(null,t,e,!1,n)};Et.unmountComponentAtNode=function(t){if(!Su(t))throw Error(O(40));return t._reactRootContainer?(ei(function(){Eu(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Et.unstable_batchedUpdates=Ih;Et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Su(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Eu(t,e,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function J0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J0)}catch(t){console.error(t)}}J0(),Jv.exports=Et;var WE=Jv.exports,Jm=WE;dd.createRoot=Jm.createRoot,dd.hydrateRoot=Jm.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xa(){return xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xa.apply(this,arguments)}var er;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(er||(er={}));const Xm="popstate";function GE(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return sf("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Pl(i)}return qE(e,n,null,t)}function Te(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function X0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZE(){return Math.random().toString(36).substr(2,8)}function Qm(t,e){return{usr:t.state,key:t.key,idx:e}}function sf(t,e,n,r){return n===void 0&&(n=null),xa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ds(e):e,{state:n,key:e&&e.key||r||ZE()})}function Pl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ds(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qE(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=er.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(xa({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){o=er.Pop;let w=c(),m=w==null?null:w-u;u=w,l&&l({action:o,location:v.location,delta:m})}function f(w,m){o=er.Push;let g=sf(v.location,w,m);u=c()+1;let y=Qm(g,u),b=v.createHref(g);try{a.pushState(y,"",b)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(b)}s&&l&&l({action:o,location:v.location,delta:1})}function h(w,m){o=er.Replace;let g=sf(v.location,w,m);u=c();let y=Qm(g,u),b=v.createHref(g);a.replaceState(y,"",b),s&&l&&l({action:o,location:v.location,delta:0})}function p(w){let m=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof w=="string"?w:Pl(w);return g=g.replace(/ $/,"%20"),Te(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let v={get action(){return o},get location(){return t(i,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Xm,d),l=w,()=>{i.removeEventListener(Xm,d),l=null}},createHref(w){return e(i,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:h,go(w){return a.go(w)}};return v}var Ym;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ym||(Ym={}));function KE(t,e,n){return n===void 0&&(n="/"),JE(t,e,n,!1)}function JE(t,e,n,r){let i=typeof e=="string"?ds(e):e,s=Uh(i.pathname||"/",n);if(s==null)return null;let a=Q0(t);XE(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=lT(s);o=aT(a[l],u,r)}return o}function Q0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Te(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=cr([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Te(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Q0(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:iT(u,s.index),routesMeta:c})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of Y0(s.path))i(s,a,l)}),e}function Y0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Y0(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function XE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QE=/^:[\w-]+$/,YE=3,eT=2,tT=1,nT=10,rT=-2,eg=t=>t==="*";function iT(t,e){let n=t.split("/"),r=n.length;return n.some(eg)&&(r+=rT),e&&(r+=eT),n.filter(i=>!eg(i)).reduce((i,s)=>i+(QE.test(s)?YE:s===""?tT:nT),r)}function sT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function aT(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=tg({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=tg({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:cr([s,d.pathname]),pathnameBase:fT(cr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=cr([s,d.pathnameBase]))}return a}function tg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oT(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let v=o[d]||"";a=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const p=o[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function oT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),X0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return X0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Uh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ds(t):t;return{pathname:n?n.startsWith("/")?n:cT(n,e):e,search:hT(r),hash:pT(i)}}function cT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function e_(t,e){let n=dT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function t_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ds(t):(i=xa({},t),Te(!i.pathname||!i.pathname.includes("?"),Sc("?","pathname","search",i)),Te(!i.pathname||!i.pathname.includes("#"),Sc("#","pathname","hash",i)),Te(!i.search||!i.search.includes("#"),Sc("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=uT(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const cr=t=>t.join("/").replace(/\/\/+/g,"/"),fT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const n_=["post","put","patch","delete"];new Set(n_);const gT=["get",...n_];new Set(gT);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sa(){return Sa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sa.apply(this,arguments)}const Vh=S.createContext(null),yT=S.createContext(null),ui=S.createContext(null),Tu=S.createContext(null),ci=S.createContext({outlet:null,matches:[],isDataRoute:!1}),r_=S.createContext(null);function vT(t,e){let{relative:n}=e===void 0?{}:e;Qa()||Te(!1);let{basename:r,navigator:i}=S.useContext(ui),{hash:s,pathname:a,search:o}=s_(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:cr([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Qa(){return S.useContext(Tu)!=null}function fs(){return Qa()||Te(!1),S.useContext(Tu).location}function i_(t){S.useContext(ui).static||S.useLayoutEffect(t)}function wT(){let{isDataRoute:t}=S.useContext(ci);return t?IT():_T()}function _T(){Qa()||Te(!1);let t=S.useContext(Vh),{basename:e,future:n,navigator:r}=S.useContext(ui),{matches:i}=S.useContext(ci),{pathname:s}=fs(),a=JSON.stringify(e_(i,n.v7_relativeSplatPath)),o=S.useRef(!1);return i_(()=>{o.current=!0}),S.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=t_(u,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:cr([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,a,s,t])}function s_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(ui),{matches:i}=S.useContext(ci),{pathname:s}=fs(),a=JSON.stringify(e_(i,r.v7_relativeSplatPath));return S.useMemo(()=>t_(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function bT(t,e){return xT(t,e)}function xT(t,e,n,r){Qa()||Te(!1);let{navigator:i}=S.useContext(ui),{matches:s}=S.useContext(ci),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=fs(),c;if(e){var d;let w=typeof e=="string"?ds(e):e;l==="/"||(d=w.pathname)!=null&&d.startsWith(l)||Te(!1),c=w}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let w=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=KE(t,{pathname:h}),v=kT(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:cr([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:cr([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return e&&v?S.createElement(Tu.Provider,{value:{location:Sa({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:er.Pop}},v):v}function ST(){let t=AT(),e=mT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:i},n):null,null)}const ET=S.createElement(ST,null);class TT extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(ci.Provider,{value:this.props.routeContext},S.createElement(r_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PT(t){let{routeContext:e,match:n,children:r}=t,i=S.useContext(Vh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(ci.Provider,{value:e},r)}function kT(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);c>=0||Te(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,f)=>{let h,p=!1,v=null,w=null;n&&(h=o&&d.route.id?o[d.route.id]:void 0,v=d.route.errorElement||ET,l&&(u<0&&f===0?(p=!0,w=null):u===f&&(p=!0,w=d.route.hydrateFallbackElement||null)));let m=e.concat(a.slice(0,f+1)),g=()=>{let y;return h?y=v:p?y=w:d.route.Component?y=S.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,S.createElement(PT,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?S.createElement(TT,{location:n.location,revalidation:n.revalidation,component:v,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var a_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(a_||{}),kl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(kl||{});function CT(t){let e=S.useContext(Vh);return e||Te(!1),e}function RT(t){let e=S.useContext(yT);return e||Te(!1),e}function OT(t){let e=S.useContext(ci);return e||Te(!1),e}function o_(t){let e=OT(),n=e.matches[e.matches.length-1];return n.route.id||Te(!1),n.route.id}function AT(){var t;let e=S.useContext(r_),n=RT(kl.UseRouteError),r=o_(kl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function IT(){let{router:t}=CT(a_.UseNavigateStable),e=o_(kl.UseNavigateStable),n=S.useRef(!1);return i_(()=>{n.current=!0}),S.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Sa({fromRouteId:e},s)))},[t,e])}function $s(t){Te(!1)}function NT(t){let{basename:e="/",children:n=null,location:r,navigationType:i=er.Pop,navigator:s,static:a=!1,future:o}=t;Qa()&&Te(!1);let l=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:l,navigator:s,static:a,future:Sa({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=ds(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,v=S.useMemo(()=>{let w=Uh(c,l);return w==null?null:{location:{pathname:w,search:d,hash:f,state:h,key:p},navigationType:i}},[l,c,d,f,h,p,i]);return v==null?null:S.createElement(ui.Provider,{value:u},S.createElement(Tu.Provider,{children:n,value:v}))}function jT(t){let{children:e,location:n}=t;return bT(af(e),n)}new Promise(()=>{});function af(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,i)=>{if(!S.isValidElement(r))return;let s=[...e,i];if(r.type===S.Fragment){n.push.apply(n,af(r.props.children,s));return}r.type!==$s&&Te(!1),!r.props.index||!r.props.children||Te(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=af(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},of.apply(this,arguments)}function $T(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function LT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function DT(t,e){return t.button===0&&(!e||e==="_self")&&!LT(t)}const MT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],FT="6";try{window.__reactRouterVersion=FT}catch{}const UT="startTransition",ng=j1[UT];function VT(t){let{basename:e,children:n,future:r,window:i}=t,s=S.useRef();s.current==null&&(s.current=GE({window:i,v5Compat:!0}));let a=s.current,[o,l]=S.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=S.useCallback(d=>{u&&ng?ng(()=>l(d)):l(d)},[l,u]);return S.useLayoutEffect(()=>a.listen(c),[a,c]),S.createElement(NT,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const BT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ea=S.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=e,f=$T(e,MT),{basename:h}=S.useContext(ui),p,v=!1;if(typeof u=="string"&&zT.test(u)&&(p=u,BT))try{let y=new URL(window.location.href),b=u.startsWith("//")?new URL(y.protocol+u):new URL(u),x=Uh(b.pathname,h);b.origin===y.origin&&x!=null?u=x+b.search+b.hash:v=!0}catch{}let w=vT(u,{relative:i}),m=HT(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function g(y){r&&r(y),y.defaultPrevented||m(y)}return S.createElement("a",of({},f,{href:p||w,onClick:v||s?r:g,ref:n,target:l}))});var rg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rg||(rg={}));var ig;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ig||(ig={}));function HT(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:o}=e===void 0?{}:e,l=wT(),u=fs(),c=s_(t,{relative:a});return S.useCallback(d=>{if(DT(d,n)){d.preventDefault();let f=r!==void 0?r:Pl(u)===Pl(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:o})}},[u,l,c,r,i,n,t,s,a,o])}const tr=[["home.jsx","reactlogo.svg","/portfolio/","M"],["about.md","markdownlogo.svg","/portfolio/about","T"],["projects.py","pythonlogo.svg","/portfolio/projects","E"],["contact.cpp","cpplogo.svg","/portfolio/contact","U"]],WT=()=>{const[t,e]=S.useState(-1),n={0:"./files.svg",1:"./tags.svg"},r=["./user.svg","./settings.svg"];return _.jsx(_.Fragment,{children:_.jsxs("div",{className:"hidden sm:flex flex-row",children:[_.jsxs("div",{className:"w-12 bg-default-background border-r border-border-color flex flex-col justify-between",children:[_.jsx(GT,{selectedIcon:t,setSelectedIcon:e,icons:n}),_.jsx("div",{className:"flex flex-col",children:r.map((i,s)=>_.jsx(_.Fragment,{children:_.jsx("button",{className:"hover:bg-hover-color flex justify-center py-3",children:_.jsx("img",{className:"w-6 h-6",src:i})},s)}))})]}),_.jsx("div",{className:`bg-secondary-background ${t!==-1?"":"hidden"}`,children:_.jsx(qT,{})})]})})},GT=({setSelectedIcon:t,selectedIcon:e,icons:n})=>_.jsx(_.Fragment,{children:_.jsx("div",{className:"flex flex-col gap-y-1",children:Object.keys(n).map(r=>_.jsx(ZT,{icon_path:n[r],setSelectedIcon:t,iconIndex:r,selected:e===r},r))})}),ZT=({icon_path:t,iconIndex:e,setSelectedIcon:n,selected:r})=>_.jsx(_.Fragment,{children:_.jsx("button",{className:`px-2 py-3 border-l-2 hover:bg-hover-color ${r?"border-orange-color":"border-default-background"}`,onClick:()=>{n(r?-1:e)},children:_.jsx("img",{src:t,className:"w-6 h-6"})})}),qT=()=>{const[t,e]=S.useState(!0),[n,r]=S.useState(0),i=S.useCallback(a=>{for(let o=0;o<tr.length;o++)if(a===tr[o][2])return o},[tr]),s=fs();return S.useEffect(()=>{const a=s.pathname;r(i(a))},[s.pathname,i]),_.jsx(_.Fragment,{children:_.jsxs("div",{className:"w-[200px] ml:w-[250px] text-xs ml:text-sm xl:text-base font-extrathin text-text-white h-full  border-r border-border-color hidden md:flex flex-col gap-y-3 py-2",children:[_.jsx("div",{className:"ml-6 uppercase",children:"EXPLORER"}),_.jsxs("div",{children:[_.jsxs("button",{className:"flex flex-row items-center gap-x-2",onClick:()=>{e(!t)},children:[_.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"duration-300",style:{transform:`${t?"rotate(90deg)":"rotate(0deg)"}`},children:_.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.072 8.024L5.715 3.667l.618-.62L11 7.716v.618L6.333 13l-.618-.619 4.357-4.357z"})}),_.jsx("div",{className:"uppercase ",children:"Portfolio"})]}),_.jsx("div",{className:"overflow-hidden",children:_.jsx("div",{className:`mt-1 text-[0.7em] ml:text-xs xl:text-sm flex flex-col items-start ${t?"translate-y-0":"-translate-y-40"} duration-300`,children:tr.map((a,o)=>{const[l,u,c,d]=a,f=d==="E"?"text-text-red":d==="U"?"text-text-green":d==="M"?"text-text-yellow":"";return _.jsx(_.Fragment,{children:_.jsxs(Ea,{to:c,onClick:()=>{r(o)},className:`${f} pl-6 py-1 border flex flex-row hover:bg-default-background items-center gap-2 w-full ${n===o?"bg-hover-color border-color-blue":"border-secondary-background"}`,children:[_.jsx("img",{className:"h-4 pointer-events-none",src:u}),_.jsxs("div",{className:"flex justify-between flex-grow pr-10 items-center",children:[_.jsx("div",{children:l}),(d==="M"||d==="U")&&_.jsx("div",{children:d==="M"?"M":"U"})]})]},o)})})})})]})]})})};var l_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sg=Zt.createContext&&Zt.createContext(l_),KT=["attr","size","title"];function JT(t,e){if(t==null)return{};var n=XT(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XT(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cl.apply(this,arguments)}function ag(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ag(Object(n),!0).forEach(function(r){QT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ag(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QT(t,e,n){return e=YT(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YT(t){var e=eP(t,"string");return typeof e=="symbol"?e:e+""}function eP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u_(t){return t&&t.map((e,n)=>Zt.createElement(e.tag,Rl({key:n},e.attr),u_(e.child)))}function Bh(t){return e=>Zt.createElement(tP,Cl({attr:Rl({},t.attr)},e),u_(t.child))}function tP(t){var e=n=>{var{attr:r,size:i,title:s}=t,a=JT(t,KT),o=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Zt.createElement("svg",Cl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:l,style:Rl(Rl({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&Zt.createElement("title",null,s),t.children)};return sg!==void 0?Zt.createElement(sg.Consumer,null,n=>e(n)):e(l_)}function nP(t){return Bh({tag:"svg",attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"},child:[]}]})(t)}function rP(t){return Bh({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3v10h10V3H3zm9 9H4V4h8v8z"},child:[]}]})(t)}function iP(t){return Bh({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 8v1H3V8h11z"},child:[]}]})(t)}const sP=()=>{const t=["File","Edit","Selection","View","Go","Run","Terminal","Help"];return _.jsx(_.Fragment,{children:_.jsxs("div",{className:"pl-1 text-xs md:text-[0.5em] ml:text-[0.6em] xl:text-xs text-text-gray grid grid-cols-7 md:grid-cols-5 items-center border-b border-border-color",children:[_.jsxs("div",{className:"col-span-1 md:col-span-2 flex flex-row xl:gap-x-1 py-1 items-center flex-wrap",children:[_.jsx("img",{src:"./vscode.svg",className:"h-3 w-3 md:h-2 md:w-2 ml:h-3 ml:w-3 mr-1 ml:mx-2"}),_.jsx("div",{className:"hidden md:flex flex-row lg:gap-x-1",children:t.map((e,n)=>_.jsx(aP,{text:e},n))})]}),_.jsx("div",{className:"text-center font-bold col-span-5 md:col-span-1",children:"Aayush Regmi - Visual Studio Code"}),_.jsxs("div",{className:"flex justify-end h-full col-span-1 md:col-span-2",children:[_.jsx(Ec,{button_icon:_.jsx(iP,{className:"h-3 w-3"})}),_.jsx(Ec,{button_icon:_.jsx(rP,{className:"h-3 w-3"})}),_.jsx(Ec,{button_icon:_.jsx(nP,{className:"h-3 w-3"})})]})]})})},aP=({text:t})=>_.jsx("div",{className:"cursor-pointer px-1 ml:px-2 hover:bg-hover-color rounded-md duration-300",children:t}),Ec=({button_icon:t})=>{const e=S.useRef(null);return S.useEffect(()=>{if(e.current){const n=e.current.clientHeight;e.current.style.width=`${n}px`}},[]),_.jsx("div",{ref:e,className:"cursor-pointer hover:bg-hover-color h-full flex items-center justify-center",children:t})};function oP(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Ta(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const lf=t=>Array.isArray(t);function c_(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Pa(t){return typeof t=="string"||Array.isArray(t)}function og(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function zh(t,e,n,r){if(typeof e=="function"){const[i,s]=og(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=og(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Pu(t,e,n){const r=t.getProps();return zh(r,e,n!==void 0?n:r.custom,t)}const Hh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wh=["initial",...Hh],Ya=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Pr=new Set(Ya),Rn=t=>t*1e3,On=t=>t/1e3,lP={type:"spring",stiffness:500,damping:25,restSpeed:10},uP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cP={type:"keyframes",duration:.8},dP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fP=(t,{keyframes:e})=>e.length>2?cP:Pr.has(t)?t.startsWith("scale")?uP(e[1]):lP:dP;function Gh(t,e){return t[e]||t.default||t}const hP={skipAnimations:!1,useManualTiming:!1},pP=t=>t!==null;function ku(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(pP),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Ze=t=>t;function mP(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),t()),u(a)}const l={schedule:(u,c=!1,d=!1)=>{const h=d&&r?e:n;return c&&s.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(o),r=!1,i&&(i=!1,l.process(u))}};return l}const Oo=["read","resolveKeyframes","update","preRender","render","postRender"],gP=40;function d_(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Oo.reduce((m,g)=>(m[g]=mP(s),m),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:f}=a,h=()=>{const m=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(m-i.timestamp,gP),1),i.timestamp=m,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),d.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},p=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:Oo.reduce((m,g)=>{const y=a[g];return m[g]=(b,x=!1,T=!1)=>(n||p(),y.schedule(b,x,T)),m},{}),cancel:m=>{for(let g=0;g<Oo.length;g++)a[Oo[g]].cancel(m)},state:i,steps:a}}const{schedule:ue,cancel:pr,state:Me,steps:Tc}=d_(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0),f_=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yP=1e-7,vP=12;function wP(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=f_(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>yP&&++o<vP);return a}function eo(t,e,n,r){if(t===e&&n===r)return Ze;const i=s=>wP(s,0,1,t,n);return s=>s===0||s===1?s:f_(i(s),e,r)}const h_=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,p_=t=>e=>1-t(1-e),m_=eo(.33,1.53,.69,.99),Zh=p_(m_),g_=h_(Zh),y_=t=>(t*=2)<1?.5*Zh(t):.5*(2-Math.pow(2,-10*(t-1))),qh=t=>1-Math.sin(Math.acos(t)),v_=p_(qh),w_=h_(qh),__=t=>/^0[^.\s]+$/u.test(t);function _P(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||__(t):!0}let uf=Ze;const b_=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),x_=t=>e=>typeof e=="string"&&e.startsWith(t),S_=x_("--"),bP=x_("var(--"),Kh=t=>bP(t)?xP.test(t.split("/*")[0].trim()):!1,xP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,SP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EP(t){const e=SP.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function E_(t,e,n=1){const[r,i]=EP(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return b_(a)?parseFloat(a):a}return Kh(i)?E_(i,e,n+1):i}const mr=(t,e,n)=>n>e?e:n<t?t:n,hs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ka={...hs,transform:t=>mr(0,1,t)},Ao={...hs,default:1},to=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Hn=to("deg"),mn=to("%"),W=to("px"),TP=to("vh"),PP=to("vw"),lg={...mn,parse:t=>mn.parse(t)/100,transform:t=>mn.transform(t*100)},kP=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ug=t=>t===hs||t===W,cg=(t,e)=>parseFloat(t.split(", ")[e]),dg=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return cg(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?cg(s[1],t):0}},CP=new Set(["x","y","z"]),RP=Ya.filter(t=>!CP.has(t));function OP(t){const e=[];return RP.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const es={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:dg(4,13),y:dg(5,14)};es.translateX=es.x;es.translateY=es.y;const T_=t=>e=>e.test(t),AP={test:t=>t==="auto",parse:t=>t},P_=[hs,W,mn,Hn,PP,TP,AP],fg=t=>P_.find(T_(t)),Wr=new Set;let cf=!1,df=!1;function k_(){if(df){const t=Array.from(Wr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=OP(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}df=!1,cf=!1,Wr.forEach(t=>t.complete()),Wr.clear()}function C_(){Wr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(df=!0)})}function IP(){C_(),k_()}class Jh{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wr.add(this),cf||(cf=!0,ue.read(C_),ue.resolveKeyframes(k_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Xs=t=>Math.round(t*1e5)/1e5,Xh=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NP(t){return t==null}const jP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qh=(t,e)=>n=>!!(typeof n=="string"&&jP.test(n)&&n.startsWith(t)||e&&!NP(n)&&Object.prototype.hasOwnProperty.call(n,e)),R_=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(Xh);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},$P=t=>mr(0,255,t),Pc={...hs,transform:t=>Math.round($P(t))},Fr={test:Qh("rgb","red"),parse:R_("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Pc.transform(t)+", "+Pc.transform(e)+", "+Pc.transform(n)+", "+Xs(ka.transform(r))+")"};function LP(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ff={test:Qh("#"),parse:LP,transform:Fr.transform},Ri={test:Qh("hsl","hue"),parse:R_("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+mn.transform(Xs(e))+", "+mn.transform(Xs(n))+", "+Xs(ka.transform(r))+")"},ze={test:t=>Fr.test(t)||ff.test(t)||Ri.test(t),parse:t=>Fr.test(t)?Fr.parse(t):Ri.test(t)?Ri.parse(t):ff.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fr.transform(t):Ri.transform(t)},DP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MP(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Xh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(DP))===null||n===void 0?void 0:n.length)||0)>0}const O_="number",A_="color",FP="var",UP="var(",hg="${}",VP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ca(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(VP,l=>(ze.test(l)?(r.color.push(s),i.push(A_),n.push(ze.parse(l))):l.startsWith(UP)?(r.var.push(s),i.push(FP),n.push(l)):(r.number.push(s),i.push(O_),n.push(parseFloat(l))),++s,hg)).split(hg);return{values:n,split:o,indexes:r,types:i}}function I_(t){return Ca(t).values}function N_(t){const{split:e,types:n}=Ca(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===O_?s+=Xs(i[a]):o===A_?s+=ze.transform(i[a]):s+=i[a]}return s}}const BP=t=>typeof t=="number"?0:t;function zP(t){const e=I_(t);return N_(t)(e.map(BP))}const gr={test:MP,parse:I_,createTransformer:N_,getAnimatableNone:zP},HP=new Set(["brightness","contrast","saturate","opacity"]);function WP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Xh)||[];if(!r)return t;const i=n.replace(r,"");let s=HP.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const GP=/\b([a-z-]*)\(.*?\)/gu,hf={...gr,getAnimatableNone:t=>{const e=t.match(GP);return e?e.map(WP).join(" "):t}},ZP={borderWidth:W,borderTopWidth:W,borderRightWidth:W,borderBottomWidth:W,borderLeftWidth:W,borderRadius:W,radius:W,borderTopLeftRadius:W,borderTopRightRadius:W,borderBottomRightRadius:W,borderBottomLeftRadius:W,width:W,maxWidth:W,height:W,maxHeight:W,top:W,right:W,bottom:W,left:W,padding:W,paddingTop:W,paddingRight:W,paddingBottom:W,paddingLeft:W,margin:W,marginTop:W,marginRight:W,marginBottom:W,marginLeft:W,backgroundPositionX:W,backgroundPositionY:W},qP={rotate:Hn,rotateX:Hn,rotateY:Hn,rotateZ:Hn,scale:Ao,scaleX:Ao,scaleY:Ao,scaleZ:Ao,skew:Hn,skewX:Hn,skewY:Hn,distance:W,translateX:W,translateY:W,translateZ:W,x:W,y:W,z:W,perspective:W,transformPerspective:W,opacity:ka,originX:lg,originY:lg,originZ:W},pg={...hs,transform:Math.round},Yh={...ZP,...qP,zIndex:pg,size:W,fillOpacity:ka,strokeOpacity:ka,numOctaves:pg},KP={...Yh,color:ze,backgroundColor:ze,outlineColor:ze,fill:ze,stroke:ze,borderColor:ze,borderTopColor:ze,borderRightColor:ze,borderBottomColor:ze,borderLeftColor:ze,filter:hf,WebkitFilter:hf},ep=t=>KP[t];function j_(t,e){let n=ep(t);return n!==hf&&(n=gr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const JP=new Set(["auto","none","0"]);function XP(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!JP.has(s)&&Ca(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=j_(n,i)}class $_ extends Jh{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Kh(u))){const c=E_(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!kP.has(r)||e.length!==2)return;const[i,s]=e,a=fg(i),o=fg(s);if(a!==o)if(ug(a)&&ug(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)_P(e[i])&&r.push(i);r.length&&XP(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=es[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=es[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function tp(t){return typeof t=="function"}let Yo;function QP(){Yo=void 0}const gn={now:()=>(Yo===void 0&&gn.set(Me.isProcessing||hP.useManualTiming?Me.timestamp:performance.now()),Yo),set:t=>{Yo=t,queueMicrotask(QP)}},mg=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gr.test(t)||t==="0")&&!t.startsWith("url("));function YP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ek(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=mg(i,e),o=mg(s,e);return!a||!o?!1:YP(t)||(n==="spring"||tp(n))&&r}const tk=40;class L_{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=gn.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>tk?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&IP(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=gn.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!ek(e,r,i,s))if(a)this.options.duration=0;else{l==null||l(ku(e,this.options,n)),o==null||o(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function D_(t,e){return e?t*(1e3/e):0}const nk=5;function M_(t,e,n){const r=Math.max(e-nk,0);return D_(n-t(r),e-r)}const kc=.001,rk=.01,ik=10,sk=.05,ak=1;function ok({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,a=1-e;a=mr(sk,ak,a),t=mr(rk,ik,On(t)),a<1?(i=u=>{const c=u*a,d=c*t,f=c-n,h=pf(u,a),p=Math.exp(-d);return kc-f/h*p},s=u=>{const d=u*a*t,f=d*n+n,h=Math.pow(a,2)*Math.pow(u,2)*t,p=Math.exp(-d),v=pf(Math.pow(u,2),a);return(-i(u)+kc>0?-1:1)*((f-h)*p)/v}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-kc+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const o=5/t,l=uk(i,s,o);if(t=Rn(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const lk=12;function uk(t,e,n){let r=n;for(let i=1;i<lk;i++)r=r-t(r)/e(r);return r}function pf(t,e){return t*Math.sqrt(1-e*e)}const ck=["duration","bounce"],dk=["stiffness","damping","mass"];function gg(t,e){return e.some(n=>t[n]!==void 0)}function fk(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!gg(t,dk)&&gg(t,ck)){const n=ok(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function F_({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],a={done:!1,value:i},{stiffness:o,damping:l,mass:u,duration:c,velocity:d,isResolvedFromDuration:f}=fk({...r,velocity:-On(r.velocity||0)}),h=d||0,p=l/(2*Math.sqrt(o*u)),v=s-i,w=On(Math.sqrt(o/u)),m=Math.abs(v)<5;n||(n=m?.01:2),e||(e=m?.005:.5);let g;if(p<1){const y=pf(w,p);g=b=>{const x=Math.exp(-p*w*b);return s-x*((h+p*w*v)/y*Math.sin(y*b)+v*Math.cos(y*b))}}else if(p===1)g=y=>s-Math.exp(-w*y)*(v+(h+w*v)*y);else{const y=w*Math.sqrt(p*p-1);g=b=>{const x=Math.exp(-p*w*b),T=Math.min(y*b,300);return s-x*((h+p*w*v)*Math.sinh(T)+y*v*Math.cosh(T))/y}}return{calculatedDuration:f&&c||null,next:y=>{const b=g(y);if(f)a.done=y>=c;else{let x=0;p<1&&(x=y===0?Rn(h):M_(g,y,b));const T=Math.abs(x)<=n,R=Math.abs(s-b)<=e;a.done=T&&R}return a.value=a.done?s:b,a}}}function yg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],f={done:!1,value:d},h=k=>o!==void 0&&k<o||l!==void 0&&k>l,p=k=>o===void 0?l:l===void 0||Math.abs(o-k)<Math.abs(l-k)?o:l;let v=n*e;const w=d+v,m=a===void 0?w:a(w);m!==w&&(v=m-d);const g=k=>-v*Math.exp(-k/r),y=k=>m+g(k),b=k=>{const G=g(k),V=y(k);f.done=Math.abs(G)<=u,f.value=f.done?m:V};let x,T;const R=k=>{h(f.value)&&(x=k,T=F_({keyframes:[f.value,p(f.value)],velocity:M_(y,k,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return R(0),{calculatedDuration:null,next:k=>{let G=!1;return!T&&x===void 0&&(G=!0,b(k),R(k)),x!==void 0&&k>=x?T.next(k-x):(!G&&b(k),f)}}}const hk=eo(.42,0,1,1),pk=eo(0,0,.58,1),U_=eo(.42,0,.58,1),mk=t=>Array.isArray(t)&&typeof t[0]!="number",vg={linear:Ze,easeIn:hk,easeInOut:U_,easeOut:pk,circIn:qh,circInOut:w_,circOut:v_,backIn:Zh,backInOut:g_,backOut:m_,anticipate:y_},wg=t=>{if(Array.isArray(t)){uf(t.length===4);const[e,n,r,i]=t;return eo(e,n,r,i)}else if(typeof t=="string")return uf(vg[t]!==void 0),vg[t];return t},gk=(t,e)=>n=>e(t(n)),An=(...t)=>t.reduce(gk),ts=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ye=(t,e,n)=>t+(e-t)*n;function Cc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yk({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=Cc(l,o,t+1/3),s=Cc(l,o,t),a=Cc(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Ol(t,e){return n=>n>0?e:t}const Rc=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},vk=[ff,Fr,Ri],wk=t=>vk.find(e=>e.test(t));function _g(t){const e=wk(t);if(!e)return!1;let n=e.parse(t);return e===Ri&&(n=yk(n)),n}const bg=(t,e)=>{const n=_g(t),r=_g(e);if(!n||!r)return Ol(t,e);const i={...n};return s=>(i.red=Rc(n.red,r.red,s),i.green=Rc(n.green,r.green,s),i.blue=Rc(n.blue,r.blue,s),i.alpha=ye(n.alpha,r.alpha,s),Fr.transform(i))},mf=new Set(["none","hidden"]);function _k(t,e){return mf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function bk(t,e){return n=>ye(t,e,n)}function np(t){return typeof t=="number"?bk:typeof t=="string"?Kh(t)?Ol:ze.test(t)?bg:Ek:Array.isArray(t)?V_:typeof t=="object"?ze.test(t)?bg:xk:Ol}function V_(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>np(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function xk(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=np(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Sk(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][i[a]],l=(n=t.values[o])!==null&&n!==void 0?n:0;r[s]=l,i[a]++}return r}const Ek=(t,e)=>{const n=gr.createTransformer(e),r=Ca(t),i=Ca(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?mf.has(t)&&!i.values.length||mf.has(e)&&!r.values.length?_k(t,e):An(V_(Sk(r,i),i.values),n):Ol(t,e)};function B_(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ye(t,e,n):np(t)(t,e)}function Tk(t,e,n){const r=[],i=n||B_,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Ze:e;o=An(l,o)}r.push(o)}return r}function Pk(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(uf(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Tk(e,r,i),o=a.length,l=u=>{let c=0;if(o>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const d=ts(t[c],t[c+1],u);return a[c](d)};return n?u=>l(mr(t[0],t[s-1],u)):l}function kk(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ts(0,e,r);t.push(ye(n,1,i))}}function Ck(t){const e=[0];return kk(e,t.length-1),e}function Rk(t,e){return t.map(n=>n*e)}function Ok(t,e){return t.map(()=>e||U_).splice(0,t.length-1)}function Al({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=mk(r)?r.map(wg):wg(r),s={done:!1,value:e[0]},a=Rk(n&&n.length===e.length?n:Ck(e),t),o=Pk(a,e,{ease:Array.isArray(i)?i:Ok(e,i)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const xg=2e4;function Ak(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<xg;)e+=n,r=t.next(e);return e>=xg?1/0:e}const Ik=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ue.update(e,!0),stop:()=>pr(e),now:()=>Me.isProcessing?Me.timestamp:gn.now()}},Nk={decay:yg,inertia:yg,tween:Al,keyframes:Al,spring:F_},jk=t=>t/100;class rp extends L_{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||Jh,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=tp(n)?n:Nk[n]||Al;let l,u;o!==Al&&typeof e[0]!="number"&&(l=An(jk,B_(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=Ak(c));const{calculatedDuration:d}=c,f=d+i,h=f*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:h,repeatType:p,repeatDelay:v,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),g=this.speed>=0?m<0:m>c;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let y=this.currentTime,b=s;if(h){const k=Math.min(this.currentTime,c)/d;let G=Math.floor(k),V=k%1;!V&&k>=1&&(V=1),V===1&&G--,G=Math.min(G,h+1),!!(G%2)&&(p==="reverse"?(V=1-V,v&&(V-=v/d)):p==="mirror"&&(b=a)),y=mr(0,1,V)*d}const x=g?{done:!1,value:l[0]}:b.next(y);o&&(x.value=o(x.value));let{done:T}=x;!g&&u!==null&&(T=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return R&&i!==void 0&&(x.value=ku(l,this.options,i)),w&&w(x.value),R&&this.finish(),x}get duration(){const{resolved:e}=this;return e?On(e.calculatedDuration):0}get time(){return On(this.currentTime)}set time(e){e=Rn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=On(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Ik,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const z_=new Set(["opacity","clipPath","filter","transform"]),H_=t=>Array.isArray(t)&&typeof t[0]=="number",$k=10,Lk=(t,e)=>{let n="";const r=Math.max(Math.round(e/$k),2);for(let i=0;i<r;i++)n+=t(ts(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function ip(t){let e;return()=>(e===void 0&&(e=t()),e)}const Dk={linearEasing:void 0};function Mk(t,e){const n=ip(t);return()=>{var r;return(r=Dk[e])!==null&&r!==void 0?r:n()}}const Il=Mk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function W_(t){return!!(typeof t=="function"&&Il()||!t||typeof t=="string"&&(t in gf||Il())||H_(t)||Array.isArray(t)&&t.every(W_))}const Ls=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,gf={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ls([0,.65,.55,1]),circOut:Ls([.55,0,1,.45]),backIn:Ls([.31,.01,.66,-.59]),backOut:Ls([.33,1.53,.69,.99])};function G_(t,e){if(t)return typeof t=="function"&&Il()?Lk(t,e):H_(t)?Ls(t):Array.isArray(t)?t.map(n=>G_(n,e)||gf.easeOut):gf[t]}function Fk(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o,times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=G_(o,i);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function Sg(t,e){t.timeline=e,t.onfinish=null}const Uk=ip(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Nl=10,Vk=2e4;function Bk(t){return tp(t.type)||t.type==="spring"||!W_(t.ease)}function zk(t,e){const n=new rp({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Vk;)r=n.sample(s),i.push(r.value),s+=Nl;return{times:void 0,keyframes:i,duration:s-Nl,ease:"linear"}}const Z_={anticipate:y_,backInOut:g_,circInOut:w_};function Hk(t){return t in Z_}class Eg extends L_{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new $_(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:a,type:o,motionValue:l,name:u,startTime:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Il()&&Hk(a)&&(a=Z_[a]),Bk(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:v,...w}=this.options,m=zk(e,w);e=m.keyframes,e.length===1&&(e[1]=e[0]),i=m.duration,s=m.times,a=m.ease,o="keyframes"}const d=Fk(l.owner.current,u,e,{...this.options,duration:i,times:s,ease:a});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(Sg(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(ku(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:s,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return On(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return On(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Rn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ze;const{animation:r}=n;Sg(r,e)}return Ze}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:f,...h}=this.options,p=new rp({...h,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),v=Rn(this.time);u.setWithVelocity(p.sample(v-Nl).value,p.sample(v).value,Nl)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;return Uk()&&r&&z_.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const Wk=ip(()=>window.ScrollTimeline!==void 0);class Gk{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>Wk()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Zk({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const sp=(t,e,n,r={},i,s)=>a=>{const o=Gh(r,t)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Rn(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};Zk(o)||(c={...c,...fP(t,c)}),c.duration&&(c.duration=Rn(c.duration)),c.repeatDelay&&(c.repeatDelay=Rn(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const f=ku(c.keyframes,o);if(f!==void 0)return ue.update(()=>{c.onUpdate(f),c.onComplete()}),new Gk([])}return!s&&Eg.supports(c)?new Eg(c):new rp(c)},qk=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Kk=t=>lf(t)?t[t.length-1]||0:t;function ap(t,e){t.indexOf(e)===-1&&t.push(e)}function op(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class lp{constructor(){this.subscriptions=[]}add(e){return ap(this.subscriptions,e),()=>op(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Tg=30,Jk=t=>!isNaN(parseFloat(t));class Xk{constructor(e,n={}){this.version="11.11.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=gn.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=gn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Jk(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lp);const r=this.events[e].add(n);return e==="change"?()=>{r(),ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=gn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Tg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Tg);return D_(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ra(t,e){return new Xk(t,e)}function Qk(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ra(n))}function Yk(t,e){const n=Pu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=Kk(s[a]);Qk(t,a,o)}}const Cu=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eC="framerAppearId",q_="data-"+Cu(eC);function K_(t){return t.props[q_]}const Ge=t=>!!(t&&t.getVelocity);function tC(t){return!!(Ge(t)&&t.add)}function J_(t){if(Pr.has(t))return"transform";if(z_.has(t))return Cu(t)}function yf(t,e){var n;if(!t.applyWillChange)return;const r=t.getValue("willChange");if(tC(r))return r.add(e);!(!((n=t.props.style)===null||n===void 0)&&n.willChange)&&J_(e)&&t.setStaticValue("willChange","transform")}function nC({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function X_(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const f=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),h=l[d];if(h===void 0||c&&nC(c,d))continue;const p={delay:n,...Gh(a||{},d)};let v=!1;if(window.MotionHandoffAnimation){const m=K_(t);if(m){const g=window.MotionHandoffAnimation(m,d,ue);g!==null&&(p.startTime=g,v=!0)}}yf(t,d),f.start(sp(d,f,h,t.shouldReduceMotion&&Pr.has(d)?{type:!1}:p,t,v));const w=f.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{ue.update(()=>{o&&Yk(t,o)})}),u}function vf(t,e,n={}){var r;const i=Pu(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(X_(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=s;return rC(t,e,c+u,d,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(n.delay)])}function rC(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(iC).forEach((u,c)=>{u.notify("AnimationStart",e),a.push(vf(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function iC(t,e){return t.sortNodePosition(e)}function sC(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>vf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=vf(t,e,n);else{const i=typeof e=="function"?Pu(t,e,n.custom):e;r=Promise.all(X_(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const aC=Wh.length;function Q_(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Q_(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<aC;n++){const r=Wh[n],i=t.props[r];(Pa(i)||i===!1)&&(e[r]=i)}return e}const oC=[...Hh].reverse(),lC=Hh.length;function uC(t){return e=>Promise.all(e.map(({animation:n,options:r})=>sC(t,n,r)))}function cC(t){let e=uC(t),n=Pg(),r=!0;const i=l=>(u,c)=>{var d;const f=Pu(t,c,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:h,transitionEnd:p,...v}=f;u={...u,...v,...p}}return u};function s(l){e=l(t)}function a(l){const{props:u}=t,c=Q_(t.parent)||{},d=[],f=new Set;let h={},p=1/0;for(let w=0;w<lC;w++){const m=oC[w],g=n[m],y=u[m]!==void 0?u[m]:c[m],b=Pa(y),x=m===l?g.isActive:null;x===!1&&(p=w);let T=y===c[m]&&y!==u[m]&&b;if(T&&r&&t.manuallyAnimateOnMount&&(T=!1),g.protectedKeys={...h},!g.isActive&&x===null||!y&&!g.prevProp||Ta(y)||typeof y=="boolean")continue;const R=dC(g.prevProp,y);let k=R||m===l&&g.isActive&&!T&&b||w>p&&b,G=!1;const V=Array.isArray(y)?y:[y];let ne=V.reduce(i(m),{});x===!1&&(ne={});const{prevResolvedValues:Ae={}}=g,Xe={...Ae,...ne},$=j=>{k=!0,f.has(j)&&(G=!0,f.delete(j)),g.needsAnimating[j]=!0;const E=t.getValue(j);E&&(E.liveStyle=!1)};for(const j in Xe){const E=ne[j],C=Ae[j];if(h.hasOwnProperty(j))continue;let P=!1;lf(E)&&lf(C)?P=!c_(E,C):P=E!==C,P?E!=null?$(j):f.add(j):E!==void 0&&f.has(j)?$(j):g.protectedKeys[j]=!0}g.prevProp=y,g.prevResolvedValues=ne,g.isActive&&(h={...h,...ne}),r&&t.blockInitialAnimation&&(k=!1),k&&(!(T&&R)||G)&&d.push(...V.map(j=>({animation:j,options:{type:m}})))}if(f.size){const w={};f.forEach(m=>{const g=t.getBaseTarget(m),y=t.getValue(m);y&&(y.liveStyle=!0),w[m]=g??null}),d.push({animation:w})}let v=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(d):Promise.resolve()}function o(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(f=>{var h;return(h=f.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Pg(),r=!0}}}function dC(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!c_(e,t):!1}function Rr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pg(){return{animate:Rr(!0),whileInView:Rr(),whileHover:Rr(),whileTap:Rr(),whileDrag:Rr(),whileFocus:Rr(),exit:Rr()}}class kr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fC extends kr{constructor(e){super(e),e.animationState||(e.animationState=cC(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ta(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let hC=0;class pC extends kr{constructor(){super(...arguments),this.id=hC++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const mC={animation:{Feature:fC},exit:{Feature:pC}},Y_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Ru(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const gC=t=>e=>Y_(e)&&t(e,Ru(e));function Pn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function In(t,e,n,r){return Pn(t,e,gC(n),r)}const kg=(t,e)=>Math.abs(t-e);function yC(t,e){const n=kg(t.x,e.x),r=kg(t.y,e.y);return Math.sqrt(n**2+r**2)}class eb{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Ac(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=yC(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:v}=Me;this.history.push({...p,timestamp:v});const{onStart:w,onMove:m}=this.handlers;f||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Oc(f,this.transformPagePoint),ue.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Ac(d.type==="pointercancel"?this.lastMoveEventInfo:Oc(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,w),p&&p(d,w)},!Y_(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Ru(e),o=Oc(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=Me;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,Ac(o,this.history)),this.removeListeners=An(In(this.contextWindow,"pointermove",this.handlePointerMove),In(this.contextWindow,"pointerup",this.handlePointerUp),In(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pr(this.updatePoint)}}function Oc(t,e){return e?{point:e(t.point)}:t}function Cg(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ac({point:t},e){return{point:t,delta:Cg(t,tb(e)),offset:Cg(t,vC(e)),velocity:wC(e,.1)}}function vC(t){return t[0]}function tb(t){return t[t.length-1]}function wC(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=tb(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Rn(e)));)n--;if(!r)return{x:0,y:0};const s=On(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function nb(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Rg=nb("dragHorizontal"),Og=nb("dragVertical");function rb(t){let e=!1;if(t==="y")e=Og();else if(t==="x")e=Rg();else{const n=Rg(),r=Og();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function ib(){const t=rb(!0);return t?(t(),!1):!0}function Oi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const sb=1e-4,_C=1-sb,bC=1+sb,ab=.01,xC=0-ab,SC=0+ab;function xt(t){return t.max-t.min}function EC(t,e,n){return Math.abs(t-e)<=n}function Ag(t,e,n,r=.5){t.origin=r,t.originPoint=ye(e.min,e.max,t.origin),t.scale=xt(n)/xt(e),t.translate=ye(n.min,n.max,t.origin)-t.originPoint,(t.scale>=_C&&t.scale<=bC||isNaN(t.scale))&&(t.scale=1),(t.translate>=xC&&t.translate<=SC||isNaN(t.translate))&&(t.translate=0)}function Qs(t,e,n,r){Ag(t.x,e.x,n.x,r?r.originX:void 0),Ag(t.y,e.y,n.y,r?r.originY:void 0)}function Ig(t,e,n){t.min=n.min+e.min,t.max=t.min+xt(e)}function TC(t,e,n){Ig(t.x,e.x,n.x),Ig(t.y,e.y,n.y)}function Ng(t,e,n){t.min=e.min-n.min,t.max=t.min+xt(e)}function Ys(t,e,n){Ng(t.x,e.x,n.x),Ng(t.y,e.y,n.y)}function PC(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ye(n,t,r.max):Math.min(t,n)),t}function jg(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kC(t,{top:e,left:n,bottom:r,right:i}){return{x:jg(t.x,n,i),y:jg(t.y,e,r)}}function $g(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function CC(t,e){return{x:$g(t.x,e.x),y:$g(t.y,e.y)}}function RC(t,e){let n=.5;const r=xt(t),i=xt(e);return i>r?n=ts(e.min,e.max-r,t.min):r>i&&(n=ts(t.min,t.max-i,e.min)),mr(0,1,n)}function OC(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const wf=.35;function AC(t=wf){return t===!1?t=0:t===!0&&(t=wf),{x:Lg(t,"left","right"),y:Lg(t,"top","bottom")}}function Lg(t,e,n){return{min:Dg(t,e),max:Dg(t,n)}}function Dg(t,e){return typeof t=="number"?t:t[e]||0}const Mg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ai=()=>({x:Mg(),y:Mg()}),Fg=()=>({min:0,max:0}),be=()=>({x:Fg(),y:Fg()});function Ct(t){return[t("x"),t("y")]}function ob({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function IC({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function NC(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ic(t){return t===void 0||t===1}function _f({scale:t,scaleX:e,scaleY:n}){return!Ic(t)||!Ic(e)||!Ic(n)}function Nr(t){return _f(t)||lb(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function lb(t){return Ug(t.x)||Ug(t.y)}function Ug(t){return t&&t!=="0%"}function jl(t,e,n){const r=t-n,i=e*r;return n+i}function Vg(t,e,n,r,i){return i!==void 0&&(t=jl(t,i,r)),jl(t,n,r)+e}function bf(t,e=0,n=1,r,i){t.min=Vg(t.min,e,n,r,i),t.max=Vg(t.max,e,n,r,i)}function ub(t,{x:e,y:n}){bf(t.x,e.translate,e.scale,e.originPoint),bf(t.y,n.translate,n.scale,n.originPoint)}const Bg=.999999999999,zg=1.0000000000001;function jC(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ni(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,ub(t,a)),r&&Nr(s.latestValues)&&Ni(t,s.latestValues))}e.x<zg&&e.x>Bg&&(e.x=1),e.y<zg&&e.y>Bg&&(e.y=1)}function Ii(t,e){t.min=t.min+e,t.max=t.max+e}function Hg(t,e,n,r,i=.5){const s=ye(t.min,t.max,i);bf(t,e,n,s,r)}function Ni(t,e){Hg(t.x,e.x,e.scaleX,e.scale,e.originX),Hg(t.y,e.y,e.scaleY,e.scale,e.originY)}function cb(t,e){return ob(NC(t.getBoundingClientRect(),e))}function $C(t,e,n){const r=cb(t,n),{scroll:i}=e;return i&&(Ii(r.x,i.offset.x),Ii(r.y,i.offset.y)),r}const db=({current:t})=>t?t.ownerDocument.defaultView:null,LC=new WeakMap;class DC{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=be(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ru(c,"page").point)},s=(c,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=rb(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ct(w=>{let m=this.getAxisMotionValue(w).get()||0;if(mn.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const y=g.layout.layoutBox[w];y&&(m=xt(y)*(parseFloat(m)/100))}}this.originPoint[w]=m}),p&&ue.postRender(()=>p(c,d)),yf(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=d;if(h&&this.currentDirection===null){this.currentDirection=MC(w),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),v&&v(c,d)},o=(c,d)=>this.stop(c,d),l=()=>Ct(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new eb(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:db(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ue.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Io(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=PC(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Oi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=kC(i.layoutBox,n):this.constraints=!1,this.elastic=AC(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ct(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=OC(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Oi(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$C(r,i.root,this.visualElement.getTransformPagePoint());let a=CC(i.layout.layoutBox,s);if(n){const o=n(IC(a));this.hasMutatedConstraints=!!o,o&&(a=ob(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ct(c=>{if(!Io(c,n,this.currentDirection))return;let d=l&&l[c]||{};a&&(d={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return yf(this.visualElement,e),r.start(sp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ct(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ct(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ct(n=>{const{drag:r}=this.getProps();if(!Io(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-ye(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Oi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ct(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=RC({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ct(a=>{if(!Io(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(ye(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;LC.set(this.visualElement,this);const e=this.visualElement.current,n=In(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Oi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ue.read(r);const a=Pn(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ct(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=wf,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Io(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function MC(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class FC extends kr{constructor(e){super(e),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new DC(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const Wg=t=>(e,n)=>{t&&ue.postRender(()=>t(e,n))};class UC extends kr{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(e){this.session=new eb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:db(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Wg(e),onStart:Wg(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&ue.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=In(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const up=S.createContext(null);function VC(){const t=S.useContext(up);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=S.useId();S.useEffect(()=>r(i),[]);const s=S.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const fb=S.createContext({}),hb=S.createContext({}),el={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ks={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(W.test(t))t=parseFloat(t);else return t;const n=Gg(t,e.target.x),r=Gg(t,e.target.y);return`${n}% ${r}%`}},BC={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=gr.parse(t);if(i.length>5)return r;const s=gr.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=ye(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}},$l={};function zC(t){Object.assign($l,t)}const{schedule:cp,cancel:RM}=d_(queueMicrotask,!1);class HC extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;zC(WC),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),el.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||ue.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pb(t){const[e,n]=VC(),r=S.useContext(fb);return _.jsx(HC,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(hb),isPresent:e,safeToRemove:n})}const WC={borderRadius:{...ks,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ks,borderTopRightRadius:ks,borderBottomLeftRadius:ks,borderBottomRightRadius:ks,boxShadow:BC},mb=["TopLeft","TopRight","BottomLeft","BottomRight"],GC=mb.length,Zg=t=>typeof t=="string"?parseFloat(t):t,qg=t=>typeof t=="number"||W.test(t);function ZC(t,e,n,r,i,s){i?(t.opacity=ye(0,n.opacity!==void 0?n.opacity:1,qC(r)),t.opacityExit=ye(e.opacity!==void 0?e.opacity:1,0,KC(r))):s&&(t.opacity=ye(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<GC;a++){const o=`border${mb[a]}Radius`;let l=Kg(e,o),u=Kg(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||qg(l)===qg(u)?(t[o]=Math.max(ye(Zg(l),Zg(u),r),0),(mn.test(u)||mn.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=ye(e.rotate||0,n.rotate||0,r))}function Kg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const qC=gb(0,.5,v_),KC=gb(.5,.95,Ze);function gb(t,e,n){return r=>r<t?0:r>e?1:n(ts(t,e,r))}function Jg(t,e){t.min=e.min,t.max=e.max}function Pt(t,e){Jg(t.x,e.x),Jg(t.y,e.y)}function Xg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Qg(t,e,n,r,i){return t-=e,t=jl(t,1/n,r),i!==void 0&&(t=jl(t,1/i,r)),t}function JC(t,e=0,n=1,r=.5,i,s=t,a=t){if(mn.test(e)&&(e=parseFloat(e),e=ye(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=ye(s.min,s.max,r);t===s&&(o-=e),t.min=Qg(t.min,e,n,o,i),t.max=Qg(t.max,e,n,o,i)}function Yg(t,e,[n,r,i],s,a){JC(t,e[n],e[r],e[i],e.scale,s,a)}const XC=["x","scaleX","originX"],QC=["y","scaleY","originY"];function ey(t,e,n,r){Yg(t.x,e,XC,n?n.x:void 0,r?r.x:void 0),Yg(t.y,e,QC,n?n.y:void 0,r?r.y:void 0)}function ty(t){return t.translate===0&&t.scale===1}function yb(t){return ty(t.x)&&ty(t.y)}function ny(t,e){return t.min===e.min&&t.max===e.max}function YC(t,e){return ny(t.x,e.x)&&ny(t.y,e.y)}function ry(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function vb(t,e){return ry(t.x,e.x)&&ry(t.y,e.y)}function iy(t){return xt(t.x)/xt(t.y)}function sy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class eR{constructor(){this.members=[]}add(e){ap(this.members,e),e.scheduleRender()}remove(e){if(op(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tR(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:f,skewX:h,skewY:p}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),h&&(r+=`skewX(${h}deg) `),p&&(r+=`skewY(${p}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const nR=(t,e)=>t.depth-e.depth;class rR{constructor(){this.children=[],this.isDirty=!1}add(e){ap(this.children,e),this.isDirty=!0}remove(e){op(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nR),this.isDirty=!1,this.children.forEach(e)}}function tl(t){const e=Ge(t)?t.get():t;return qk(e)?e.toValue():e}function iR(t,e){const n=gn.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(pr(r),t(s-e))};return ue.read(r,!0),()=>pr(r)}function sR(t){return t instanceof SVGElement&&t.tagName!=="svg"}function aR(t,e,n){const r=Ge(t)?t:Ra(t);return r.start(sp("",r,e,n)),r.animation}const jr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ds=typeof window<"u"&&window.MotionDebug!==void 0,Nc=["","X","Y","Z"],oR={visibility:"hidden"},ay=1e3;let lR=0;function jc(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function wb(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=K_(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ue,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&wb(r)}function _b({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=lR++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ds&&(jr.totalNodes=jr.resolvedTargetDeltas=jr.recalculatedProjection=0),this.nodes.forEach(dR),this.nodes.forEach(gR),this.nodes.forEach(yR),this.nodes.forEach(fR),Ds&&window.MotionDebug.record(jr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new rR)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new lp),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sR(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=iR(f,250),el.hasAnimatedSinceResize&&(el.hasAnimatedSinceResize=!1,this.nodes.forEach(ly))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||xR,{onLayoutAnimationStart:w,onLayoutAnimationComplete:m}=c.getProps(),g=!this.targetLayout||!vb(this.targetLayout,p)||h,y=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,y);const b={...Gh(v,"layout"),onPlay:w,onComplete:m};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||ly(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vR),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&wb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(oy);return}this.isUpdating||this.nodes.forEach(pR),this.isUpdating=!1,this.nodes.forEach(mR),this.nodes.forEach(uR),this.nodes.forEach(cR),this.clearAllSnapshots();const o=gn.now();Me.delta=mr(0,1e3/60,o-Me.timestamp),Me.timestamp=o,Me.isProcessing=!0,Tc.update.process(Me),Tc.preRender.process(Me),Tc.render.process(Me),Me.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hR),this.sharedNodes.forEach(wR)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=be(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!yb(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&(o||Nr(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),SR(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return be();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(ER))){const{scroll:c}=this.root;c&&(Ii(l.x,c.offset.x),Ii(l.y,c.offset.y))}return l}removeElementScroll(a){var o;const l=be();if(Pt(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;c!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Pt(l,a),Ii(l.x,d.offset.x),Ii(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=be();Pt(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Ni(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Nr(c.latestValues)&&Ni(l,c.latestValues)}return Nr(this.latestValues)&&Ni(l,this.latestValues),l}removeTransform(a){const o=be();Pt(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Nr(u.latestValues))continue;_f(u.latestValues)&&u.updateSnapshot();const c=be(),d=u.measurePageBox();Pt(c,d),ey(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Nr(this.latestValues)&&ey(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Me.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Me.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=be(),this.relativeTargetOrigin=be(),Ys(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Pt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=be(),this.targetWithTransforms=be()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pt(this.target,this.layout.layoutBox),ub(this.target,this.targetDelta)):Pt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=be(),this.relativeTargetOrigin=be(),Ys(this.relativeTargetOrigin,this.target,h.target),Pt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ds&&jr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_f(this.parent.latestValues)||lb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Me.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Pt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;jC(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=be());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Xg(this.prevProjectionDelta.x,this.projectionDelta.x),Xg(this.prevProjectionDelta.y,this.projectionDelta.y)),Qs(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!sy(this.projectionDelta.x,this.prevProjectionDelta.x)||!sy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Ds&&jr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ai(),this.projectionDelta=Ai(),this.projectionDeltaWithTransform=Ai()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Ai();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=be(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,v=h!==p,w=this.getStack(),m=!w||w.members.length<=1,g=!!(v&&!m&&this.options.crossfade===!0&&!this.path.some(bR));this.animationProgress=0;let y;this.mixTargetDelta=b=>{const x=b/1e3;uy(d.x,a.x,x),uy(d.y,a.y,x),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ys(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_R(this.relativeTarget,this.relativeTargetOrigin,f,x),y&&YC(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=be()),Pt(y,this.relativeTarget)),v&&(this.animationValues=c,ZC(c,u,this.latestValues,x,g,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ue.update(()=>{el.hasAnimatedSinceResize=!0,this.currentAnimation=aR(0,ay,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ay),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&bb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||be();const d=xt(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=xt(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Pt(o,l),Ni(o,c),Qs(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new eR),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&jc("z",a,u,this.animationValues);for(let c=0;c<Nc.length;c++)jc(`rotate${Nc[c]}`,a,u,this.animationValues),jc(`skew${Nc[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oR;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=tl(a==null?void 0:a.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=tl(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Nr(this.latestValues)&&(v.transform=c?c({},""):"none",this.hasProjected=!1),v}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=tR(this.projectionDeltaWithTransform,this.treeScale,f),c&&(u.transform=c(f,u.transform));const{x:h,y:p}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in $l){if(f[v]===void 0)continue;const{correct:w,applyTo:m}=$l[v],g=u.transform==="none"?f[v]:w(f[v],d);if(m){const y=m.length;for(let b=0;b<y;b++)u[m[b]]=g}else u[v]=g}return this.options.layoutId&&(u.pointerEvents=d===this?tl(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(oy),this.root.sharedNodes.clear()}}}function uR(t){t.updateLayout()}function cR(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Ct(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=xt(f);f.min=r[d].min,f.max=f.min+h}):bb(s,n.layoutBox,r)&&Ct(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=xt(r[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const o=Ai();Qs(o,r,n.layoutBox);const l=Ai();a?Qs(l,t.applyTransform(i,!0),n.measuredBox):Qs(l,r,n.layoutBox);const u=!yb(o);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=be();Ys(p,n.layoutBox,f.layoutBox);const v=be();Ys(v,r,h.layoutBox),vb(p,v)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function dR(t){Ds&&jr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fR(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hR(t){t.clearSnapshot()}function oy(t){t.clearMeasurements()}function pR(t){t.isLayoutDirty=!1}function mR(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ly(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gR(t){t.resolveTargetDelta()}function yR(t){t.calcProjection()}function vR(t){t.resetSkewAndRotation()}function wR(t){t.removeLeadSnapshot()}function uy(t,e,n){t.translate=ye(e.translate,0,n),t.scale=ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function cy(t,e,n,r){t.min=ye(e.min,n.min,r),t.max=ye(e.max,n.max,r)}function _R(t,e,n,r){cy(t.x,e.x,n.x,r),cy(t.y,e.y,n.y,r)}function bR(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const xR={duration:.45,ease:[.4,0,.1,1]},dy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),fy=dy("applewebkit/")&&!dy("chrome/")?Math.round:Ze;function hy(t){t.min=fy(t.min),t.max=fy(t.max)}function SR(t){hy(t.x),hy(t.y)}function bb(t,e,n){return t==="position"||t==="preserve-aspect"&&!EC(iy(e),iy(n),.2)}function ER(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const TR=_b({attachResizeListener:(t,e)=>Pn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$c={current:void 0},xb=_b({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$c.current){const t=new TR({});t.mount(window),t.setOptions({layoutScroll:!0}),$c.current=t}return $c.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PR={pan:{Feature:UC},drag:{Feature:FC,ProjectionNode:xb,MeasureLayout:pb}};function py(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,a)=>{if(s.pointerType==="touch"||ib())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e);const l=o[r];l&&ue.postRender(()=>l(s,a))};return In(t.current,n,i,{passive:!t.getProps()[r]})}class kR extends kr{mount(){this.unmount=An(py(this.node,!0),py(this.node,!1))}unmount(){}}class CR extends kr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=An(Pn(this.node.current,"focus",()=>this.onFocus()),Pn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Sb=(t,e)=>e?t===e?!0:Sb(t,e.parentElement):!1;function Lc(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Ru(n))}class RR extends kr{constructor(){super(...arguments),this.removeStartListeners=Ze,this.removeEndListeners=Ze,this.removeAccessibleListeners=Ze,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=In(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps(),f=!d&&!Sb(this.node.current,o.target)?c:u;f&&ue.update(()=>f(o,l))},{passive:!(r.onTap||r.onPointerUp)}),a=In(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=An(s,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||Lc("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&ue.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Pn(this.node.current,"keyup",a),Lc("down",(o,l)=>{this.startPress(o,l)})},n=Pn(this.node.current,"keydown",e),r=()=>{this.isPressing&&Lc("cancel",(s,a)=>this.cancelPress(s,a))},i=Pn(this.node.current,"blur",r);this.removeAccessibleListeners=An(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ue.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ib()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ue.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=In(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Pn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=An(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const xf=new WeakMap,Dc=new WeakMap,OR=t=>{const e=xf.get(t.target);e&&e(t)},AR=t=>{t.forEach(OR)};function IR({root:t,...e}){const n=t||document;Dc.has(n)||Dc.set(n,{});const r=Dc.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(AR,{root:t,...e})),r[i]}function NR(t,e,n){const r=IR(e);return xf.set(t,n),r.observe(t),()=>{xf.delete(t),r.unobserve(t)}}const jR={some:0,all:1};class $R extends kr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jR[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=u?c:d;f&&f(l)};return NR(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(LR(e,n))&&this.startObserver()}unmount(){}}function LR({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const DR={inView:{Feature:$R},tap:{Feature:RR},focus:{Feature:CR},hover:{Feature:kR}},MR={layout:{ProjectionNode:xb,MeasureLayout:pb}},Eb=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Ou=S.createContext({}),dp=typeof window<"u",FR=dp?S.useLayoutEffect:S.useEffect,Tb=S.createContext({strict:!1});function UR(t,e,n,r,i){var s,a;const{visualElement:o}=S.useContext(Ou),l=S.useContext(Tb),u=S.useContext(up),c=S.useContext(Eb).reducedMotion,d=S.useRef();r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const f=d.current,h=S.useContext(hb);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&VR(d.current,n,i,h),S.useInsertionEffect(()=>{f&&f.update(n,u)});const p=n[q_],v=S.useRef(!!p&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,p))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,p)));return FR(()=>{f&&(window.MotionIsMounted=!0,f.updateFeatures(),cp.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),S.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,p)}),v.current=!1))}),f}function VR(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Pb(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Oi(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function Pb(t){if(t)return t.options.allowProjection!==!1?t.projection:Pb(t.parent)}function BR(t,e,n){return S.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Oi(n)&&(n.current=r))},[e])}function Au(t){return Ta(t.animate)||Wh.some(e=>Pa(t[e]))}function kb(t){return!!(Au(t)||t.variants)}function zR(t,e){if(Au(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Pa(n)?n:void 0,animate:Pa(r)?r:void 0}}return t.inherit!==!1?e:{}}function HR(t){const{initial:e,animate:n}=zR(t,S.useContext(Ou));return S.useMemo(()=>({initial:e,animate:n}),[my(e),my(n)])}function my(t){return Array.isArray(t)?t.join(" "):t}const gy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ns={};for(const t in gy)ns[t]={isEnabled:e=>gy[t].some(n=>!!e[n])};function WR(t){for(const e in t)ns[e]={...ns[e],...t[e]}}const GR=Symbol.for("motionComponentSymbol");function ZR({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&WR(t);function s(o,l){let u;const c={...S.useContext(Eb),...o,layoutId:qR(o)},{isStatic:d}=c,f=HR(o),h=r(o,d);if(!d&&dp){KR();const p=JR(c);u=p.MeasureLayout,f.visualElement=UR(i,h,c,e,p.ProjectionNode)}return _.jsxs(Ou.Provider,{value:f,children:[u&&f.visualElement?_.jsx(u,{visualElement:f.visualElement,...c}):null,n(i,o,BR(h,f.visualElement,l),h,d,f.visualElement)]})}const a=S.forwardRef(s);return a[GR]=i,a}function qR({layoutId:t}){const e=S.useContext(fb).id;return e&&t!==void 0?e+"-"+t:t}function KR(t,e){S.useContext(Tb).strict}function JR(t){const{drag:e,layout:n}=ns;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const XR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fp(t){return typeof t!="string"||t.includes("-")?!1:!!(XR.indexOf(t)>-1||/[A-Z]/u.test(t))}function Cb(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Rb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ob(t,e,n,r){Cb(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Rb.has(i)?i:Cu(i),e.attrs[i])}function Ab(t,{layout:e,layoutId:n}){return Pr.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$l[t]||t==="opacity")}function hp(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(Ge(i[a])||e.style&&Ge(e.style[a])||Ab(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return n&&i&&typeof i.willChange=="string"&&(n.applyWillChange=!1),s}function Ib(t,e,n){const r=hp(t,e,n);for(const i in t)if(Ge(t[i])||Ge(e[i])){const s=Ya.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function QR(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}function YR({applyWillChange:t=!1,scrapeMotionValuesFromProps:e,createRenderState:n,onMount:r},i,s,a,o){const l={latestValues:eO(i,s,a,o?!1:t,e),renderState:n()};return r&&(l.mount=u=>r(i,u,l)),l}const Nb=t=>(e,n)=>{const r=S.useContext(Ou),i=S.useContext(up),s=()=>YR(t,e,r,i,n);return n?s():QR(s)};function yy(t,e,n){const r=Array.isArray(e)?e:[e];for(let i=0;i<r.length;i++){const s=zh(t,r[i]);if(s){const{transitionEnd:a,transition:o,...l}=s;n(l,a)}}}function eO(t,e,n,r,i){var s;const a={};let o=r&&((s=t.style)===null||s===void 0?void 0:s.willChange)===void 0;const l=i(t,{});for(const v in l)a[v]=tl(l[v]);let{initial:u,animate:c}=t;const d=Au(t),f=kb(t);e&&f&&!d&&t.inherit!==!1&&(u===void 0&&(u=e.initial),c===void 0&&(c=e.animate));let h=n?n.initial===!1:!1;h=h||u===!1;const p=h?c:u;return p&&typeof p!="boolean"&&!Ta(p)&&yy(t,p,(v,w)=>{for(const m in v){let g=v[m];if(Array.isArray(g)){const y=h?g.length-1:0;g=g[y]}g!==null&&(a[m]=g)}for(const m in w)a[m]=w[m]}),o&&c&&u!==!1&&!Ta(c)&&yy(t,c,v=>{for(const w in v)if(J_(w)){a.willChange="transform";return}}),a}const pp=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),jb=()=>({...pp(),attrs:{}}),$b=(t,e)=>e&&typeof t=="number"?e.transform(t):t,tO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nO=Ya.length;function rO(t,e,n){let r="",i=!0;for(let s=0;s<nO;s++){const a=Ya[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=$b(o,Yh[a]);if(!l){i=!1;const c=tO[a]||a;r+=`${c}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function mp(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(Pr.has(l)){a=!0;continue}else if(S_(l)){i[l]=u;continue}else{const c=$b(u,Yh[l]);l.startsWith("origin")?(o=!0,s[l]=c):r[l]=c}}if(e.transform||(a||n?r.transform=rO(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}function vy(t,e,n){return typeof t=="string"?t:W.transform(e+n*t)}function iO(t,e,n){const r=vy(e,t.x,t.width),i=vy(n,t.y,t.height);return`${r} ${i}`}const sO={offset:"stroke-dashoffset",array:"stroke-dasharray"},aO={offset:"strokeDashoffset",array:"strokeDasharray"};function oO(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?sO:aO;t[s.offset]=W.transform(-r);const a=W.transform(e),o=W.transform(n);t[s.array]=`${a} ${o}`}function gp(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(mp(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h,dimensions:p}=t;f.transform&&(p&&(h.transform=f.transform),delete f.transform),p&&(i!==void 0||s!==void 0||h.transform)&&(h.transformOrigin=iO(p,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),a!==void 0&&oO(f,a,o,l,!1)}const yp=t=>typeof t=="string"&&t.toLowerCase()==="svg",lO={useVisualState:Nb({scrapeMotionValuesFromProps:Ib,createRenderState:jb,onMount:(t,e,{renderState:n,latestValues:r})=>{ue.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ue.render(()=>{gp(n,r,yp(e.tagName),t.transformTemplate),Ob(e,n)})}})},uO={useVisualState:Nb({applyWillChange:!0,scrapeMotionValuesFromProps:hp,createRenderState:pp})};function Lb(t,e,n){for(const r in e)!Ge(e[r])&&!Ab(r,n)&&(t[r]=e[r])}function cO({transformTemplate:t},e){return S.useMemo(()=>{const n=pp();return mp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function dO(t,e){const n=t.style||{},r={};return Lb(r,n,t),Object.assign(r,cO(t,e)),r}function fO(t,e){const n={},r=dO(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const hO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ll(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hO.has(t)}let Db=t=>!Ll(t);function pO(t){t&&(Db=e=>e.startsWith("on")?!Ll(e):t(e))}try{pO(require("@emotion/is-prop-valid").default)}catch{}function mO(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Db(i)||n===!0&&Ll(i)||!e&&!Ll(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function gO(t,e,n,r){const i=S.useMemo(()=>{const s=jb();return gp(s,e,yp(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Lb(s,t.style,t),i.style={...s,...i.style}}return i}function yO(t=!1){return(n,r,i,{latestValues:s},a)=>{const l=(fp(n)?gO:fO)(r,s,a,n),u=mO(r,typeof n=="string",t),c=n!==S.Fragment?{...u,...l,ref:i}:{},{children:d}=r,f=S.useMemo(()=>Ge(d)?d.get():d,[d]);return S.createElement(n,{...c,children:f})}}function vO(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...fp(r)?lO:uO,preloadedFeatures:t,useRender:yO(i),createVisualElement:e,Component:r};return ZR(a)}}const Sf={current:null},Mb={current:!1};function wO(){if(Mb.current=!0,!!dp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Sf.current=t.matches;t.addListener(e),e()}else Sf.current=!1}function _O(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Ge(i))t.addValue(r,i);else if(Ge(s))t.addValue(r,Ra(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Ra(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const wy=new WeakMap,bO=[...P_,ze,gr],xO=t=>bO.find(T_(t)),_y=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SO{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Jh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=gn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ue.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Au(n),this.isVariantNode=kb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const h=d[f];l[f]!==void 0&&Ge(h)&&h.set(l[f],!1)}}mount(e){this.current=e,wy.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Mb.current||wO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){wy.delete(this.current),this.projection&&this.projection.unmount(),pr(this.notifyUpdate),pr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Pr.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ns){const n=ns[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):be()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<_y.length;r++){const i=_y[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=_O(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ra(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(b_(i)||__(i))?i=parseFloat(i):!xO(i)&&gr.test(n)&&(i=j_(e,n)),this.setBaseTarget(e,Ge(i)?i.get():i)),Ge(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=zh(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ge(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Fb extends SO{constructor(){super(...arguments),this.KeyframeResolver=$_}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function EO(t){return window.getComputedStyle(t)}class TO extends Fb{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=Cb}readValueFromInstance(e,n){if(Pr.has(n)){const r=ep(n);return r&&r.default||0}else{const r=EO(e),i=(S_(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return cb(e,n)}build(e,n,r){mp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return hp(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ge(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class PO extends Fb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=be}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Pr.has(n)){const r=ep(n);return r&&r.default||0}return n=Rb.has(n)?n:Cu(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Ib(e,n,r)}build(e,n,r){gp(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Ob(e,n,r,i)}mount(e){this.isSVGTag=yp(e.tagName),super.mount(e)}}const kO=(t,e)=>fp(t)?new PO(e):new TO(e,{allowProjection:t!==S.Fragment}),CO=vO({...mC,...DR,...PR,...MR},kO),Ub=oP(CO);function Iu(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(c){s(c)}}function o(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(a,o)}l((r=r.apply(t,[])).next())})}function dr(t,e){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(d){c=[6,d],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function Ef(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),a=[];try{for(;(e===void 0||e-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a}function cn(t,e,n){if(arguments.length===2)for(var r,i=0,s=e.length;i<s;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function by(t,e,n,r,i){for(var s=[],a=5;a<arguments.length;a++)s[a-5]=arguments[a];return Iu(this,void 0,void 0,function(){var o,l,u,c,d,f;return dr(this,function(h){switch(h.label){case 0:h.trys.push([0,12,13,14]),o=Ef(s),l=o.next(),h.label=1;case 1:if(l.done)return[3,11];switch(u=l.value,typeof u){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,RO(t,e,u,n,r,i)];case 3:return h.sent(),[3,10];case 4:return[4,Vb(u)];case 5:return h.sent(),[3,10];case 6:return[4,u.apply(void 0,cn([t,e,n,r,i],Wt(s),!1))];case 7:return h.sent(),[3,10];case 8:return[4,u];case 9:h.sent(),h.label=10;case 10:return l=o.next(),[3,1];case 11:return[3,14];case 12:return c=h.sent(),d={error:c},[3,14];case 13:try{l&&!l.done&&(f=o.return)&&f.call(o)}finally{if(d)throw d.error}return[7];case 14:return[2]}})})}function RO(t,e,n,r,i,s){return Iu(this,void 0,void 0,function(){var a,o;return dr(this,function(l){switch(l.label){case 0:return a=t.textContent||"",o=function(u,c){var d=Wt(c).slice(0);return cn(cn([],Wt(u),!1),[NaN],!1).findIndex(function(f,h){return d[h]!==f})}(a,n),[4,OO(t,cn(cn([],Wt(IO(a,e,o)),!1),Wt(AO(n,e,o)),!1),r,i,s)];case 1:return l.sent(),[2]}})})}function Vb(t){return Iu(this,void 0,void 0,function(){return dr(this,function(e){switch(e.label){case 0:return[4,new Promise(function(n){return setTimeout(n,t)})];case 1:return e.sent(),[2]}})})}function OO(t,e,n,r,i){return Iu(this,void 0,void 0,function(){var s,a,o,l,u,c,d,f,h,p,v,w,m;return dr(this,function(g){switch(g.label){case 0:if(s=e,i){for(a=0,o=1;o<e.length;o++)if(l=Wt([e[o-1],e[o]],2),u=l[0],(c=l[1]).length>u.length||c===""){a=o;break}s=e.slice(a,e.length)}g.label=1;case 1:g.trys.push([1,6,7,8]),d=Ef(function(y){var b,x,T,R,k,G,V;return dr(this,function(ne){switch(ne.label){case 0:b=function(Ae){return dr(this,function(Xe){switch(Xe.label){case 0:return[4,{op:function($){return requestAnimationFrame(function(){return $.textContent=Ae})},opCode:function($){var N=$.textContent||"";return Ae===""||N.length>Ae.length?"DELETE":"WRITING"}}];case 1:return Xe.sent(),[2]}})},ne.label=1;case 1:ne.trys.push([1,6,7,8]),x=Ef(y),T=x.next(),ne.label=2;case 2:return T.done?[3,5]:(R=T.value,[5,b(R)]);case 3:ne.sent(),ne.label=4;case 4:return T=x.next(),[3,2];case 5:return[3,8];case 6:return k=ne.sent(),G={error:k},[3,8];case 7:try{T&&!T.done&&(V=x.return)&&V.call(x)}finally{if(G)throw G.error}return[7];case 8:return[2]}})}(s)),f=d.next(),g.label=2;case 2:return f.done?[3,5]:(h=f.value,p=h.opCode(t)==="WRITING"?n+n*(Math.random()-.5):r+r*(Math.random()-.5),h.op(t),[4,Vb(p)]);case 3:g.sent(),g.label=4;case 4:return f=d.next(),[3,2];case 5:return[3,8];case 6:return v=g.sent(),w={error:v},[3,8];case 7:try{f&&!f.done&&(m=d.return)&&m.call(d)}finally{if(w)throw w.error}return[7];case 8:return[2]}})})}function AO(t,e,n){var r,i;return n===void 0&&(n=0),dr(this,function(s){switch(s.label){case 0:r=e(t),i=r.length,s.label=1;case 1:return n<i?[4,r.slice(0,++n).join("")]:[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})}function IO(t,e,n){var r,i;return n===void 0&&(n=0),dr(this,function(s){switch(s.label){case 0:r=e(t),i=r.length,s.label=1;case 1:return i>n?[4,r.slice(0,--i).join("")]:[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})}var NO="index-module_type__E-SaG";(function(t,e){e===void 0&&(e={});var n=e.insertAt;if(typeof document<"u"){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}})(`.index-module_type__E-SaG::after {
  content: '|';
  animation: index-module_cursor__PQg0P 1.1s infinite step-start;
}

@keyframes index-module_cursor__PQg0P {
  50% {
    opacity: 0;
  }
}
`);var Bb=S.memo(S.forwardRef(function(t,e){var n=t.sequence,r=t.repeat,i=t.className,s=t.speed,a=s===void 0?40:s,o=t.deletionSpeed,l=t.omitDeletionAnimation,u=l!==void 0&&l,c=t.preRenderFirstString,d=c!==void 0&&c,f=t.wrapper,h=f===void 0?"span":f,p=t.splitter,v=p===void 0?function(P){return cn([],Wt(P),!1)}:p,w=t.cursor,m=w===void 0||w,g=t.style,y=function(P,U){var M={};for(var q in P)Object.prototype.hasOwnProperty.call(P,q)&&U.indexOf(q)<0&&(M[q]=P[q]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function"){var le=0;for(q=Object.getOwnPropertySymbols(P);le<q.length;le++)U.indexOf(q[le])<0&&Object.prototype.propertyIsEnumerable.call(P,q[le])&&(M[q[le]]=P[q[le]])}return M}(t,["sequence","repeat","className","speed","deletionSpeed","omitDeletionAnimation","preRenderFirstString","wrapper","splitter","cursor","style"]),b=y["aria-label"],x=y["aria-hidden"],T=y.role;o||(o=a);var R=new Array(2).fill(40);[a,o].forEach(function(P,U){switch(typeof P){case"number":R[U]=Math.abs(P-100);break;case"object":var M=P.type,q=P.value;if(typeof q!="number")break;M==="keyStrokeDelayInMs"&&(R[U]=q)}});var k,G,V,ne,Ae,Xe,$=R[0],N=R[1],B=function(P,U){U===void 0&&(U=null);var M=S.useRef(U);return S.useEffect(function(){P&&(typeof P=="function"?P(M.current):P.current=M.current)},[P]),M}(e),j=NO;k=i?"".concat(m?j+" ":"").concat(i):m?j:"",G=S.useRef(function(){var P,U=n;r===1/0?P=by:typeof r=="number"&&(U=Array(1+r).fill(n).flat());var M=P?cn(cn([],Wt(U),!1),[P],!1):cn([],Wt(U),!1);return by.apply(void 0,cn([B.current,v,$,N,u],Wt(M),!1)),function(){B.current}}),V=S.useRef(),ne=S.useRef(!1),Ae=S.useRef(!1),Xe=Wt(S.useState(0),2)[1],ne.current&&(Ae.current=!0),S.useEffect(function(){return ne.current||(V.current=G.current(),ne.current=!0),Xe(function(P){return P+1}),function(){Ae.current&&V.current&&V.current()}},[]);var E=h,C=d?n.find(function(P){return typeof P=="string"})||"":null;return Zt.createElement(E,{"aria-hidden":x,"aria-label":b,role:T,style:g,className:k,children:b?Zt.createElement("span",{"aria-hidden":"true",ref:B,children:C}):C,ref:b?void 0:B})}),function(t,e){return!0});const jO=()=>{document.title="Aayush Regmi | Home";const t="Aayush Regmi",e=()=>({transform:["scale3d(1,1,1)","scale3d(2,.3,1)","scale3d(.75,1.25,1)","scale3d(1.25,.85,1)","scale3d(.9,1.05,1)","scale3d(1,1,1)"],transtion:[0,.4,.6,.7,.8,0]}),n=r=>r.split("").map((s,a)=>{const[o,l]=S.useState(!1);return s===" "?_.jsx("span",{children:""}):_.jsx(Ub.span,{animate:()=>({...e()}),whileHover:()=>{if(!o)return l(!0),e()},onHoverEnd:()=>{l(!1)},className:`${s===" "?"pr-2":""} text-text-green hover:text-text-yellow`,children:s},a)});return _.jsx(_.Fragment,{children:_.jsx("div",{className:"text-gray-300 bg-default-background/95 relative h-full w-full flex flex-col items-between justify-center px-10 sm:px-16 text-2xl sm:text-3xl lg:text-4xl",children:_.jsxs("div",{children:[_.jsxs("div",{className:"cursor-default",children:["Hey There! ",_.jsx("br",{}),_.jsxs("div",{className:"flex flex-row items-center",children:[_.jsx("span",{children:"I am"}),"",n(t),""]})]}),_.jsx("div",{className:"text-2xl sm:text-3xl mt-4 lg:mt-8",children:_.jsx(Bb,{className:"text-orange-color",sequence:["Programmer",1e3,"Student",1e3],repeat:1/0,speed:200,wrapper:"span"})}),_.jsxs("div",{className:"flex flex-row gap-5 text-sm mt-6",children:[_.jsx(Ea,{to:"/portfolio/about",className:"text-text-light-blue px-3 sm:px-5 py-1 sm:py-2 lg:py-3 border border-text-light-blue hover:bg-secondary-background/40 duration-300",children:"About Me"}),_.jsx(Ea,{to:"/portfolio/contact",className:"text-text-orange border px-3 sm:px-5 py-1 sm:py-2 lg:py-3 border-text-orange hover:bg-secondary-background/40 duration-300",children:"Contact Me"})]})]})})})},$O=()=>(document.title="Aayush Regmi | About",_.jsx(_.Fragment,{children:_.jsx("div",{className:"p-5 sm:p-10 relative w-full h-full bg-default-background/95 sm:text-2xl text-gray-300",children:_.jsx(Bb,{className:"text-gray-300 cursor-default",sequence:["I write bugs..."],preRenderFirstString:!0,wrapper:"span"})})})),LO=({showTerminal:t})=>{const e=(n,r)=>Array.from({length:r-n+1},(i,s)=>n+s);return _.jsx(_.Fragment,{children:_.jsxs("div",{className:`relative w-full ${t?"h-1/2":"h-full"} bg-default-background/95 text-xs md:text-sm lg:text-base flex flex-row overflow-auto scrollbar`,children:[_.jsx("div",{className:"h-full w-8 bg-default-background border-r border-r-border-color flex flex-col text-right px-2",children:e(1,20).map(n=>_.jsx("div",{children:n},n))}),_.jsxs("div",{className:"pl-2",children:[_.jsx("div",{children:""}),_.jsxs("div",{children:[_.jsx("span",{className:"text-text-red",children:"void"})," ",_.jsx("span",{className:"text-text-purple",children:"contactInfo"}),_.jsxs("span",{className:"text-text-blue",children:["()","{"]})]}),_.jsxs("a",{href:"https://www.github.com/ayushregmi",className:"pl-10",children:[_.jsx("span",{className:"text-text-orange",children:"std"}),"::",_.jsx("span",{className:"text-text-orange",children:"string"}),_.jsx("span",{children:" github "}),_.jsx("span",{className:"text-text-red",children:" = "}),_.jsx("a",{href:"https://www.github.com/ayushregmi",className:"text-text-light-blue",children:'"ayushregmi"'}),";"]}),_.jsxs("a",{href:"https://www.linkedin.com/in/aayush-regmi-9b82651b6/",className:"pl-10 block",children:[_.jsx("span",{className:"text-text-orange",children:"std"}),"::",_.jsx("span",{className:"text-text-orange",children:"string"}),_.jsx("span",{children:" linkedin "}),_.jsx("span",{className:"text-text-red",children:" = "}),_.jsx("a",{href:"https://www.linkedin.com/in/aayush-regmi-9b82651b6/",className:"text-text-light-blue",children:'"Aayush Regmi"'}),";"]}),_.jsxs("div",{className:"pl-10",children:[_.jsx("span",{className:"text-text-orange",children:"std"}),"::",_.jsx("span",{className:"text-text-orange",children:"string"}),_.jsx("span",{children:" email "}),_.jsx("span",{className:"text-text-red",children:" = "}),_.jsx("span",{className:"text-text-light-blue",children:'"aregmi29@gmail.com"'}),";"]}),_.jsx("div",{children:""}),_.jsx("div",{children:""}),_.jsxs("div",{children:[_.jsx("span",{className:"text-text-red",children:"int"})," ",_.jsx("span",{className:"text-text-purple",children:"main"}),_.jsxs("span",{className:"text-text-blue",children:["()","{"]})]}),_.jsxs("div",{className:"pl-10",children:[_.jsx("span",{className:"text-text-purple",children:"contactInfo"}),_.jsx("span",{className:"text-text-blue",children:"()"}),";"]}),_.jsxs("div",{className:"pl-10",children:[_.jsx("span",{className:"text-text-red",children:"return "}),_.jsx("span",{className:"text-text-light-blue",children:"0"}),";"]}),_.jsx("div",{className:"text-text-blue",children:"}"})]})]})})},DO=Symbol("Let zodToJsonSchema decide on which parser to use"),MO={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},FO=t=>({...MO,...t}),UO=t=>{const e=FO(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function zb(t,e,n,r){r!=null&&r.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function ae(t,e,n,r,i){t[e]=n,zb(t,e,r,i)}var te;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const a of i)s[a]=a;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(const o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(const a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(te||(te={}));var Tf;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Tf||(Tf={}));const D=te.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xn=t=>{switch(typeof t){case"undefined":return D.undefined;case"string":return D.string;case"number":return isNaN(t)?D.nan:D.number;case"boolean":return D.boolean;case"function":return D.function;case"bigint":return D.bigint;case"symbol":return D.symbol;case"object":return Array.isArray(t)?D.array:t===null?D.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?D.promise:typeof Map<"u"&&t instanceof Map?D.map:typeof Set<"u"&&t instanceof Set?D.set:typeof Date<"u"&&t instanceof Date?D.date:D.object;default:return D.unknown}},A=te.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),VO=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class wt extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){const u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return i(this),r}static assert(e){if(!(e instanceof wt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,te.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}wt.create=t=>new wt(t);const rs=(t,e)=>{let n;switch(t.code){case A.invalid_type:t.received===D.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case A.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,te.jsonStringifyReplacer)}`;break;case A.unrecognized_keys:n=`Unrecognized key(s) in object: ${te.joinValues(t.keys,", ")}`;break;case A.invalid_union:n="Invalid input";break;case A.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${te.joinValues(t.options)}`;break;case A.invalid_enum_value:n=`Invalid enum value. Expected ${te.joinValues(t.options)}, received '${t.received}'`;break;case A.invalid_arguments:n="Invalid function arguments";break;case A.invalid_return_type:n="Invalid function return type";break;case A.invalid_date:n="Invalid date";break;case A.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:te.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case A.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case A.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case A.custom:n="Invalid input";break;case A.invalid_intersection_types:n="Intersection results could not be merged";break;case A.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case A.not_finite:n="Number must be finite";break;default:n=e.defaultError,te.assertNever(t)}return{message:n}};let Hb=rs;function BO(t){Hb=t}function Dl(){return Hb}const Ml=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(a,{data:e,defaultError:o}).message;return{...i,path:s,message:o}},zO=[];function L(t,e){const n=Dl(),r=Ml({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===rs?void 0:rs].filter(i=>!!i)});t.common.issues.push(r)}class Ke{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Z;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,a=await i.value;r.push({key:s,value:a})}return Ke.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return Z;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}}const Z=Object.freeze({status:"aborted"}),ji=t=>({status:"dirty",value:t}),tt=t=>({status:"valid",value:t}),Pf=t=>t.status==="aborted",kf=t=>t.status==="dirty",Oa=t=>t.status==="valid",Aa=t=>typeof Promise<"u"&&t instanceof Promise;function Fl(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Wb(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var z;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(z||(z={}));var Ms,Fs;class vn{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xy=(t,e)=>{if(Oa(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new wt(t.common.issues);return this._error=n,this._error}}};function K(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var l,u;const{message:c}=t;return a.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:(l=c??r)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(u=c??n)!==null&&u!==void 0?u:o.defaultError}},description:i}}class X{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Xn(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Xn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ke,ctx:{common:e.parent.common,data:e.data,parsedType:Xn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Aa(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xn(e)},s=this._parseSync({data:e,path:i.path,parent:i});return xy(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xn(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Aa(i)?i:Promise.resolve(i));return xy(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const a=e(i),o=()=>s.addIssue({code:A.custom,...r(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new tn({schema:this,typeName:I.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return yn.create(this,this._def)}nullable(){return _r.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jt.create(this,this._def)}promise(){return ss.create(this,this._def)}or(e){return $a.create([this,e],this._def)}and(e){return La.create(this,e,this._def)}transform(e){return new tn({...K(this._def),schema:this,typeName:I.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Va({...K(this._def),innerType:this,defaultValue:n,typeName:I.ZodDefault})}brand(){return new vp({typeName:I.ZodBranded,type:this,...K(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ba({...K(this._def),innerType:this,catchValue:n,typeName:I.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return no.create(this,e)}readonly(){return za.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const HO=/^c[^\s-]{8,}$/i,WO=/^[0-9a-z]+$/,GO=/^[0-9A-HJKMNP-TV-Z]{26}$/,ZO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qO=/^[a-z0-9_-]{21}$/i,KO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,JO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,XO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Mc;const QO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YO=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,eA=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Gb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",tA=new RegExp(`^${Gb}$`);function Zb(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function nA(t){return new RegExp(`^${Zb(t)}$`)}function qb(t){let e=`${Gb}T${Zb(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function rA(t,e){return!!((e==="v4"||!e)&&QO.test(t)||(e==="v6"||!e)&&YO.test(t))}class Gt extends X{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==D.string){const s=this._getOrReturnCtx(e);return L(s,{code:A.invalid_type,expected:D.string,received:s.parsedType}),Z}const r=new Ke;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:A.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:A.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?L(i,{code:A.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&L(i,{code:A.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")JO.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"email",code:A.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Mc||(Mc=new RegExp(XO,"u")),Mc.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"emoji",code:A.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")ZO.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"uuid",code:A.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")qO.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"nanoid",code:A.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")HO.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"cuid",code:A.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")WO.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"cuid2",code:A.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")GO.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"ulid",code:A.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),L(i,{validation:"url",code:A.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"regex",code:A.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),L(i,{code:A.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),L(i,{code:A.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),L(i,{code:A.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?qb(s).test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{code:A.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?tA.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{code:A.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?nA(s).test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{code:A.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?KO.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"duration",code:A.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?rA(e.data,s.version)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"ip",code:A.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?eA.test(e.data)||(i=this._getOrReturnCtx(e,i),L(i,{validation:"base64",code:A.invalid_string,message:s.message}),r.dirty()):te.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:A.invalid_string,...z.errToObj(r)})}_addCheck(e){return new Gt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...z.errToObj(e)})}url(e){return this._addCheck({kind:"url",...z.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...z.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...z.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...z.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...z.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...z.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...z.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...z.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...z.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...z.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...z.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...z.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...z.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...z.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...z.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...z.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...z.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...z.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...z.errToObj(n)})}nonempty(e){return this.min(1,z.errToObj(e))}trim(){return new Gt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Gt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Gt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Gt.create=t=>{var e;return new Gt({checks:[],typeName:I.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...K(t)})};function iA(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}class yr extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==D.number){const s=this._getOrReturnCtx(e);return L(s,{code:A.invalid_type,expected:D.number,received:s.parsedType}),Z}let r;const i=new Ke;for(const s of this._def.checks)s.kind==="int"?te.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),L(r,{code:A.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:A.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:A.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?iA(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),L(r,{code:A.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),L(r,{code:A.not_finite,message:s.message}),i.dirty()):te.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,z.toString(n))}gt(e,n){return this.setLimit("min",e,!1,z.toString(n))}lte(e,n){return this.setLimit("max",e,!0,z.toString(n))}lt(e,n){return this.setLimit("max",e,!1,z.toString(n))}setLimit(e,n,r,i){return new yr({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:z.toString(i)}]})}_addCheck(e){return new yr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:z.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:z.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:z.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:z.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:z.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&te.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}yr.create=t=>new yr({checks:[],typeName:I.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...K(t)});class vr extends X{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==D.bigint){const s=this._getOrReturnCtx(e);return L(s,{code:A.invalid_type,expected:D.bigint,received:s.parsedType}),Z}let r;const i=new Ke;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:A.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),L(r,{code:A.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),L(r,{code:A.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):te.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,z.toString(n))}gt(e,n){return this.setLimit("min",e,!1,z.toString(n))}lte(e,n){return this.setLimit("max",e,!0,z.toString(n))}lt(e,n){return this.setLimit("max",e,!1,z.toString(n))}setLimit(e,n,r,i){return new vr({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:z.toString(i)}]})}_addCheck(e){return new vr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:z.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:z.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:z.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:z.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:z.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}vr.create=t=>{var e;return new vr({checks:[],typeName:I.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...K(t)})};class Ia extends X{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==D.boolean){const r=this._getOrReturnCtx(e);return L(r,{code:A.invalid_type,expected:D.boolean,received:r.parsedType}),Z}return tt(e.data)}}Ia.create=t=>new Ia({typeName:I.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...K(t)});class ti extends X{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==D.date){const s=this._getOrReturnCtx(e);return L(s,{code:A.invalid_type,expected:D.date,received:s.parsedType}),Z}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return L(s,{code:A.invalid_date}),Z}const r=new Ke;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:A.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),L(i,{code:A.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):te.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ti({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:z.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:z.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ti.create=t=>new ti({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:I.ZodDate,...K(t)});class Ul extends X{_parse(e){if(this._getType(e)!==D.symbol){const r=this._getOrReturnCtx(e);return L(r,{code:A.invalid_type,expected:D.symbol,received:r.parsedType}),Z}return tt(e.data)}}Ul.create=t=>new Ul({typeName:I.ZodSymbol,...K(t)});class Na extends X{_parse(e){if(this._getType(e)!==D.undefined){const r=this._getOrReturnCtx(e);return L(r,{code:A.invalid_type,expected:D.undefined,received:r.parsedType}),Z}return tt(e.data)}}Na.create=t=>new Na({typeName:I.ZodUndefined,...K(t)});class ja extends X{_parse(e){if(this._getType(e)!==D.null){const r=this._getOrReturnCtx(e);return L(r,{code:A.invalid_type,expected:D.null,received:r.parsedType}),Z}return tt(e.data)}}ja.create=t=>new ja({typeName:I.ZodNull,...K(t)});class is extends X{constructor(){super(...arguments),this._any=!0}_parse(e){return tt(e.data)}}is.create=t=>new is({typeName:I.ZodAny,...K(t)});class Gr extends X{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tt(e.data)}}Gr.create=t=>new Gr({typeName:I.ZodUnknown,...K(t)});class Mn extends X{_parse(e){const n=this._getOrReturnCtx(e);return L(n,{code:A.invalid_type,expected:D.never,received:n.parsedType}),Z}}Mn.create=t=>new Mn({typeName:I.ZodNever,...K(t)});class Vl extends X{_parse(e){if(this._getType(e)!==D.undefined){const r=this._getOrReturnCtx(e);return L(r,{code:A.invalid_type,expected:D.void,received:r.parsedType}),Z}return tt(e.data)}}Vl.create=t=>new Vl({typeName:I.ZodVoid,...K(t)});class Jt extends X{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==D.array)return L(n,{code:A.invalid_type,expected:D.array,received:n.parsedType}),Z;if(i.exactLength!==null){const a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(L(n,{code:a?A.too_big:A.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(L(n,{code:A.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(L(n,{code:A.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new vn(n,a,n.path,o)))).then(a=>Ke.mergeArray(r,a));const s=[...n.data].map((a,o)=>i.type._parseSync(new vn(n,a,n.path,o)));return Ke.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Jt({...this._def,minLength:{value:e,message:z.toString(n)}})}max(e,n){return new Jt({...this._def,maxLength:{value:e,message:z.toString(n)}})}length(e,n){return new Jt({...this._def,exactLength:{value:e,message:z.toString(n)}})}nonempty(e){return this.min(1,e)}}Jt.create=(t,e)=>new Jt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:I.ZodArray,...K(e)});function mi(t){if(t instanceof me){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=yn.create(mi(r))}return new me({...t._def,shape:()=>e})}else return t instanceof Jt?new Jt({...t._def,type:mi(t.element)}):t instanceof yn?yn.create(mi(t.unwrap())):t instanceof _r?_r.create(mi(t.unwrap())):t instanceof wn?wn.create(t.items.map(e=>mi(e))):t}class me extends X{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=te.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==D.object){const u=this._getOrReturnCtx(e);return L(u,{code:A.invalid_type,expected:D.object,received:u.parsedType}),Z}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Mn&&this._def.unknownKeys==="strip"))for(const u in i.data)a.includes(u)||o.push(u);const l=[];for(const u of a){const c=s[u],d=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new vn(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Mn){const u=this._def.unknownKeys;if(u==="passthrough")for(const c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")o.length>0&&(L(i,{code:A.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const c of o){const d=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new vn(i,d,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const c of l){const d=await c.key,f=await c.value;u.push({key:d,value:f,alwaysSet:c.alwaysSet})}return u}).then(u=>Ke.mergeObjectSync(r,u)):Ke.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return z.errToObj,new me({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,a,o;const l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=z.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new me({...this._def,unknownKeys:"strip"})}passthrough(){return new me({...this._def,unknownKeys:"passthrough"})}extend(e){return new me({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new me({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:I.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new me({...this._def,catchall:e})}pick(e){const n={};return te.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new me({...this._def,shape:()=>n})}omit(e){const n={};return te.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new me({...this._def,shape:()=>n})}deepPartial(){return mi(this)}partial(e){const n={};return te.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new me({...this._def,shape:()=>n})}required(e){const n={};return te.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof yn;)s=s._def.innerType;n[r]=s}}),new me({...this._def,shape:()=>n})}keyof(){return Kb(te.objectKeys(this.shape))}}me.create=(t,e)=>new me({shape:()=>t,unknownKeys:"strip",catchall:Mn.create(),typeName:I.ZodObject,...K(e)});me.strictCreate=(t,e)=>new me({shape:()=>t,unknownKeys:"strict",catchall:Mn.create(),typeName:I.ZodObject,...K(e)});me.lazycreate=(t,e)=>new me({shape:t,unknownKeys:"strip",catchall:Mn.create(),typeName:I.ZodObject,...K(e)});class $a extends X{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const o of s)if(o.result.status==="valid")return o.result;for(const o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const a=s.map(o=>new wt(o.ctx.common.issues));return L(n,{code:A.invalid_union,unionErrors:a}),Z}if(n.common.async)return Promise.all(r.map(async s=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s;const a=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},c=l._parseSync({data:n.data,path:n.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(l=>new wt(l));return L(n,{code:A.invalid_union,unionErrors:o}),Z}}get options(){return this._def.options}}$a.create=(t,e)=>new $a({options:t,typeName:I.ZodUnion,...K(e)});const bn=t=>t instanceof Ma?bn(t.schema):t instanceof tn?bn(t.innerType()):t instanceof Fa?[t.value]:t instanceof wr?t.options:t instanceof Ua?te.objectValues(t.enum):t instanceof Va?bn(t._def.innerType):t instanceof Na?[void 0]:t instanceof ja?[null]:t instanceof yn?[void 0,...bn(t.unwrap())]:t instanceof _r?[null,...bn(t.unwrap())]:t instanceof vp||t instanceof za?bn(t.unwrap()):t instanceof Ba?bn(t._def.innerType):[];class Nu extends X{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.object)return L(n,{code:A.invalid_type,expected:D.object,received:n.parsedType}),Z;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(L(n,{code:A.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Z)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const a=bn(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new Nu({typeName:I.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...K(r)})}}function Cf(t,e){const n=Xn(t),r=Xn(e);if(t===e)return{valid:!0,data:t};if(n===D.object&&r===D.object){const i=te.objectKeys(e),s=te.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(const o of s){const l=Cf(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===D.array&&r===D.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const a=t[s],o=e[s],l=Cf(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===D.date&&r===D.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class La extends X{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,a)=>{if(Pf(s)||Pf(a))return Z;const o=Cf(s.value,a.value);return o.valid?((kf(s)||kf(a))&&n.dirty(),{status:n.value,value:o.data}):(L(r,{code:A.invalid_intersection_types}),Z)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}La.create=(t,e,n)=>new La({left:t,right:e,typeName:I.ZodIntersection,...K(n)});class wn extends X{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.array)return L(r,{code:A.invalid_type,expected:D.array,received:r.parsedType}),Z;if(r.data.length<this._def.items.length)return L(r,{code:A.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Z;!this._def.rest&&r.data.length>this._def.items.length&&(L(r,{code:A.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new vn(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>Ke.mergeArray(n,a)):Ke.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new wn({...this._def,rest:e})}}wn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new wn({items:t,typeName:I.ZodTuple,rest:null,...K(e)})};class Da extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.object)return L(r,{code:A.invalid_type,expected:D.object,received:r.parsedType}),Z;const i=[],s=this._def.keyType,a=this._def.valueType;for(const o in r.data)i.push({key:s._parse(new vn(r,o,r.path,o)),value:a._parse(new vn(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?Ke.mergeObjectAsync(n,i):Ke.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof X?new Da({keyType:e,valueType:n,typeName:I.ZodRecord,...K(r)}):new Da({keyType:Gt.create(),valueType:e,typeName:I.ZodRecord,...K(n)})}}class Bl extends X{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.map)return L(r,{code:A.invalid_type,expected:D.map,received:r.parsedType}),Z;const i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,l],u)=>({key:i._parse(new vn(r,o,r.path,[u,"key"])),value:s._parse(new vn(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return Z;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),o.set(u.value,c.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of a){const u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return Z;(u.status==="dirty"||c.status==="dirty")&&n.dirty(),o.set(u.value,c.value)}return{status:n.value,value:o}}}}Bl.create=(t,e,n)=>new Bl({valueType:e,keyType:t,typeName:I.ZodMap,...K(n)});class ni extends X{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==D.set)return L(r,{code:A.invalid_type,expected:D.set,received:r.parsedType}),Z;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(L(r,{code:A.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(L(r,{code:A.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function a(l){const u=new Set;for(const c of l){if(c.status==="aborted")return Z;c.status==="dirty"&&n.dirty(),u.add(c.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>s._parse(new vn(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new ni({...this._def,minSize:{value:e,message:z.toString(n)}})}max(e,n){return new ni({...this._def,maxSize:{value:e,message:z.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ni.create=(t,e)=>new ni({valueType:t,minSize:null,maxSize:null,typeName:I.ZodSet,...K(e)});class Hi extends X{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.function)return L(n,{code:A.invalid_type,expected:D.function,received:n.parsedType}),Z;function r(o,l){return Ml({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Dl(),rs].filter(u=>!!u),issueData:{code:A.invalid_arguments,argumentsError:l}})}function i(o,l){return Ml({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Dl(),rs].filter(u=>!!u),issueData:{code:A.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof ss){const o=this;return tt(async function(...l){const u=new wt([]),c=await o._def.args.parseAsync(l,s).catch(h=>{throw u.addIssue(r(l,h)),u}),d=await Reflect.apply(a,this,c);return await o._def.returns._def.type.parseAsync(d,s).catch(h=>{throw u.addIssue(i(d,h)),u})})}else{const o=this;return tt(function(...l){const u=o._def.args.safeParse(l,s);if(!u.success)throw new wt([r(l,u.error)]);const c=Reflect.apply(a,this,u.data),d=o._def.returns.safeParse(c,s);if(!d.success)throw new wt([i(c,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Hi({...this._def,args:wn.create(e).rest(Gr.create())})}returns(e){return new Hi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Hi({args:e||wn.create([]).rest(Gr.create()),returns:n||Gr.create(),typeName:I.ZodFunction,...K(r)})}}class Ma extends X{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ma.create=(t,e)=>new Ma({getter:t,typeName:I.ZodLazy,...K(e)});class Fa extends X{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return L(n,{received:n.data,code:A.invalid_literal,expected:this._def.value}),Z}return{status:"valid",value:e.data}}get value(){return this._def.value}}Fa.create=(t,e)=>new Fa({value:t,typeName:I.ZodLiteral,...K(e)});function Kb(t,e){return new wr({values:t,typeName:I.ZodEnum,...K(e)})}class wr extends X{constructor(){super(...arguments),Ms.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return L(n,{expected:te.joinValues(r),received:n.parsedType,code:A.invalid_type}),Z}if(Fl(this,Ms)||Wb(this,Ms,new Set(this._def.values)),!Fl(this,Ms).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return L(n,{received:n.data,code:A.invalid_enum_value,options:r}),Z}return tt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return wr.create(e,{...this._def,...n})}exclude(e,n=this._def){return wr.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ms=new WeakMap;wr.create=Kb;class Ua extends X{constructor(){super(...arguments),Fs.set(this,void 0)}_parse(e){const n=te.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==D.string&&r.parsedType!==D.number){const i=te.objectValues(n);return L(r,{expected:te.joinValues(i),received:r.parsedType,code:A.invalid_type}),Z}if(Fl(this,Fs)||Wb(this,Fs,new Set(te.getValidEnumValues(this._def.values))),!Fl(this,Fs).has(e.data)){const i=te.objectValues(n);return L(r,{received:r.data,code:A.invalid_enum_value,options:i}),Z}return tt(e.data)}get enum(){return this._def.values}}Fs=new WeakMap;Ua.create=(t,e)=>new Ua({values:t,typeName:I.ZodNativeEnum,...K(e)});class ss extends X{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==D.promise&&n.common.async===!1)return L(n,{code:A.invalid_type,expected:D.promise,received:n.parsedType}),Z;const r=n.parsedType===D.promise?n.data:Promise.resolve(n.data);return tt(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ss.create=(t,e)=>new ss({type:t,typeName:I.ZodPromise,...K(e)});class tn extends X{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===I.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{L(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return Z;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Z:l.status==="dirty"||n.value==="dirty"?ji(l.value):l});{if(n.value==="aborted")return Z;const o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?Z:o.status==="dirty"||n.value==="dirty"?ji(o.value):o}}if(i.type==="refinement"){const a=o=>{const l=i.refinement(o,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Z:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Z:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Oa(a))return a;const o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Oa(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:n.value,value:o})):a);te.assertNever(i)}}tn.create=(t,e,n)=>new tn({schema:t,typeName:I.ZodEffects,effect:e,...K(n)});tn.createWithPreprocess=(t,e,n)=>new tn({schema:e,effect:{type:"preprocess",transform:t},typeName:I.ZodEffects,...K(n)});class yn extends X{_parse(e){return this._getType(e)===D.undefined?tt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yn.create=(t,e)=>new yn({innerType:t,typeName:I.ZodOptional,...K(e)});class _r extends X{_parse(e){return this._getType(e)===D.null?tt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_r.create=(t,e)=>new _r({innerType:t,typeName:I.ZodNullable,...K(e)});class Va extends X{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===D.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Va.create=(t,e)=>new Va({innerType:t,typeName:I.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...K(e)});class Ba extends X{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Aa(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new wt(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new wt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ba.create=(t,e)=>new Ba({innerType:t,typeName:I.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...K(e)});class zl extends X{_parse(e){if(this._getType(e)!==D.nan){const r=this._getOrReturnCtx(e);return L(r,{code:A.invalid_type,expected:D.nan,received:r.parsedType}),Z}return{status:"valid",value:e.data}}}zl.create=t=>new zl({typeName:I.ZodNaN,...K(t)});const sA=Symbol("zod_brand");class vp extends X{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class no extends X{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Z:s.status==="dirty"?(n.dirty(),ji(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Z:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new no({in:e,out:n,typeName:I.ZodPipeline})}}class za extends X{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Oa(i)&&(i.value=Object.freeze(i.value)),i);return Aa(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}za.create=(t,e)=>new za({innerType:t,typeName:I.ZodReadonly,...K(e)});function Jb(t,e={},n){return t?is.create().superRefine((r,i)=>{var s,a;if(!t(r)){const o=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(a=(s=o.fatal)!==null&&s!==void 0?s:n)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...u,fatal:l})}}):is.create()}const aA={object:me.lazycreate};var I;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(I||(I={}));const oA=(t,e={message:`Input not instance of ${t.name}`})=>Jb(n=>n instanceof t,e),Xb=Gt.create,Qb=yr.create,lA=zl.create,uA=vr.create,Yb=Ia.create,cA=ti.create,dA=Ul.create,fA=Na.create,hA=ja.create,pA=is.create,mA=Gr.create,gA=Mn.create,yA=Vl.create,vA=Jt.create,wA=me.create,_A=me.strictCreate,bA=$a.create,xA=Nu.create,SA=La.create,EA=wn.create,TA=Da.create,PA=Bl.create,kA=ni.create,CA=Hi.create,RA=Ma.create,OA=Fa.create,AA=wr.create,IA=Ua.create,NA=ss.create,Sy=tn.create,jA=yn.create,$A=_r.create,LA=tn.createWithPreprocess,DA=no.create,MA=()=>Xb().optional(),FA=()=>Qb().optional(),UA=()=>Yb().optional(),VA={string:t=>Gt.create({...t,coerce:!0}),number:t=>yr.create({...t,coerce:!0}),boolean:t=>Ia.create({...t,coerce:!0}),bigint:t=>vr.create({...t,coerce:!0}),date:t=>ti.create({...t,coerce:!0})},BA=Z;var Zr=Object.freeze({__proto__:null,defaultErrorMap:rs,setErrorMap:BO,getErrorMap:Dl,makeIssue:Ml,EMPTY_PATH:zO,addIssueToContext:L,ParseStatus:Ke,INVALID:Z,DIRTY:ji,OK:tt,isAborted:Pf,isDirty:kf,isValid:Oa,isAsync:Aa,get util(){return te},get objectUtil(){return Tf},ZodParsedType:D,getParsedType:Xn,ZodType:X,datetimeRegex:qb,ZodString:Gt,ZodNumber:yr,ZodBigInt:vr,ZodBoolean:Ia,ZodDate:ti,ZodSymbol:Ul,ZodUndefined:Na,ZodNull:ja,ZodAny:is,ZodUnknown:Gr,ZodNever:Mn,ZodVoid:Vl,ZodArray:Jt,ZodObject:me,ZodUnion:$a,ZodDiscriminatedUnion:Nu,ZodIntersection:La,ZodTuple:wn,ZodRecord:Da,ZodMap:Bl,ZodSet:ni,ZodFunction:Hi,ZodLazy:Ma,ZodLiteral:Fa,ZodEnum:wr,ZodNativeEnum:Ua,ZodPromise:ss,ZodEffects:tn,ZodTransformer:tn,ZodOptional:yn,ZodNullable:_r,ZodDefault:Va,ZodCatch:Ba,ZodNaN:zl,BRAND:sA,ZodBranded:vp,ZodPipeline:no,ZodReadonly:za,custom:Jb,Schema:X,ZodSchema:X,late:aA,get ZodFirstPartyTypeKind(){return I},coerce:VA,any:pA,array:vA,bigint:uA,boolean:Yb,date:cA,discriminatedUnion:xA,effect:Sy,enum:AA,function:CA,instanceof:oA,intersection:SA,lazy:RA,literal:OA,map:PA,nan:lA,nativeEnum:IA,never:gA,null:hA,nullable:$A,number:Qb,object:wA,oboolean:UA,onumber:FA,optional:jA,ostring:MA,pipeline:DA,preprocess:LA,promise:NA,record:TA,set:kA,strictObject:_A,string:Xb,symbol:dA,transformer:Sy,tuple:EA,undefined:fA,union:bA,unknown:mA,void:yA,NEVER:BA,ZodIssueCode:A,quotelessJson:VO,ZodError:wt});function zA(){return{}}function HA(t,e){var r,i;const n={type:"array"};return((i=(r=t.type)==null?void 0:r._def)==null?void 0:i.typeName)!==I.ZodAny&&(n.items=ie(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&ae(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&ae(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(ae(n,"minItems",t.exactLength.value,t.exactLength.message,e),ae(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function WA(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?ae(n,"minimum",r.value,r.message,e):ae(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ae(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ae(n,"maximum",r.value,r.message,e):ae(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ae(n,"maximum",r.value,r.message,e));break;case"multipleOf":ae(n,"multipleOf",r.value,r.message,e);break}return n}function GA(){return{type:"boolean"}}function ZA(t,e){return ie(t.type._def,e)}const qA=(t,e)=>ie(t.innerType._def,e);function ex(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,s)=>ex(t,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return KA(t,e)}}const KA=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":ae(n,"minimum",r.value,r.message,e);break;case"max":ae(n,"maximum",r.value,r.message,e);break}return n};function JA(t,e){return{...ie(t.innerType._def,e),default:t.defaultValue()}}function XA(t,e){return e.effectStrategy==="input"?ie(t.schema._def,e):{}}function QA(t){return{type:"string",enum:t.values}}const YA=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function eI(t,e){const n=[ie(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),ie(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(s=>{if(YA(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(r=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:o,...l}=s;a=l}else r=void 0;i.push(a)}}),i.length?{allOf:i,...r}:void 0}function tI(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let Fc;const Or={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Fc===void 0&&(Fc=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Fc),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function tx(t,e){const n={type:"string"};function r(i){return e.patternStrategy==="escape"?nI(i):i}if(t.checks)for(const i of t.checks)switch(i.kind){case"min":ae(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e);break;case"max":ae(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Ft(n,"email",i.message,e);break;case"format:idn-email":Ft(n,"idn-email",i.message,e);break;case"pattern:zod":Ut(n,Or.email,i.message,e);break}break;case"url":Ft(n,"uri",i.message,e);break;case"uuid":Ft(n,"uuid",i.message,e);break;case"regex":Ut(n,i.regex,i.message,e);break;case"cuid":Ut(n,Or.cuid,i.message,e);break;case"cuid2":Ut(n,Or.cuid2,i.message,e);break;case"startsWith":Ut(n,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":Ut(n,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":Ft(n,"date-time",i.message,e);break;case"date":Ft(n,"date",i.message,e);break;case"time":Ft(n,"time",i.message,e);break;case"duration":Ft(n,"duration",i.message,e);break;case"length":ae(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,i.value):i.value,i.message,e),ae(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,i.value):i.value,i.message,e);break;case"includes":{Ut(n,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&Ft(n,"ipv4",i.message,e),i.version!=="v4"&&Ft(n,"ipv6",i.message,e);break}case"emoji":Ut(n,Or.emoji,i.message,e);break;case"ulid":{Ut(n,Or.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Ft(n,"binary",i.message,e);break}case"contentEncoding:base64":{ae(n,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{Ut(n,Or.base64,i.message,e);break}}break}case"nanoid":Ut(n,Or.nanoid,i.message,e)}return n}const nI=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Ft=(t,e,n,r)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):ae(t,"format",e,n,r)},Ut=(t,e,n,r)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:Ey(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):ae(t,"pattern",Ey(e,r),n,r)},Ey=(t,e)=>{var u;const n=typeof t=="function"?t():t;if(!e.applyRegexFlags||!n.flags)return n.source;const r={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},i=r.i?n.source.toLowerCase():n.source;let s="",a=!1,o=!1,l=!1;for(let c=0;c<i.length;c++){if(a){s+=i[c],a=!1;continue}if(r.i){if(o){if(i[c].match(/[a-z]/)){l?(s+=i[c],s+=`${i[c-2]}-${i[c]}`.toUpperCase(),l=!1):i[c+1]==="-"&&((u=i[c+2])!=null&&u.match(/[a-z]/))?(s+=i[c],l=!0):s+=`${i[c]}${i[c].toUpperCase()}`;continue}}else if(i[c].match(/[a-z]/)){s+=`[${i[c]}${i[c].toUpperCase()}]`;continue}}if(r.m){if(i[c]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(i[c]==="$"){s+=`($|(?=[\r
]))`;continue}}if(r.s&&i[c]==="."){s+=o?`${i[c]}\r
`:`[${i[c]}\r
]`;continue}s+=i[c],i[c]==="\\"?a=!0:o&&i[c]==="]"?o=!1:!o&&i[c]==="["&&(o=!0)}try{const c=new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return s};function nx(t,e){var r,i,s,a;if(e.target==="openApi3"&&((r=t.keyType)==null?void 0:r._def.typeName)===I.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((o,l)=>({...o,[l]:ie(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:ie(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(((i=t.keyType)==null?void 0:i._def.typeName)===I.ZodString&&((s=t.keyType._def.checks)!=null&&s.length)){const o=Object.entries(tx(t.keyType._def,e)).reduce((l,[u,c])=>u==="type"?l:{...l,[u]:c},{});return{...n,propertyNames:o}}else if(((a=t.keyType)==null?void 0:a._def.typeName)===I.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};return n}function rI(t,e){if(e.mapStrategy==="record")return nx(t,e);const n=ie(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=ie(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function iI(t){const e=t.values,r=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(r.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function sI(){return{not:{}}}function aI(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Hl={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function oI(t,e){if(e.target==="openApi3")return Ty(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in Hl&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((i,s)=>{const a=Hl[s._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((i,s)=>{const a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===n.length){const i=r.filter((s,a,o)=>o.indexOf(s)===a);return{type:i.length>1?i:i[0],enum:n.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,i)=>[...r,...i._def.values.filter(s=>!r.includes(s))],[])};return Ty(t,e)}const Ty=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,i)=>ie(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function lI(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Hl[t.innerType._def.typeName],nullable:!0}:{type:[Hl[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=ie(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=ie(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function uI(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",zb(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?ae(n,"minimum",r.value,r.message,e):ae(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),ae(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ae(n,"maximum",r.value,r.message,e):ae(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),ae(n,"maximum",r.value,r.message,e));break;case"multipleOf":ae(n,"multipleOf",r.value,r.message,e);break}return n}function cI(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":ie(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":ie(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function dI(t,e){const n={type:"object",...Object.entries(t.shape()).reduce((r,[i,s])=>{if(s===void 0||s._def===void 0)return r;const a=ie(s._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return a===void 0?r:{properties:{...r.properties,[i]:a},required:s.isOptional()?r.required:[...r.required,i]}},{properties:{},required:[]}),additionalProperties:cI(t,e)};return n.required.length||delete n.required,n}const fI=(t,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return ie(t.innerType._def,e);const n=ie(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},hI=(t,e)=>{if(e.pipeStrategy==="input")return ie(t.in._def,e);if(e.pipeStrategy==="output")return ie(t.out._def,e);const n=ie(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=ie(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(i=>i!==void 0)}};function pI(t,e){return ie(t.type._def,e)}function mI(t,e){const r={type:"array",uniqueItems:!0,items:ie(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&ae(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&ae(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function gI(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>ie(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:ie(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>ie(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function yI(){return{not:{}}}function vI(){return{}}const wI=(t,e)=>ie(t.innerType._def,e);function ie(t,e,n=!1){var a;const r=e.seen.get(t);if(e.override){const o=(a=e.override)==null?void 0:a.call(e,t,e,r,n);if(o!==DO)return o}if(r&&!n){const o=_I(r,e);if(o!==void 0)return o}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const s=xI(t,t.typeName,e);return s&&SI(t,e,s),i.jsonSchema=s,s}const _I=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:bI(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},bI=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},xI=(t,e,n)=>{switch(e){case I.ZodString:return tx(t,n);case I.ZodNumber:return uI(t,n);case I.ZodObject:return dI(t,n);case I.ZodBigInt:return WA(t,n);case I.ZodBoolean:return GA();case I.ZodDate:return ex(t,n);case I.ZodUndefined:return yI();case I.ZodNull:return aI(n);case I.ZodArray:return HA(t,n);case I.ZodUnion:case I.ZodDiscriminatedUnion:return oI(t,n);case I.ZodIntersection:return eI(t,n);case I.ZodTuple:return gI(t,n);case I.ZodRecord:return nx(t,n);case I.ZodLiteral:return tI(t,n);case I.ZodEnum:return QA(t);case I.ZodNativeEnum:return iI(t);case I.ZodNullable:return lI(t,n);case I.ZodOptional:return fI(t,n);case I.ZodMap:return rI(t,n);case I.ZodSet:return mI(t,n);case I.ZodLazy:return ie(t.getter()._def,n);case I.ZodPromise:return pI(t,n);case I.ZodNaN:case I.ZodNever:return sI();case I.ZodEffects:return XA(t,n);case I.ZodAny:return zA();case I.ZodUnknown:return vI();case I.ZodDefault:return JA(t,n);case I.ZodBranded:return ZA(t,n);case I.ZodReadonly:return wI(t,n);case I.ZodCatch:return qA(t,n);case I.ZodPipeline:return hI(t,n);case I.ZodFunction:case I.ZodVoid:case I.ZodSymbol:return;default:return(r=>{})()}},SI=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),ro=(t,e)=>{const n=UO(e),r=void 0,i=e==null?void 0:e.name,s=ie(t._def,n,!1)??{},a=i===void 0?r?{...s,[n.definitionPath]:r}:s:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:s}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":n.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function Py(t,e=wp){t=t.trim();const n=/```(json)?(.*)```/s.exec(t);return e(n?n[2]:t)}function wp(t){if(typeof t>"u")return null;try{return JSON.parse(t)}catch{}let e="";const n=[];let r=!1,i=!1;for(let s of t){if(r)s==='"'&&!i?r=!1:s===`
`&&!i?s="\\n":s==="\\"?i=!i:i=!1;else if(s==='"')r=!0,i=!1;else if(s==="{")n.push("}");else if(s==="[")n.push("]");else if(s==="}"||s==="]")if(n&&n[n.length-1]===s)n.pop();else return null;e+=s}r&&(e+='"');for(let s=n.length-1;s>=0;s-=1)e+=n[s];try{return JSON.parse(e)}catch{return null}}var EI=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const TI=lu(EI);var rx={exports:{}};const PI=/[\p{Lu}]/u,kI=/[\p{Ll}]/u,ky=/^[\p{Lu}](?![\p{Lu}])/gu,ix=/([\p{Alpha}\p{N}_]|$)/u,sx=/[_.\- ]+/,CI=new RegExp("^"+sx.source),Cy=new RegExp(sx.source+ix.source,"gu"),Ry=new RegExp("\\d+"+ix.source,"gu"),RI=(t,e,n)=>{let r=!1,i=!1,s=!1;for(let a=0;a<t.length;a++){const o=t[a];r&&PI.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),r=!1,s=i,i=!0,a++):i&&s&&kI.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=i,i=!1,r=!0):(r=e(o)===o&&n(o)!==o,s=i,i=n(o)===o&&e(o)!==o)}return t},OI=(t,e)=>(ky.lastIndex=0,t.replace(ky,n=>e(n))),AI=(t,e)=>(Cy.lastIndex=0,Ry.lastIndex=0,t.replace(Cy,(n,r)=>e(r)).replace(Ry,n=>e(n))),ax=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";const n=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),r=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?r(t):n(t):(t!==n(t)&&(t=RI(t,n,r)),t=t.replace(CI,""),e.preserveConsecutiveUppercase?t=OI(t,n):t=n(t),e.pascalCase&&(t=r(t.charAt(0))+t.slice(1)),AI(t,r))};rx.exports=ax;rx.exports.default=ax;function II(t,e){return(e==null?void 0:e[t])||TI(t)}function NI(t,e,n){const r={};for(const i in t)Object.hasOwn(t,i)&&(r[e(i,n)]=t[i]);return r}function Oy(t){return Array.isArray(t)?[...t]:{...t}}function jI(t,e){const n=Oy(t);for(const[r,i]of Object.entries(e)){const[s,...a]=r.split(".").reverse();let o=n;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=Oy(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return n}function ox(t){const e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}class ri{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,ox(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...n){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof ri||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},n={},r=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(n,Reflect.get(i,"lc_secrets",this)),Object.assign(r,Reflect.get(i,"lc_attributes",this));return Object.keys(n).forEach(i=>{let s=this,a=r;const[o,...l]=i.split(".").reverse();for(const u of l.reverse()){if(!(u in s)||s[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof s[u]=="object"&&s[u]!=null?a[u]={}:Array.isArray(s[u])&&(a[u]=[])),s=s[u],a=a[u]}o in s&&s[o]!==void 0&&(a[o]=a[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:NI(Object.keys(n).length?jI(r,n):r,II,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function io(t,e){return typeof t=="string"?typeof e=="string"?t+e:[{type:"text",text:t},...e]:Array.isArray(e)?_p(t,e)??[...t,...e]:[...t,{type:"text",text:e}]}function $I(t,e){function n(r,i){if(typeof r!="object"||r===null||r===void 0)return r;if(i>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(a=>n(a,i+1));const s={};for(const a of Object.keys(r))s[a]=n(r[a],i+1);return s}return JSON.stringify(n(t,0),null,2)}class ps extends ri{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}getType(){return this._getType()}constructor(e,n){typeof e=="string"&&(e={content:e,additional_kwargs:n,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const n=$I(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${n}`}}function Lt(t,e){const n={...t};for(const[r,i]of Object.entries(e))if(n[r]==null)n[r]=i;else{if(i==null)continue;if(typeof n[r]!=typeof i||Array.isArray(n[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof n[r]=="string"){if(r==="type")continue;n[r]+=i}else if(typeof n[r]=="object"&&!Array.isArray(n[r]))n[r]=Lt(n[r],i);else if(Array.isArray(n[r]))n[r]=_p(n[r],i);else{if(n[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return n}function _p(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{const n=[...t];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const i=n.findIndex(s=>s.index===r.index);i!==-1?n[i]=Lt(n[i],r):n.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;n.push(r)}return n}}}class so extends ps{}function LI(t){return typeof t.role=="string"}function bp(t){return typeof(t==null?void 0:t._getType)=="function"}function DI(t){return bp(t)&&typeof t.concat=="function"}class MI extends ps{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,n,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:n}),super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function FI(t){const e=[],n=[];for(const r of t)if(r.function){const i=r.function.name;try{const s=JSON.parse(r.function.arguments),a={name:i||"",args:s||{},id:r.id};e.push(a)}catch{n.push({name:i,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,n]}class Rf extends ps{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,n){var i;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:n??{}};else{r=e;const s=(i=r.additional_kwargs)==null?void 0:i.tool_calls,a=r.tool_calls;s!=null&&s.length>0&&(a===void 0||a.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(s!=null&&a===void 0){const[o,l]=FI(s);r.tool_calls=o??[],r.invalid_tool_calls=l??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function lx(t){return t._getType()==="ai"}function Ay(t){return t._getType()==="ai"}class br extends so{constructor(e){let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)n={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[]};else{const r=[],i=[];for(const s of e.tool_call_chunks){let a={};try{if(a=wp(s.args||"{}"),a===null||typeof a!="object"||Array.isArray(a))throw new Error("Malformed tool call chunk args.");r.push({name:s.name??"",args:a,id:s.id,type:"tool_call"})}catch{i.push({name:s.name,args:s.args,id:s.id,error:"Malformed args.",type:"invalid_tool_call"})}}n={...e,tool_calls:r,invalid_tool_calls:i}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=n.tool_call_chunks??this.tool_call_chunks,this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=n.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const n={content:io(this.content,e.content),additional_kwargs:Lt(this.additional_kwargs,e.additional_kwargs),response_metadata:Lt(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const r=_p(this.tool_call_chunks,e.tool_call_chunks);r!==void 0&&r.length>0&&(n.tool_call_chunks=r)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const r=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},i=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},s={input_tokens:r.input_tokens+i.input_tokens,output_tokens:r.output_tokens+i.output_tokens,total_tokens:r.total_tokens+i.total_tokens};n.usage_metadata=s}return new br(n)}}class ju extends ps{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return ju}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class $u extends so{static lc_name(){return"ChatMessageChunk"}constructor(e,n){typeof e=="string"&&(e={content:e,role:n}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new $u({content:io(this.content,e.content),additional_kwargs:Lt(this.additional_kwargs,e.additional_kwargs),response_metadata:Lt(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class xp extends so{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new xp({content:io(this.content,e.content),additional_kwargs:Lt(this.additional_kwargs,e.additional_kwargs),response_metadata:Lt(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Lu extends ps{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class Du extends so{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new Du({content:io(this.content,e.content),additional_kwargs:Lt(this.additional_kwargs,e.additional_kwargs),response_metadata:Lt(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class UI extends ps{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class Mu extends so{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new Mu({content:io(this.content,e.content),additional_kwargs:Lt(this.additional_kwargs,e.additional_kwargs),response_metadata:Lt(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function ux(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}class VI extends Error{constructor(e,n){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=n}}function BI(t){return ux(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function zI(t){return typeof t=="object"&&t!=null&&t.lc===1&&Array.isArray(t.id)&&t.kwargs!=null&&typeof t.kwargs=="object"}function Uc(t){let e,n;if(zI(t)){const r=t.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":e="unknown",n=t.kwargs}else{const{type:r,...i}=t;e=r,n=i}if(e==="human"||e==="user")return new Lu(n);if(e==="ai"||e==="assistant"){const{tool_calls:r,...i}=n;if(!Array.isArray(r))return new Rf(n);const s=r.map(BI);return new Rf({...i,tool_calls:s})}else{if(e==="system")return new UI(n);if(e==="tool"&&"tool_call_id"in n)return new MI({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw new Error(`Unable to coerce message from array: only human, AI, or system message coercion is currently supported.

Received:${t}`)}}function Us(t){if(typeof t=="string")return new Lu(t);if(bp(t))return t;if(Array.isArray(t)){const[e,n]=t;return Uc({type:e,content:n})}else if(LI(t)){const{role:e,...n}=t;return Uc({...n,type:e})}else return Uc(t)}function cx(t,e="Human",n="AI"){const r=[];for(const i of t){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=n;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="tool")s="Tool";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);const a=i.name?`${i.name}, `:"",o=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);r.push(`${s}: ${a}${o}`)}return r.join(`
`)}function HI(t){var n;const e=t._getType();if(e==="human")return new Du({...t});if(e==="ai"){let r={...t};return"tool_calls"in r&&(r={...r,tool_call_chunks:(n=r.tool_calls)==null?void 0:n.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new br({...r})}else{if(e==="system")return new Mu({...t});if(e==="function")return new xp({...t});if(ju.isInstance(t))return new $u({...t});throw new Error("Unknown message type.")}}var Fu={exports:{}},dx={};function Dt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var WI=Dt;Dt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Dt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Dt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0};Dt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Dt.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Dt.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Dt.prototype.start=Dt.prototype.try;Dt.prototype.errors=function(){return this._errors};Dt.prototype.attempts=function(){return this._attempts};Dt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=n&&(e=i,n=a)}return e};(function(t){var e=WI;t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in n)r[i]=n[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],a=0;a<r.retries;a++)s.push(this.createTimeout(a,r));return n&&n.forever&&!s.length&&s.push(this.createTimeout(a,r)),s.sort(function(o,l){return o-l}),s},t.createTimeout=function(n,r){var i=r.randomize?Math.random()+1:1,s=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return s=Math.min(s,r.maxTimeout),s},t.wrap=function(n,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var s in n)typeof n[s]=="function"&&i.push(s)}for(var a=0;a<i.length;a++){var o=i[a],l=n[o];n[o]=(function(c){var d=t.operation(r),f=Array.prototype.slice.call(arguments,1),h=f.pop();f.push(function(p){d.retry(p)||(p&&(arguments[0]=d.mainError()),h.apply(this,arguments))}),d.attempt(function(){c.apply(n,f)})}).bind(n,l),n[o].options=r}}})(dx);var GI=dx;const ZI=GI,qI=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class fx extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const KI=(t,e,n)=>{const r=n.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},JI=t=>qI.includes(t),hx=(t,e)=>new Promise((n,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};const i=ZI.operation(e);i.attempt(async s=>{try{n(await t(s))}catch(a){if(!(a instanceof Error)){r(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof fx)i.stop(),r(a.originalError);else if(a instanceof TypeError&&!JI(a.message))i.stop(),r(a);else{KI(a,s,e);try{await e.onFailedAttempt(a)}catch(o){r(o);return}i.retry(a)||r(i.mainError())}}})});Fu.exports=hx;Fu.exports.default=hx;Fu.exports.AbortError=fx;var XI=Fu.exports;const Wl=lu(XI),QI=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function ea(t){return typeof t=="string"&&QI.test(t)}var Le=[];for(var Vc=0;Vc<256;++Vc)Le.push((Vc+256).toString(16).slice(1));function YI(t,e=0){return(Le[t[e+0]]+Le[t[e+1]]+Le[t[e+2]]+Le[t[e+3]]+"-"+Le[t[e+4]]+Le[t[e+5]]+"-"+Le[t[e+6]]+Le[t[e+7]]+"-"+Le[t[e+8]]+Le[t[e+9]]+"-"+Le[t[e+10]]+Le[t[e+11]]+Le[t[e+12]]+Le[t[e+13]]+Le[t[e+14]]+Le[t[e+15]]).toLowerCase()}var No,eN=new Uint8Array(16);function tN(){if(!No&&(No=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!No))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return No(eN)}var nN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Iy={randomUUID:nN};function gt(t,e,n){if(Iy.randomUUID&&!e&&!t)return Iy.randomUUID();t=t||{};var r=t.random||(t.rng||tN)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,YI(r)}let rN=class{getStore(){}run(e,n){return n()}};const Bc=Symbol.for("ls:tracing_async_local_storage"),iN=new rN;let sN=class{getInstance(){return globalThis[Bc]??iN}initializeGlobalInstance(e){globalThis[Bc]===void 0&&(globalThis[Bc]=e)}};const aN=new sN,oN=()=>{const t=aN.getInstance().getStore();if(t===void 0)throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function or the tracing is enabled."].join(`
`));return t};function Sp(t){return typeof t=="function"&&"langsmith:traceable"in t}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const lN=Object.prototype.hasOwnProperty;function Of(t,e){return lN.call(t,e)}function Af(t){if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<n.length;r++)n[r]=""+r;return n}if(Object.keys)return Object.keys(t);let e=[];for(let n in t)Of(t,n)&&e.push(n);return e}function fn(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function If(t){let e=0;const n=t.length;let r;for(;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function fi(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function uN(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Nf(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Nf(t[n]))return!0}else if(typeof t=="object"){const n=Af(t),r=n.length;for(var e=0;e<r;e++)if(Nf(t[n[e]]))return!0}}return!1}function Ny(t,e){const n=[t];for(const r in e){const i=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof i<"u"&&n.push(`${r}: ${i}`)}return n.join(`
`)}class cN extends Error{constructor(e,n,r,i,s){super(Ny(e,{name:n,index:r,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=Ny(e,{name:n,index:r,operation:i,tree:s})}}const Se=cN,$i={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){let r=jf(n,this.path);r&&(r=fn(r));const i=ta(n,{op:"remove",path:this.from}).removed;return ta(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(t,e,n){const r=jf(n,this.from);return ta(n,{op:"add",path:this.path,value:fn(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Zl(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}};var dN={add:function(t,e,n){return If(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:$i.move,copy:$i.copy,test:$i.test,_get:$i._get};function jf(t,e){if(e=="")return t;var n={op:"_get",path:e};return ta(t,n),n.value}function ta(t,e,n=!1,r=!0,i=!0,s=0){if(n&&(typeof n=="function"?n(e,0,t,e.path):$f(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=jf(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=Zl(t,e.value),a.test===!1)throw new Se("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(n)throw new Se("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{r||(t=fn(t));const o=(e.path||"").split("/");let l=t,u=1,c=o.length,d,f,h;for(typeof n=="function"?h=n:h=$f;;){if(f=o[u],f&&f.indexOf("~")!=-1&&(f=uN(f)),i&&(f=="__proto__"||f=="prototype"&&u>0&&o[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[f]===void 0?d=o.slice(0,u).join("/"):u==c-1&&(d=e.path),d!==void 0&&h(e,0,t,d)),u++,Array.isArray(l)){if(f==="-")f=l.length;else{if(n&&!If(f))throw new Se("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);If(f)&&(f=~~f)}if(u>=c){if(n&&e.op==="add"&&f>l.length)throw new Se("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);const p=dN[e.op].call(e,l,f,t);if(p.test===!1)throw new Se("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return p}}else if(u>=c){const p=$i[e.op].call(e,l,f,t);if(p.test===!1)throw new Se("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return p}if(l=l[f],n&&u<c&&(!l||typeof l!="object"))throw new Se("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function Gl(t,e,n,r=!0,i=!0){if(n&&!Array.isArray(e))throw new Se("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=fn(t));const s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=ta(t,e[a],n,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function $f(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new Se("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if($i[t.op]){if(typeof t.path!="string")throw new Se("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Se('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Se("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Se("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Nf(t.value))throw new Se("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var i=t.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Se("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new Se("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=fN([a],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Se("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Se("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function fN(t,e,n){try{if(!Array.isArray(t))throw new Se("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Gl(fn(e),fn(t),n||!0);else{n=n||$f;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(i){if(i instanceof Se)return i;throw i}}function Zl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),i,s,a;if(n&&r){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!Zl(t[i],e[i]))return!1;return!0}if(n!=r)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!Zl(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function px(t,e,n,r,i){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var s=Af(e),a=Af(t),o=!1,l=a.length-1;l>=0;l--){var u=a[l],c=t[u];if(Of(e,u)&&!(e[u]===void 0&&c!==void 0&&Array.isArray(e)===!1)){var d=e[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?px(c,d,n,r+"/"+fi(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+fi(u),value:fn(c)}),n.push({op:"replace",path:r+"/"+fi(u),value:fn(d)}))}else Array.isArray(t)===Array.isArray(e)?(i&&n.push({op:"test",path:r+"/"+fi(u),value:fn(c)}),n.push({op:"remove",path:r+"/"+fi(u)}),o=!0):(i&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!o&&s.length==a.length))for(var l=0;l<s.length;l++){var u=s[l];!Of(t,u)&&e[u]!==void 0&&n.push({op:"add",path:r+"/"+fi(u),value:fn(e[u])})}}}function hN(t,e,n=!1){var r=[];return px(t,e,r,"",n),r}var zc={};const pN=()=>typeof window<"u"&&typeof window.document<"u",mN=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",gN=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),mx=()=>typeof Deno<"u",yN=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!mx(),vN=()=>{let t;return pN()?t="browser":yN()?t="node":mN()?t="webworker":gN()?t="jsdom":mx()?t="deno":t="other",t};let Hc;async function wN(){return Hc===void 0&&(Hc={library:"langchain-js",runtime:vN()}),Hc}function ii(t){try{return typeof process<"u"?zc==null?void 0:zc[t]:void 0}catch{return}}class _N{}class ao extends _N{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,ox(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:ii("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return ri.prototype.toJSON.call(this)}toJSONNotImplemented(){return ri.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class n extends ao{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:gt()}),Object.assign(this,e)}}return new n}}function Wc(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function bN(t){return t.replace(/[-:.]/g,"")}function xN(t,e,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return bN(`${new Date(t).toISOString().slice(0,-1)}${r}Z`)+e}function Cs(t){return typeof t._addRunToRunMap=="function"}class oo extends ao{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,n){e.child_runs.push(n)}_addRunToRunMap(e){const n=xN(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const i=this.runMap.get(r.parent_run_id);i&&(this._addChildRun(i,r),i.child_execution_order=Math.max(i.child_execution_order,r.child_execution_order),r.trace_id=i.trace_id,i.dotted_order!==void 0&&(r.dotted_order=[i.dotted_order,n].join(".")))}else r.trace_id=r.id,r.dotted_order=n;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const n=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);n?n.child_execution_order=Math.max(n.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const n=e!==void 0&&this.runMap.get(e);return n?n.child_execution_order+1:1}_createRunForLLMStart(e,n,r,i,s,a,o,l){const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,f={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:n},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return this._addRunToRunMap(f)}async handleLLMStart(e,n,r,i,s,a,o,l){var c,d;const u=this.runMap.get(r)??this._createRunForLLMStart(e,n,r,i,s,a,o,l);return await((c=this.onRunCreate)==null?void 0:c.call(this,u)),await((d=this.onLLMStart)==null?void 0:d.call(this,u)),u}_createRunForChatModelStart(e,n,r,i,s,a,o,l){const u=this._getExecutionOrder(i),c=Date.now(),d=o?{...s,metadata:o}:s,f={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:n},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:d??{},tags:a||[]};return this._addRunToRunMap(f)}async handleChatModelStart(e,n,r,i,s,a,o,l){var c,d;const u=this.runMap.get(r)??this._createRunForChatModelStart(e,n,r,i,s,a,o,l);return await((c=this.onRunCreate)==null?void 0:c.call(this,u)),await((d=this.onLLMStart)==null?void 0:d.call(this,u)),u}async handleLLMEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleLLMError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="llm")throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}_createRunForChainStart(e,n,r,i,s,a,o,l){const u=this._getExecutionOrder(i),c=Date.now(),d={id:r,name:l??e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:n,execution_order:u,child_execution_order:u,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(d)}async handleChainStart(e,n,r,i,s,a,o,l){var c,d;const u=this.runMap.get(r)??this._createRunForChainStart(e,n,r,i,s,a,o,l);return await((c=this.onRunCreate)==null?void 0:c.call(this,u)),await((d=this.onChainStart)==null?void 0:d.call(this,u)),u}async handleChainEnd(e,n,r,i,s){var o;const a=this.runMap.get(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Wc(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Wc(s.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,n,r,i,s){var o;const a=this.runMap.get(n);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Wc(s.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,n,r,i,s,a,o){const l=this._getExecutionOrder(i),u=Date.now(),c={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:n},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleToolStart(e,n,r,i,s,a,o){var u,c;const l=this.runMap.get(r)??this._createRunForToolStart(e,n,r,i,s,a,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onToolStart)==null?void 0:c.call(this,l)),l}async handleToolEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleToolError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,n){var s;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const i=r;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,r))}async handleAgentEnd(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,r)))}_createRunForRetrieverStart(e,n,r,i,s,a,o){const l=this._getExecutionOrder(i),u=Date.now(),c={id:r,name:o??e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:n},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,n,r,i,s,a,o){var u,c;const l=this.runMap.get(r)??this._createRunForRetrieverStart(e,n,r,i,s,a,o);return await((u=this.onRunCreate)==null?void 0:u.call(this,l)),await((c=this.onRetrieverStart)==null?void 0:c.call(this,l)),l}async handleRetrieverEnd(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,n){var i;const r=this.runMap.get(n);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,r)),await this._endTrace(r),r}async handleText(e,n){var i;const r=this.runMap.get(n);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,r)))}async handleLLMNewToken(e,n,r,i,s,a){var l;const o=this.runMap.get(r);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:n,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e,{chunk:a==null?void 0:a.chunk})),o}}var gx={},yx={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new i(c,d||l,f),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},o.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,f,h,p){var v=n?n+u:u;if(!this._events[v])return!1;var w=this._events[v],m=arguments.length,g,y;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),m){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,c),!0;case 3:return w.fn.call(w.context,c,d),!0;case 4:return w.fn.call(w.context,c,d,f),!0;case 5:return w.fn.call(w.context,c,d,f,h),!0;case 6:return w.fn.call(w.context,c,d,f,h,p),!0}for(y=1,g=new Array(m-1);y<m;y++)g[y-1]=arguments[y];w.fn.apply(w.context,g)}else{var b=w.length,x;for(y=0;y<b;y++)switch(w[y].once&&this.removeListener(u,w[y].fn,void 0,!0),m){case 1:w[y].fn.call(w[y].context);break;case 2:w[y].fn.call(w[y].context,c);break;case 3:w[y].fn.call(w[y].context,c,d);break;case 4:w[y].fn.call(w[y].context,c,d,f);break;default:if(!g)for(x=1,g=new Array(m-1);x<m;x++)g[x-1]=arguments[x];w[y].fn.apply(w[y].context,g)}}return!0},o.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,f){var h=n?n+u:u;if(!this._events[h])return this;if(!c)return a(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&a(this,h);else{for(var v=0,w=[],m=p.length;v<m;v++)(p[v].fn!==c||f&&!p[v].once||d&&p[v].context!==d)&&w.push(p[v]);w.length?this._events[h]=w.length===1?w[0]:w:a(this,h)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(yx);var SN=yx.exports,Uu={exports:{}},EN=(t,e)=>(e=e||(()=>{}),t.then(n=>new Promise(r=>{r(e())}).then(()=>n),n=>new Promise(r=>{r(e())}).then(()=>{throw n})));const TN=EN;class vx extends Error{constructor(e){super(e),this.name="TimeoutError"}}const wx=(t,e,n)=>new Promise((r,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){r(t);return}const s=setTimeout(()=>{if(typeof n=="function"){try{r(n())}catch(l){i(l)}return}const a=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,o=n instanceof Error?n:new vx(a);typeof t.cancel=="function"&&t.cancel(),i(o)},e);TN(t.then(r,i),()=>{clearTimeout(s)})});Uu.exports=wx;Uu.exports.default=wx;Uu.exports.TimeoutError=vx;var PN=Uu.exports,Ep={},Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});function kN(t,e,n){let r=0,i=t.length;for(;i>0;){const s=i/2|0;let a=r+s;n(t[a],e)<=0?(r=++a,i-=s+1):i=s}return r}Tp.default=kN;Object.defineProperty(Ep,"__esModule",{value:!0});const CN=Tp;class RN{constructor(){this._queue=[]}enqueue(e,n){n=Object.assign({priority:0},n);const r={priority:n.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(r);return}const i=CN.default(this._queue,r,(s,a)=>a.priority-s.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}Ep.default=RN;Object.defineProperty(gx,"__esModule",{value:!0});const ON=SN,_x=PN,AN=Ep,jo=()=>{},IN=new _x.TimeoutError;class NN extends ON{constructor(e){var n,r,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=jo,this._resolveIdle=jo,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:AN.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=jo,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=jo,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&n.timeout===void 0?e():_x.default(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(IN)});r(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(s,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var Nn=gx.default=NN;const jN=(...t)=>fetch(...t),$N=Symbol.for("ls:fetch_implementation"),H=()=>globalThis[$N]??jN,LN=[400,401,403,404,405,406,407,408],DN=[409];let jy=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in Nn?this.queue=new Nn.default({concurrency:this.maxConcurrency}):this.queue=new Nn({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...n){const r=this.onFailedResponseHook;return this.queue.add(()=>Wl(()=>e(...n).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;const s=i==null?void 0:i.response,a=s==null?void 0:s.status;if(a){if(LN.includes(+a))throw i;if(DN.includes(+a))return;r&&await r(s)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>H()(...e).then(n=>n.ok?n:Promise.reject(n)))}};function $y(t){return typeof(t==null?void 0:t._getType)=="function"}function Ly(t){const e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var na={};let _n;const MN=()=>typeof window<"u"&&typeof window.document<"u",FN=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",UN=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),bx=()=>typeof Deno<"u",VN=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!bx(),BN=()=>_n||(MN()?_n="browser":VN()?_n="node":FN()?_n="webworker":UN()?_n="jsdom":bx()?_n="deno":_n="other",_n);let Gc;async function xx(){if(Gc===void 0){const t=BN(),e=WN();Gc={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:Ix,...e}}return Gc}function zN(){const t=HN()||{},e={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[r,i]of Object.entries(t))r.startsWith("LANGCHAIN_")&&typeof i=="string"&&!n.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[r]=i);return e}function HN(){try{return typeof process<"u"&&na?Object.entries(na).reduce((t,[e,n])=>(t[e]=String(n),t),{}):void 0}catch{return}}function Ur(t){try{return typeof process<"u"?na==null?void 0:na[t]:void 0}catch{return}}function $r(t){return Ur(`LANGSMITH_${t}`)||Ur(`LANGCHAIN_${t}`)}let Zc;function WN(){if(Zc!==void 0)return Zc;const t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const n of t){const r=Ur(n);r!==void 0&&(e[n]=r)}return Zc=e,e}function ee(t,e){if(!ea(t)){const n=e!==void 0?`Invalid UUID for ${e}: ${t}`:`Invalid UUID: ${t}`;throw new Error(n)}return t}const Dy={};function Sx(t){Dy[t]||(console.warn(t),Dy[t]=!0)}var Lf={exports:{}};const GN="2.0.0",Ex=256,ZN=Number.MAX_SAFE_INTEGER||9007199254740991,qN=16,KN=Ex-6,JN=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Vu={MAX_LENGTH:Ex,MAX_SAFE_COMPONENT_LENGTH:qN,MAX_SAFE_BUILD_LENGTH:KN,MAX_SAFE_INTEGER:ZN,RELEASE_TYPES:JN,SEMVER_SPEC_VERSION:GN,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},qc={};const XN=typeof process=="object"&&qc&&qc.NODE_DEBUG&&/\bsemver\b/i.test(qc.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var Bu=XN;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Vu,s=Bu;e=t.exports={};const a=e.re=[],o=e.safeRe=[],l=e.src=[],u=e.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=v=>{for(const[w,m]of f)v=v.split(`${w}*`).join(`${w}{0,${m}}`).split(`${w}+`).join(`${w}{1,${m}}`);return v},p=(v,w,m)=>{const g=h(w),y=c++;s(v,y,w),u[v]=y,l[y]=w,a[y]=new RegExp(w,m?"g":void 0),o[y]=new RegExp(g,m?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Lf,Lf.exports);var lo=Lf.exports;const QN=Object.freeze({loose:!0}),YN=Object.freeze({}),ej=t=>t?typeof t!="object"?QN:t:YN;var Pp=ej;const My=/^[0-9]+$/,Tx=(t,e)=>{const n=My.test(t),r=My.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},tj=(t,e)=>Tx(e,t);var Px={compareIdentifiers:Tx,rcompareIdentifiers:tj};const $o=Bu,{MAX_LENGTH:Fy,MAX_SAFE_INTEGER:Lo}=Vu,{safeRe:Uy,t:Vy}=lo,nj=Pp,{compareIdentifiers:hi}=Px;let rj=class on{constructor(e,n){if(n=nj(n),e instanceof on){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Fy)throw new TypeError(`version is longer than ${Fy} characters`);$o("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?Uy[Vy.LOOSE]:Uy[Vy.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Lo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Lo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Lo||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<Lo)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($o("SemVer.compare",this.version,this.options,e),!(e instanceof on)){if(typeof e=="string"&&e===this.version)return 0;e=new on(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof on||(e=new on(e,this.options)),hi(this.major,e.major)||hi(this.minor,e.minor)||hi(this.patch,e.patch)}comparePre(e){if(e instanceof on||(e=new on(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=e.prerelease[n];if($o("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return hi(r,i)}while(++n)}compareBuild(e){e instanceof on||(e=new on(e,this.options));let n=0;do{const r=this.build[n],i=e.build[n];if($o("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return hi(r,i)}while(++n)}inc(e,n,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),hi(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var it=rj;const By=it,ij=(t,e,n=!1)=>{if(t instanceof By)return t;try{return new By(t,e)}catch(r){if(!n)return null;throw r}};var ms=ij;const sj=ms,aj=(t,e)=>{const n=sj(t,e);return n?n.version:null};var oj=aj;const lj=ms,uj=(t,e)=>{const n=lj(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};var cj=uj;const zy=it,dj=(t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new zy(t instanceof zy?t.version:t,n).inc(e,r,i).version}catch{return null}};var fj=dj;const Hy=ms,hj=(t,e)=>{const n=Hy(t,null,!0),r=Hy(e,null,!0),i=n.compare(r);if(i===0)return null;const s=i>0,a=s?n:r,o=s?r:n,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l)return!o.patch&&!o.minor?"major":a.patch?"patch":a.minor?"minor":"major";const c=l?"pre":"";return n.major!==r.major?c+"major":n.minor!==r.minor?c+"minor":n.patch!==r.patch?c+"patch":"prerelease"};var pj=hj;const mj=it,gj=(t,e)=>new mj(t,e).major;var yj=gj;const vj=it,wj=(t,e)=>new vj(t,e).minor;var _j=wj;const bj=it,xj=(t,e)=>new bj(t,e).patch;var Sj=xj;const Ej=ms,Tj=(t,e)=>{const n=Ej(t,e);return n&&n.prerelease.length?n.prerelease:null};var Pj=Tj;const Wy=it,kj=(t,e,n)=>new Wy(t,n).compare(new Wy(e,n));var rn=kj;const Cj=rn,Rj=(t,e,n)=>Cj(e,t,n);var Oj=Rj;const Aj=rn,Ij=(t,e)=>Aj(t,e,!0);var Nj=Ij;const Gy=it,jj=(t,e,n)=>{const r=new Gy(t,n),i=new Gy(e,n);return r.compare(i)||r.compareBuild(i)};var kp=jj;const $j=kp,Lj=(t,e)=>t.sort((n,r)=>$j(n,r,e));var Dj=Lj;const Mj=kp,Fj=(t,e)=>t.sort((n,r)=>Mj(r,n,e));var Uj=Fj;const Vj=rn,Bj=(t,e,n)=>Vj(t,e,n)>0;var zu=Bj;const zj=rn,Hj=(t,e,n)=>zj(t,e,n)<0;var Cp=Hj;const Wj=rn,Gj=(t,e,n)=>Wj(t,e,n)===0;var kx=Gj;const Zj=rn,qj=(t,e,n)=>Zj(t,e,n)!==0;var Cx=qj;const Kj=rn,Jj=(t,e,n)=>Kj(t,e,n)>=0;var Rp=Jj;const Xj=rn,Qj=(t,e,n)=>Xj(t,e,n)<=0;var Op=Qj;const Yj=kx,e$=Cx,t$=zu,n$=Rp,r$=Cp,i$=Op,s$=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return Yj(t,n,r);case"!=":return e$(t,n,r);case">":return t$(t,n,r);case">=":return n$(t,n,r);case"<":return r$(t,n,r);case"<=":return i$(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var Rx=s$;const a$=it,o$=ms,{safeRe:Do,t:Mo}=lo,l$=(t,e)=>{if(t instanceof a$)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?Do[Mo.COERCEFULL]:Do[Mo.COERCE]);else{const l=e.includePrerelease?Do[Mo.COERCERTLFULL]:Do[Mo.COERCERTL];let u;for(;(u=l.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||u.index+u[0].length!==n.index+n[0].length)&&(n=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(n===null)return null;const r=n[2],i=n[3]||"0",s=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",o=e.includePrerelease&&n[6]?`+${n[6]}`:"";return o$(`${r}.${i}.${s}${a}${o}`,e)};var u$=l$;class c${constructor(){this.max=1e3,this.map=new Map}get(e){const n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}}var d$=c$,Kc,Zy;function sn(){if(Zy)return Kc;Zy=1;const t=/\s+/g;class e{constructor(N,B){if(B=i(B),N instanceof e)return N.loose===!!B.loose&&N.includePrerelease===!!B.includePrerelease?N:new e(N.raw,B);if(N instanceof s)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=N.trim().replace(t," "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(E=>!v(E[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const E of this.set)if(E.length===1&&w(E[0])){this.set=[E];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const B=this.set[N];for(let j=0;j<B.length;j++)j>0&&(this.formatted+=" "),this.formatted+=B[j].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const j=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+N,E=r.get(j);if(E)return E;const C=this.options.loose,P=C?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];N=N.replace(P,Ae(this.options.includePrerelease)),a("hyphen replace",N),N=N.replace(l[u.COMPARATORTRIM],c),a("comparator trim",N),N=N.replace(l[u.TILDETRIM],d),a("tilde trim",N),N=N.replace(l[u.CARETTRIM],f),a("caret trim",N);let U=N.split(" ").map(he=>g(he,this.options)).join(" ").split(/\s+/).map(he=>ne(he,this.options));C&&(U=U.filter(he=>(a("loose invalid filter",he,this.options),!!he.match(l[u.COMPARATORLOOSE])))),a("range list",U);const M=new Map,q=U.map(he=>new s(he,this.options));for(const he of q){if(v(he))return[he];M.set(he.value,he)}M.size>1&&M.has("")&&M.delete("");const le=[...M.values()];return r.set(j,le),le}intersects(N,B){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some(j=>m(j,B)&&N.set.some(E=>m(E,B)&&j.every(C=>E.every(P=>C.intersects(P,B)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new o(N,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(Xe(this.set[B],N,this.options))return!0;return!1}}Kc=e;const n=d$,r=new n,i=Pp,s=Hu(),a=Bu,o=it,{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=lo,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=Vu,v=$=>$.value==="<0.0.0-0",w=$=>$.value==="",m=($,N)=>{let B=!0;const j=$.slice();let E=j.pop();for(;B&&j.length;)B=j.every(C=>E.intersects(C,N)),E=j.pop();return B},g=($,N)=>(a("comp",$,N),$=T($,N),a("caret",$),$=b($,N),a("tildes",$),$=k($,N),a("xrange",$),$=V($,N),a("stars",$),$),y=$=>!$||$.toLowerCase()==="x"||$==="*",b=($,N)=>$.trim().split(/\s+/).map(B=>x(B,N)).join(" "),x=($,N)=>{const B=N.loose?l[u.TILDELOOSE]:l[u.TILDE];return $.replace(B,(j,E,C,P,U)=>{a("tilde",$,j,E,C,P,U);let M;return y(E)?M="":y(C)?M=`>=${E}.0.0 <${+E+1}.0.0-0`:y(P)?M=`>=${E}.${C}.0 <${E}.${+C+1}.0-0`:U?(a("replaceTilde pr",U),M=`>=${E}.${C}.${P}-${U} <${E}.${+C+1}.0-0`):M=`>=${E}.${C}.${P} <${E}.${+C+1}.0-0`,a("tilde return",M),M})},T=($,N)=>$.trim().split(/\s+/).map(B=>R(B,N)).join(" "),R=($,N)=>{a("caret",$,N);const B=N.loose?l[u.CARETLOOSE]:l[u.CARET],j=N.includePrerelease?"-0":"";return $.replace(B,(E,C,P,U,M)=>{a("caret",$,E,C,P,U,M);let q;return y(C)?q="":y(P)?q=`>=${C}.0.0${j} <${+C+1}.0.0-0`:y(U)?C==="0"?q=`>=${C}.${P}.0${j} <${C}.${+P+1}.0-0`:q=`>=${C}.${P}.0${j} <${+C+1}.0.0-0`:M?(a("replaceCaret pr",M),C==="0"?P==="0"?q=`>=${C}.${P}.${U}-${M} <${C}.${P}.${+U+1}-0`:q=`>=${C}.${P}.${U}-${M} <${C}.${+P+1}.0-0`:q=`>=${C}.${P}.${U}-${M} <${+C+1}.0.0-0`):(a("no pr"),C==="0"?P==="0"?q=`>=${C}.${P}.${U}${j} <${C}.${P}.${+U+1}-0`:q=`>=${C}.${P}.${U}${j} <${C}.${+P+1}.0-0`:q=`>=${C}.${P}.${U} <${+C+1}.0.0-0`),a("caret return",q),q})},k=($,N)=>(a("replaceXRanges",$,N),$.split(/\s+/).map(B=>G(B,N)).join(" ")),G=($,N)=>{$=$.trim();const B=N.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return $.replace(B,(j,E,C,P,U,M)=>{a("xRange",$,j,E,C,P,U,M);const q=y(C),le=q||y(P),he=le||y(U),ht=he;return E==="="&&ht&&(E=""),M=N.includePrerelease?"-0":"",q?E===">"||E==="<"?j="<0.0.0-0":j="*":E&&ht?(le&&(P=0),U=0,E===">"?(E=">=",le?(C=+C+1,P=0,U=0):(P=+P+1,U=0)):E==="<="&&(E="<",le?C=+C+1:P=+P+1),E==="<"&&(M="-0"),j=`${E+C}.${P}.${U}${M}`):le?j=`>=${C}.0.0${M} <${+C+1}.0.0-0`:he&&(j=`>=${C}.${P}.0${M} <${C}.${+P+1}.0-0`),a("xRange return",j),j})},V=($,N)=>(a("replaceStars",$,N),$.trim().replace(l[u.STAR],"")),ne=($,N)=>(a("replaceGTE0",$,N),$.trim().replace(l[N.includePrerelease?u.GTE0PRE:u.GTE0],"")),Ae=$=>(N,B,j,E,C,P,U,M,q,le,he,ht)=>(y(j)?B="":y(E)?B=`>=${j}.0.0${$?"-0":""}`:y(C)?B=`>=${j}.${E}.0${$?"-0":""}`:P?B=`>=${B}`:B=`>=${B}${$?"-0":""}`,y(q)?M="":y(le)?M=`<${+q+1}.0.0-0`:y(he)?M=`<${q}.${+le+1}.0-0`:ht?M=`<=${q}.${le}.${he}-${ht}`:$?M=`<${q}.${le}.${+he+1}-0`:M=`<=${M}`,`${B} ${M}`.trim()),Xe=($,N,B)=>{for(let j=0;j<$.length;j++)if(!$[j].test(N))return!1;if(N.prerelease.length&&!B.includePrerelease){for(let j=0;j<$.length;j++)if(a($[j].semver),$[j].semver!==s.ANY&&$[j].semver.prerelease.length>0){const E=$[j].semver;if(E.major===N.major&&E.minor===N.minor&&E.patch===N.patch)return!0}return!1}return!0};return Kc}var Jc,qy;function Hu(){if(qy)return Jc;qy=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(c,d){if(d=n(d),c instanceof e){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new o(f[2],this.options.loose):this.semver=t}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===t||c===t)return!0;if(typeof c=="string")try{c=new o(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Jc=e;const n=Pp,{safeRe:r,t:i}=lo,s=Rx,a=Bu,o=it,l=sn();return Jc}const f$=sn(),h$=(t,e,n)=>{try{e=new f$(e,n)}catch{return!1}return e.test(t)};var Wu=h$;const p$=sn(),m$=(t,e)=>new p$(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));var g$=m$;const y$=it,v$=sn(),w$=(t,e,n)=>{let r=null,i=null,s=null;try{s=new v$(e,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new y$(r,n))}),r};var _$=w$;const b$=it,x$=sn(),S$=(t,e,n)=>{let r=null,i=null,s=null;try{s=new x$(e,n)}catch{return null}return t.forEach(a=>{s.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new b$(r,n))}),r};var E$=S$;const Xc=it,T$=sn(),Ky=zu,P$=(t,e)=>{t=new T$(t,e);let n=new Xc("0.0.0");if(t.test(n)||(n=new Xc("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){const i=t.set[r];let s=null;i.forEach(a=>{const o=new Xc(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||Ky(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!n||Ky(n,s))&&(n=s)}return n&&t.test(n)?n:null};var k$=P$;const C$=sn(),R$=(t,e)=>{try{return new C$(t,e).range||"*"}catch{return null}};var O$=R$;const A$=it,Ox=Hu(),{ANY:I$}=Ox,N$=sn(),j$=Wu,Jy=zu,Xy=Cp,$$=Op,L$=Rp,D$=(t,e,n,r)=>{t=new A$(t,r),e=new N$(e,r);let i,s,a,o,l;switch(n){case">":i=Jy,s=$$,a=Xy,o=">",l=">=";break;case"<":i=Xy,s=L$,a=Jy,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(j$(t,e,r))return!1;for(let u=0;u<e.set.length;++u){const c=e.set[u];let d=null,f=null;if(c.forEach(h=>{h.semver===I$&&(h=new Ox(">=0.0.0")),d=d||h,f=f||h,i(h.semver,d.semver,r)?d=h:a(h.semver,f.semver,r)&&(f=h)}),d.operator===o||d.operator===l||(!f.operator||f.operator===o)&&s(t,f.semver))return!1;if(f.operator===l&&a(t,f.semver))return!1}return!0};var Ap=D$;const M$=Ap,F$=(t,e,n)=>M$(t,e,">",n);var U$=F$;const V$=Ap,B$=(t,e,n)=>V$(t,e,"<",n);var z$=B$;const Qy=sn(),H$=(t,e,n)=>(t=new Qy(t,n),e=new Qy(e,n),t.intersects(e,n));var W$=H$;const G$=Wu,Z$=rn;var q$=(t,e,n)=>{const r=[];let i=null,s=null;const a=t.sort((c,d)=>Z$(c,d,n));for(const c of a)G$(c,e,n)?(s=c,i||(i=c)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);const o=[];for(const[c,d]of r)c===d?o.push(c):!d&&c===a[0]?o.push("*"):d?c===a[0]?o.push(`<=${d}`):o.push(`${c} - ${d}`):o.push(`>=${c}`);const l=o.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e};const Yy=sn(),Ip=Hu(),{ANY:Qc}=Ip,Rs=Wu,Np=rn,K$=(t,e,n={})=>{if(t===e)return!0;t=new Yy(t,n),e=new Yy(e,n);let r=!1;e:for(const i of t.set){for(const s of e.set){const a=X$(i,s,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},J$=[new Ip(">=0.0.0-0")],ev=[new Ip(">=0.0.0")],X$=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Qc){if(e.length===1&&e[0].semver===Qc)return!0;n.includePrerelease?t=J$:t=ev}if(e.length===1&&e[0].semver===Qc){if(n.includePrerelease)return!0;e=ev}const r=new Set;let i,s;for(const h of t)h.operator===">"||h.operator===">="?i=tv(i,h,n):h.operator==="<"||h.operator==="<="?s=nv(s,h,n):r.add(h.semver);if(r.size>1)return null;let a;if(i&&s){if(a=Np(i.semver,s.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const h of r){if(i&&!Rs(h,String(i),n)||s&&!Rs(h,String(s),n))return null;for(const p of e)if(!Rs(h,String(p),n))return!1;return!0}let o,l,u,c,d=s&&!n.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;d&&d.prerelease.length===1&&s.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(const h of e){if(c=c||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator===">"||h.operator===">="){if(o=tv(i,h,n),o===h&&o!==i)return!1}else if(i.operator===">="&&!Rs(i.semver,String(h),n))return!1}if(s){if(d&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===d.major&&h.semver.minor===d.minor&&h.semver.patch===d.patch&&(d=!1),h.operator==="<"||h.operator==="<="){if(l=nv(s,h,n),l===h&&l!==s)return!1}else if(s.operator==="<="&&!Rs(s.semver,String(h),n))return!1}if(!h.operator&&(s||i)&&a!==0)return!1}return!(i&&u&&!s&&a!==0||s&&c&&!i&&a!==0||f||d)},tv=(t,e,n)=>{if(!t)return e;const r=Np(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},nv=(t,e,n)=>{if(!t)return e;const r=Np(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};var Q$=K$;const Yc=lo,rv=Vu,Y$=it,iv=Px,eL=ms,tL=oj,nL=cj,rL=fj,iL=pj,sL=yj,aL=_j,oL=Sj,lL=Pj,uL=rn,cL=Oj,dL=Nj,fL=kp,hL=Dj,pL=Uj,mL=zu,gL=Cp,yL=kx,vL=Cx,wL=Rp,_L=Op,bL=Rx,xL=u$,SL=Hu(),EL=sn(),TL=Wu,PL=g$,kL=_$,CL=E$,RL=k$,OL=O$,AL=Ap,IL=U$,NL=z$,jL=W$,$L=q$,LL=Q$;var sv={parse:eL,valid:tL,clean:nL,inc:rL,diff:iL,major:sL,minor:aL,patch:oL,prerelease:lL,compare:uL,rcompare:cL,compareLoose:dL,compareBuild:fL,sort:hL,rsort:pL,gt:mL,lt:gL,eq:yL,neq:vL,gte:wL,lte:_L,cmp:bL,coerce:xL,Comparator:SL,Range:EL,satisfies:TL,toComparators:PL,maxSatisfying:kL,minSatisfying:CL,minVersion:RL,validRange:OL,outside:AL,gtr:IL,ltr:NL,intersects:jL,simplifyRange:$L,subset:LL,SemVer:Y$,re:Yc.re,src:Yc.src,tokens:Yc.t,SEMVER_SPEC_VERSION:rv.SEMVER_SPEC_VERSION,RELEASE_TYPES:rv.RELEASE_TYPES,compareIdentifiers:iv.compareIdentifiers,rcompareIdentifiers:iv.rcompareIdentifiers};function DL(t,e){const n=sv.parse(t),r=sv.parse(e);if(!n||!r)throw new Error("Invalid version format.");return n.compare(r)>=0}function Bn(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);const[e,n]=t.split(":"),r=n||"latest";if(e.includes("/")){const[i,s]=e.split("/",2);if(!i||!s)throw new Error(`Invalid identifier format: ${t}`);return[i,s,r]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,r]}}class ML extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function Q(t,e,n){let r;if(t.ok){n&&(r=await t.text());return}r=await t.text();const i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${r}`;throw t.status===409?new ML(i):new Error(i)}var av="[...]",FL={result:"[Circular]"},ql=[],Li=[];function UL(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Os(t,e,n,r){typeof r>"u"&&(r=UL()),Df(t,"",0,[],void 0,0,r);var i;try{Li.length===0?i=JSON.stringify(t,e,n):i=JSON.stringify(t,VL(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;ql.length!==0;){var s=ql.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function ed(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),ql.push([r,n,e,i])):Li.push([e,n,t]):(r[n]=t,ql.push([r,n,e]))}function Df(t,e,n,r,i,s,a){s+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t){ed(FL,t,e,i);return}if(typeof a.depthLimit<"u"&&s>a.depthLimit){ed(av,t,e,i);return}if(typeof a.edgesLimit<"u"&&n+1>a.edgesLimit){ed(av,t,e,i);return}if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)Df(t[o],o,o,r,t,s,a);else{var l=Object.keys(t);for(o=0;o<l.length;o++){var u=l[o];Df(t[u],u,o,r,t,s,a)}}r.pop()}}function VL(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Li.length>0)for(var r=0;r<Li.length;r++){var i=Li[r];if(i[1]===e&&i[0]===n){n=i[2],Li.splice(r,1);break}}return t.call(this,e,n)}}async function ov(t){const e=await xx(),n=zN();return t.map(r=>{const i=r.extra??{},s=i.metadata;return r.extra={...i,runtime:{...e,...i==null?void 0:i.runtime},metadata:{...n,...n.revision_id||r.revision_id?{revision_id:r.revision_id??n.revision_id}:{},...s}},r})}const BL=()=>{const t=$r("TRACING_SAMPLING_RATE");if(t===void 0)return;const e=parseFloat(t);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},zL=t=>{const n=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return n==="localhost"||n==="127.0.0.1"||n==="::1"};async function HL(t){const e=[];for await(const n of t)e.push(n);return e}function td(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const WL=async t=>{if((t==null?void 0:t.status)===429){const e=parseInt(t.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(n=>setTimeout(n,e)),!0}return!1};class GL{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(e){return new Promise(n=>{this.items.push([e,n])})}pop(e){if(e<1)throw new Error("Number of items to pop off may not be less than 1.");const n=[];for(;n.length<e&&this.items.length;){const r=this.items.shift();if(r)n.push(r);else break}return[n.map(r=>r[0]),()=>n.forEach(r=>r[1]())]}}const ZL=20971520;class Ha{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new GL}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n=Ha.getDefaultClientConfig();this.tracingSampleRate=BL(),this.apiUrl=td(e.apiUrl??n.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=td(e.apiKey??n.apiKey),this.webUrl=td(e.webUrl??n.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??12e3,this.caller=new jy(e.callerOptions??{}),this.batchIngestCaller=new jy({...e.callerOptions??{},onFailedResponseHook:WL}),this.hideInputs=e.hideInputs??e.anonymizer??n.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??n.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.pendingAutoBatchedRunLimit=e.pendingAutoBatchedRunLimit??this.pendingAutoBatchedRunLimit,this.fetchOptions=e.fetchOptions||{}}static getDefaultClientConfig(){const e=$r("API_KEY"),n=$r("ENDPOINT")??"https://api.smith.langchain.com",r=$r("HIDE_INPUTS")==="true",i=$r("HIDE_OUTPUTS")==="true";return{apiUrl:n,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:zL(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${Ix}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const n={...e};return n.inputs!==void 0&&(n.inputs=this.processInputs(n.inputs)),n.outputs!==void 0&&(n.outputs=this.processOutputs(n.outputs)),n}async _getResponse(e,n){const r=(n==null?void 0:n.toString())??"",i=`${this.apiUrl}${e}?${r}`,s=await this.caller.call(H(),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(s,`Failed to fetch ${e}`),s}async _get(e,n){return(await this._getResponse(e,n)).json()}async*_getPaginated(e,n=new URLSearchParams,r){let i=Number(n.get("offset"))||0;const s=Number(n.get("limit"))||100;for(;;){n.set("offset",String(i)),n.set("limit",String(s));const a=`${this.apiUrl}${e}?${n}`,o=await this.caller.call(H(),a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(o,`Failed to fetch ${e}`);const l=r?r(await o.json()):await o.json();if(l.length===0||(yield l,l.length<s))break;i+=l.length}}async*_getCursorPaginatedList(e,n=null,r="POST",i="runs"){const s=n?{...n}:{};for(;;){const o=await(await this.caller.call(H(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(s)})).json();if(!o||!o[i])break;yield o[i];const l=o.cursors;if(!l||!l.next)break;s.cursor=l.next}}_filterForSampling(e,n=!1){if(this.tracingSampleRate===void 0)return e;if(n){const r=[];for(const i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):r.push(i);return r}else{const r=[];for(const i of e)i.id!==i.trace_id&&!this.filteredPostUuids.has(i.trace_id)||Math.random()<this.tracingSampleRate?r.push(i):this.filteredPostUuids.add(i.id);return r}}async drainAutoBatchQueue(){for(;this.autoBatchQueue.size>=0;){const[e,n]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!e.length){n();return}try{await this.batchIngestRuns({runCreates:e.filter(r=>r.action==="create").map(r=>r.item),runUpdates:e.filter(r=>r.action==="update").map(r=>r.item)})}finally{n()}}}async processRunOperation(e,n){const r=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;const i=this.autoBatchQueue.push(e);return(n||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&await this.drainAutoBatchQueue().catch(console.error),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)},r?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),i}async _getServerInfo(){const e=await H()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(e,"get server info"),e.json()}async batchEndpointIsSupported(){try{this.serverInfo=await this._getServerInfo()}catch{return!1}return!0}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async createRun(e){if(!this._filterForSampling([e]).length)return;const n={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const i=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}const s=await ov([i]),a=await this.caller.call(H(),`${this.apiUrl}/runs`,{method:"POST",headers:n,body:Os(s[0]),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(a,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:n}){var u,c;if(e===void 0&&n===void 0)return;let r=(e==null?void 0:e.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[],i=(n==null?void 0:n.map(d=>this.prepareRunCreateOrUpdateInputs(d)))??[];if(r.length>0&&i.length>0){const d=r.reduce((h,p)=>(p.id&&(h[p.id]=p),h),{}),f=[];for(const h of i)h.id!==void 0&&d[h.id]?d[h.id]={...d[h.id],...h}:f.push(h);r=Object.values(d),i=f}const s={post:this._filterForSampling(r),patch:this._filterForSampling(i,!0)};if(!s.post.length&&!s.patch.length)return;if(r=await ov(r),this.batchEndpointSupported===void 0&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(const d of s.post)await this.createRun(d);for(const d of s.patch)d.id!==void 0&&await this.updateRun(d.id,d);return}const a=((c=(u=this.serverInfo)==null?void 0:u.batch_ingest_config)==null?void 0:c.size_limit_bytes)??ZL,o={post:[],patch:[]};let l=0;for(const d of["post","patch"]){const f=d,h=s[f].reverse();let p=h.pop();for(;p!==void 0;){const v=Os(p);l>0&&l+v.length>a&&(await this._postBatchIngestRuns(Os(o)),l=0,o.post=[],o.patch=[]),l+=v.length,o[f].push(p),p=h.pop()}}(o.post.length>0||o.patch.length>0)&&await this._postBatchIngestRuns(Os(o))}async _postBatchIngestRuns(e){const n={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(H(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:n,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(r,"batch create run",!0)}async updateRun(e,n){ee(e),n.inputs&&(n.inputs=this.processInputs(n.inputs)),n.outputs&&(n.outputs=this.processOutputs(n.outputs));const r={...n,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(n.end_time!==void 0&&r.parent_run_id===void 0){await this.processRunOperation({action:"update",item:r},!0);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const i={...this.headers,"Content-Type":"application/json"},s=await this.caller.call(H(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:Os(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(s,"update run",!0)}async readRun(e,{loadChildRuns:n}={loadChildRuns:!1}){ee(e);let r=await this._get(`/runs/${e}`);return n&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:n,projectOpts:r}){if(n!==void 0){let i;n.session_id?i=n.session_id:r!=null&&r.projectName?i=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?i=r==null?void 0:r.projectId:i=(await this.readProject({projectName:$r("PROJECT")||"default"})).id;const s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${n.id}?poll=true`}else if(e!==void 0){const i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const n=await HL(this.listRuns({id:e.child_run_ids})),r={},i={};n.sort((s,a)=>((s==null?void 0:s.dotted_order)??"").localeCompare((a==null?void 0:a.dotted_order)??""));for(const s of n){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in r||(r[s.parent_run_id]=[]),r[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=r[e.id]||[];for(const s in r)s!==e.id&&(i[s].child_runs=r[s]);return e}async*listRuns(e){const{projectId:n,projectName:r,parentRunId:i,traceId:s,referenceExampleId:a,startTime:o,executionOrder:l,isRoot:u,runType:c,error:d,id:f,query:h,filter:p,traceFilter:v,treeFilter:w,limit:m,select:g}=e;let y=[];if(n&&(y=Array.isArray(n)?n:[n]),r){const R=Array.isArray(r)?r:[r],k=await Promise.all(R.map(G=>this.readProject({projectName:G}).then(V=>V.id)));y.push(...k)}const b=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],x={session:y.length?y:null,run_type:c,reference_example:a,query:h,filter:p,trace_filter:v,tree_filter:w,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:d,id:f,limit:m,trace:s,select:g||b,is_root:u};let T=0;for await(const R of this._getCursorPaginatedList("/runs/query",x))if(m){if(T>=m)break;if(R.length+T>m){yield*R.slice(0,m-T);break}T+=R.length,yield*R}else yield*R}async getRunStats({id:e,trace:n,parentRun:r,runType:i,projectNames:s,projectIds:a,referenceExampleIds:o,startTime:l,endTime:u,error:c,query:d,filter:f,traceFilter:h,treeFilter:p,isRoot:v,dataSourceType:w}){let m=a||[];s&&(m=[...a||[],...await Promise.all(s.map(T=>this.readProject({projectName:T}).then(R=>R.id)))]);const y=Object.fromEntries(Object.entries({id:e,trace:n,parent_run:r,run_type:i,session:m,reference_example:o,start_time:l,end_time:u,error:c,query:d,filter:f,trace_filter:h,tree_filter:p,is_root:v,data_source_type:w}).filter(([T,R])=>R!==void 0));return await(await this.caller.call(H(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(y),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:n}={}){const r={run_id:e,share_token:n||gt()};ee(e);const s=await(await this.caller.call(H(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){ee(e);const n=await this.caller.call(H(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(n,"unshare run",!0)}async readRunSharedLink(e){ee(e);const r=await(await this.caller.call(H(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:n}={}){const r=new URLSearchParams({share_token:e});if(n!==void 0)for(const a of n)r.append("id",a);return ee(e),await(await this.caller.call(H(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id),ee(e);const i=await(await this.caller.call(H(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,n){if(!e&&!n)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:n})).id);const r={dataset_id:e};ee(e);const s=await(await this.caller.call(H(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){ee(e);const n=await this.caller.call(H(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(n,"unshare dataset",!0)}async readSharedDataset(e){return ee(e),await(await this.caller.call(H(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,n){const r={};n!=null&&n.exampleIds&&(r.id=n.exampleIds);const i=new URLSearchParams;Object.entries(r).forEach(([o,l])=>{Array.isArray(l)?l.forEach(u=>i.append(o,u)):i.append(o,l)});const s=await this.caller.call(H(),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await s.json();if(!s.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${s.status}
Message: ${a.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${s.status} ${s.statusText}`);return a.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:s=null,referenceDatasetId:a=null}){const o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,u=s||{};r&&(u.metadata=r);const c={name:e,extra:u,description:n};a!==null&&(c.reference_dataset_id=a);const d=await this.caller.call(H(),l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(d,"create project"),await d.json()}async updateProject(e,{name:n=null,description:r=null,metadata:i=null,projectExtra:s=null,endTime:a=null}){const o=`${this.apiUrl}/sessions/${e}`;let l=s;i&&(l={...l||{},metadata:i});const u={name:n,extra:l,description:r,end_time:a?new Date(a).toISOString():null},c=await this.caller.call(H(),o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:n}){let r="/sessions";const i=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ee(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide projectName or projectId");const s=await this.caller.call(H(),`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const a=await s.json();return s.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:n,includeStats:r}){let i="/sessions";const s=new URLSearchParams;if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)ee(e),i+=`/${e}`;else if(n!==void 0)s.append("name",n);else throw new Error("Must provide projectName or projectId");r!==void 0&&s.append("include_stats",r.toString());const a=await this._get(i,s);let o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${n}] not found`);o=a[0]}else o=a;return o}async getProjectUrl({projectId:e,projectName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:n}){if(e===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const n of this._getPaginated("/sessions",e))return this._tenantId=n[0].tenant_id,n[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:s,referenceFree:a,metadata:o}={}){const l=new URLSearchParams;if(e!==void 0)for(const u of e)l.append("id",u);if(n!==void 0&&l.append("name",n),r!==void 0&&l.append("name_contains",r),i!==void 0)l.append("reference_dataset",i);else if(s!==void 0){const u=await this.readDataset({datasetName:s});l.append("reference_dataset",u.id)}a!==void 0&&l.append("reference_free",a.toString()),o!==void 0&&l.append("metadata",JSON.stringify(o));for await(const u of this._getPaginated("/sessions",l))yield*u}async deleteProject({projectId:e,projectName:n}){let r;if(e===void 0&&n===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&n!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:n})).id:r=e,ee(r);const i=await this.caller.call(H(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(i,`delete session ${r} (${n})`,!0)}async uploadCsv({csvFile:e,fileName:n,inputKeys:r,outputKeys:i,description:s,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",e,n),r.forEach(f=>{u.append("input_keys",f)}),i.forEach(f=>{u.append("output_keys",f)}),s&&u.append("description",s),a&&u.append("data_type",a),o&&u.append("name",o);const c=await this.caller.call(H(),l,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(c,"upload CSV"),await c.json()}async createDataset(e,{description:n,dataType:r,inputsSchema:i,outputsSchema:s,metadata:a}={}){const o={name:e,description:n,extra:a?{metadata:a}:void 0};r&&(o.data_type=r),i&&(o.inputs_schema_definition=i),s&&(o.outputs_schema_definition=s);const l=await this.caller.call(H(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(l,"create dataset"),await l.json()}async readDataset({datasetId:e,datasetName:n}){let r="/datasets";const i=new URLSearchParams({limit:"1"});if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)ee(e),r+=`/${e}`;else if(n!==void 0)i.append("name",n);else throw new Error("Must provide datasetName or datasetId");const s=await this._get(r,i);let a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${n}] not found`);a=s[0]}else a=s;return a}async hasDataset({datasetId:e,datasetName:n}){try{return await this.readDataset({datasetId:e,datasetName:n}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:n,fromVersion:r,toVersion:i}){let s=e;if(s===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:n})).id);const a=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${s}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:n}){const r="/datasets";if(e===void 0)if(n!==void 0)e=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:s,metadata:a}={}){const o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:n.toString()});if(r!==void 0)for(const u of r)l.append("id",u);i!==void 0&&l.append("name",i),s!==void 0&&l.append("name_contains",s),a!==void 0&&l.append("metadata",JSON.stringify(a));for await(const u of this._getPaginated(o,l))yield*u}async updateDataset(e){const{datasetId:n,datasetName:r,...i}=e;if(!n&&!r)throw new Error("Must provide either datasetName or datasetId");const s=n??(await this.readDataset({datasetName:r})).id;ee(s);const a=await this.caller.call(H(),`${this.apiUrl}/datasets/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(a,"update dataset"),await a.json()}async deleteDataset({datasetId:e,datasetName:n}){let r="/datasets",i=e;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(n!==void 0&&(i=(await this.readDataset({datasetName:n})).id),i!==void 0)ee(i),r+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");const s=await this.caller.call(H(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(s,`delete ${r}`),await s.json()}async indexDataset({datasetId:e,datasetName:n,tag:r}){let i=e;if(!i&&!n)throw new Error("Must provide either datasetName or datasetId");if(i&&n)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:n})).id),ee(i);const s={tag:r},a=await this.caller.call(H(),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(a,"index dataset"),await a.json()}async similarExamples(e,n,r,{filter:i}={}){const s={limit:r,inputs:e};i!==void 0&&(s.filter=i),ee(n);const a=await this.caller.call(H(),`${this.apiUrl}/datasets/${n}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(a,"fetch similar examples"),(await a.json()).examples}async createExample(e,n,{datasetId:r,datasetName:i,createdAt:s,exampleId:a,metadata:o,split:l,sourceRunId:u}){let c=r;if(c===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(c!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");c===void 0&&(c=(await this.readDataset({datasetName:i})).id);const d=s||new Date,f={dataset_id:c,inputs:e,outputs:n,created_at:d==null?void 0:d.toISOString(),id:a,metadata:o,split:l,source_run_id:u},h=await this.caller.call(H(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(h,"create example"),await h.json()}async createExamples(e){const{inputs:n,outputs:r,metadata:i,sourceRunIds:s,exampleIds:a,datasetId:o,datasetName:l}=e;let u=o;if(u===void 0&&l===void 0)throw new Error("Must provide either datasetName or datasetId");if(u!==void 0&&l!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");u===void 0&&(u=(await this.readDataset({datasetName:l})).id);const c=n.map((h,p)=>({dataset_id:u,inputs:h,outputs:r?r[p]:void 0,metadata:i?i[p]:void 0,split:e.splits?e.splits[p]:void 0,id:a?a[p]:void 0,source_run_id:s?s[p]:void 0})),d=await this.caller.call(H(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(d,"create examples"),await d.json()}async createLLMExample(e,n,r){return this.createExample({input:e},{output:n},r)}async createChatExample(e,n,r){const i=e.map(a=>$y(a)?Ly(a):a),s=$y(n)?Ly(n):n;return this.createExample({input:i},{output:s},r)}async readExample(e){ee(e);const n=`/examples/${e}`;return await this._get(n)}async*listExamples({datasetId:e,datasetName:n,exampleIds:r,asOf:i,splits:s,inlineS3Urls:a,metadata:o,limit:l,offset:u,filter:c}={}){let d;if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)d=e;else if(n!==void 0)d=(await this.readDataset({datasetName:n})).id;else throw new Error("Must provide a datasetName or datasetId");const f=new URLSearchParams({dataset:d}),h=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;h&&f.append("as_of",h);const p=a??!0;if(f.append("inline_s3_urls",p.toString()),r!==void 0)for(const w of r)f.append("id",w);if(s!==void 0)for(const w of s)f.append("splits",w);if(o!==void 0){const w=JSON.stringify(o);f.append("metadata",w)}l!==void 0&&f.append("limit",l.toString()),u!==void 0&&f.append("offset",u.toString()),c!==void 0&&f.append("filter",c);let v=0;for await(const w of this._getPaginated("/examples",f)){for(const m of w)yield m,v++;if(l!==void 0&&v>=l)break}}async deleteExample(e){ee(e);const n=`/examples/${e}`,r=await this.caller.call(H(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(r,`delete ${n}`),await r.json()}async updateExample(e,n){ee(e);const r=await this.caller.call(H(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(r,"update example"),await r.json()}async updateExamples(e){const n=await this.caller.call(H(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(n,"update examples"),await n.json()}async listDatasetSplits({datasetId:e,datasetName:n,asOf:r}){let i;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:n})).id:i=e,ee(i);const s=new URLSearchParams,a=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return a&&s.append("as_of",a),await this._get(`/datasets/${i}/splits`,s)}async updateDatasetSplits({datasetId:e,datasetName:n,splitName:r,exampleIds:i,remove:s=!1}){let a;if(e===void 0&&n===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:n})).id:a=e,ee(a);const o={split_name:r,examples:i.map(u=>(ee(u),u)),remove:s},l=await this.caller.call(H(),`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(l,"update dataset splits",!0)}async evaluateRun(e,n,{sourceInfo:r,loadChildRuns:i,referenceExample:s}={loadChildRuns:!1}){Sx("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(s=await this.readExample(a.reference_example_id));const o=await n.evaluateRun(a,s),[l,u]=await this._logEvaluationFeedback(o,a,r);return u[0]}async createFeedback(e,n,{score:r,value:i,correction:s,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c,feedbackConfig:d,projectId:f,comparativeExperimentId:h}){var g;if(!e&&!f)throw new Error("One of runId or projectId must be provided");if(e&&f)throw new Error("Only one of runId or projectId can be provided");const p={type:l??"api",metadata:o??{}};u!==void 0&&(p==null?void 0:p.metadata)!==void 0&&!p.metadata.__run&&(p.metadata.__run={run_id:u}),(p==null?void 0:p.metadata)!==void 0&&((g=p.metadata.__run)==null?void 0:g.run_id)!==void 0&&ee(p.metadata.__run.run_id);const v={id:c??gt(),run_id:e,key:n,score:r,value:i,correction:s,comment:a,feedback_source:p,comparative_experiment_id:h,feedbackConfig:d,session_id:f},w=`${this.apiUrl}/feedback`,m=await this.caller.call(H(),w,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(m,"create feedback",!0),v}async updateFeedback(e,{score:n,value:r,correction:i,comment:s}){const a={};n!=null&&(a.score=n),r!=null&&(a.value=r),i!=null&&(a.correction=i),s!=null&&(a.comment=s),ee(e);const o=await this.caller.call(H(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(o,"update feedback",!0)}async readFeedback(e){ee(e);const n=`/feedback/${e}`;return await this._get(n)}async deleteFeedback(e){ee(e);const n=`/feedback/${e}`,r=await this.caller.call(H(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(r,`delete ${n}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:n,feedbackSourceTypes:r}={}){const i=new URLSearchParams;if(e&&i.append("run",e.join(",")),n)for(const s of n)i.append("key",s);if(r)for(const s of r)i.append("source",s);for await(const s of this._getPaginated("/feedback",i))yield*s}async createPresignedFeedbackToken(e,n,{expiration:r,feedbackConfig:i}={}){const s={run_id:e,feedback_key:n,feedback_config:i};return r?typeof r=="string"?s.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(s.expires_in=r):s.expires_in={hours:3},await(await this.caller.call(H(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:n,referenceDatasetId:r,createdAt:i,description:s,metadata:a,id:o}){var c;if(n.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const l={id:o,name:e,experiment_ids:n,reference_dataset_id:r,description:s,created_at:(c=i??new Date)==null?void 0:c.toISOString(),extra:{}};return a&&(l.extra.metadata=a),await(await this.caller.call(H(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){ee(e);const n=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",n))yield*r}_selectEvalResults(e){let n;return"results"in e?n=e.results:n=[e],n}async _logEvaluationFeedback(e,n,r){const i=this._selectEvalResults(e),s=[];for(const a of i){let o=r||{};a.evaluatorInfo&&(o={...a.evaluatorInfo,...o});let l=null;a.targetRunId?l=a.targetRunId:n&&(l=n.id),s.push(await this.createFeedback(l,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:o,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[i,s]}async logEvaluationFeedback(e,n,r){const[i]=await this._logEvaluationFeedback(e,n,r);return i}async*listAnnotationQueues(e={}){const{queueIds:n,name:r,nameContains:i,limit:s}=e,a=new URLSearchParams;n&&n.forEach((l,u)=>{ee(l,`queueIds[${u}]`),a.append("ids",l)}),r&&a.append("name",r),i&&a.append("name_contains",i),a.append("limit",(s!==void 0?Math.min(s,100):100).toString());let o=0;for await(const l of this._getPaginated("/annotation-queues",a))if(yield*l,o++,s!==void 0&&o>=s)break}async createAnnotationQueue(e){const{name:n,description:r,queueId:i}=e,s={name:n,description:r,id:i||gt()},a=await this.caller.call(H(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(s).filter(([l,u])=>u!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(a,"create annotation queue"),await a.json()}async readAnnotationQueue(e){const n=await this.listAnnotationQueues({queueIds:[e]}).next();if(n.done)throw new Error(`Annotation queue with ID ${e} not found`);return n.value}async updateAnnotationQueue(e,n){const{name:r,description:i}=n,s=await this.caller.call(H(),`${this.apiUrl}/annotation-queues/${ee(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:i}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(s,"update annotation queue")}async deleteAnnotationQueue(e){const n=await this.caller.call(H(),`${this.apiUrl}/annotation-queues/${ee(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(n,"delete annotation queue")}async addRunsToAnnotationQueue(e,n){const r=await this.caller.call(H(),`${this.apiUrl}/annotation-queues/${ee(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n.map((i,s)=>ee(i,`runIds[${s}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,n){const r=`/annotation-queues/${ee(e,"queueId")}/run`,i=await this.caller.call(H(),`${this.apiUrl}${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(i,"get run from annotation queue"),await i.json()}async _currentTenantIsOwner(e){const n=await this._getSettings();return e=="-"||n.tenant_handle===e}async _ownerConflictError(e,n){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${n}`)}async _getLatestCommitHash(e){const n=await this.caller.call(H(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();if(!n.ok){const i=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),s=new Error(`Error ${n.status}: ${n.statusText}
${i}`);throw s.statusCode=n.status,s}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,n){const[r,i,s]=Bn(e),a=await this.caller.call(H(),`${this.apiUrl}/likes/${r}/${i}`,{method:"POST",body:JSON.stringify({like:n}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(a,`${n?"like":"unlike"} prompt`),await a.json()}async _getPromptUrl(e){const[n,r,i]=Bn(e);if(await this._currentTenantIsOwner(n)){const s=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${r}/${i.substring(0,8)}?organizationId=${s.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${s.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${n}/${r}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${n}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const n of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*n}async*listPrompts(e){const n=new URLSearchParams;n.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),n.append("sort_direction","desc"),n.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&n.append("is_public",e.isPublic.toString()),e!=null&&e.query&&n.append("query",e.query);for await(const r of this._getPaginated("/repos",n,i=>i.repos))yield*r}async getPrompt(e){const[n,r,i]=Bn(e),s=await this.caller.call(H(),`${this.apiUrl}/repos/${n}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(s.status===404)return null;await Q(s,"get prompt");const a=await s.json();return a.repo?a.repo:null}async createPrompt(e,n){const r=await this._getSettings();if(n!=null&&n.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[i,s,a]=Bn(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);const o={repo_handle:s,...(n==null?void 0:n.description)&&{description:n.description},...(n==null?void 0:n.readme)&&{readme:n.readme},...(n==null?void 0:n.tags)&&{tags:n.tags},is_public:!!(n!=null&&n.isPublic)},l=await this.caller.call(H(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(l,"create prompt");const{repo:u}=await l.json();return u}async createCommit(e,n,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[i,s,a]=Bn(e),o=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${i}/${s}`):r==null?void 0:r.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(n)),parent_commit:o},u=await this.caller.call(H(),`${this.apiUrl}/commits/${i}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(u,"create commit");const c=await u.json();return this._getPromptUrl(`${i}/${s}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updatePrompt(e,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i]=Bn(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const s={};if((n==null?void 0:n.description)!==void 0&&(s.description=n.description),(n==null?void 0:n.readme)!==void 0&&(s.readme=n.readme),(n==null?void 0:n.tags)!==void 0&&(s.tags=n.tags),(n==null?void 0:n.isPublic)!==void 0&&(s.is_public=n.isPublic),(n==null?void 0:n.isArchived)!==void 0&&(s.is_archived=n.isArchived),Object.keys(s).length===0)throw new Error("No valid update options provided");const a=await this.caller.call(H(),`${this.apiUrl}/repos/${r}/${i}`,{method:"PATCH",body:JSON.stringify(s),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Q(a,"update prompt"),a.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r,i]=Bn(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("delete a prompt",n);return await(await this.caller.call(H(),`${this.apiUrl}/repos/${n}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,n){const[r,i,s]=Bn(e),a=await this._getServerInfo(),o=DL(a.version,"0.5.23");let l=s;if(!o&&s==="latest"){const d=await this._getLatestCommitHash(`${r}/${i}`);if(d)l=d;else throw new Error("No commits found")}const u=await this.caller.call(H(),`${this.apiUrl}/commits/${r}/${i}/${l}${n!=null&&n.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Q(u,"pull prompt commit");const c=await u.json();return{owner:r,repo:i,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async _pullPrompt(e,n){const r=await this.pullPromptCommit(e,{includeModel:n==null?void 0:n.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,n){return await this.promptExists(e)?n&&Object.keys(n).some(i=>i!=="object")&&await this.updatePrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}):await this.createPrompt(e,{description:n==null?void 0:n.description,readme:n==null?void 0:n.readme,tags:n==null?void 0:n.tags,isPublic:n==null?void 0:n.isPublic}),n!=null&&n.object?await this.createCommit(e,n==null?void 0:n.object,{parentCommitHash:n==null?void 0:n.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,n={}){const{sourceApiUrl:r=this.apiUrl,datasetName:i}=n,[s,a]=this.parseTokenOrUrl(e,r),o=new Ha({apiUrl:s,apiKey:"placeholder"}),l=await o.readSharedDataset(a),u=i||l.name;try{if(await this.hasDataset({datasetId:u})){console.log(`Dataset ${u} already exists in your tenant. Skipping.`);return}}catch{}const c=await o.listSharedExamples(a),d=await this.createDataset(u,{description:l.description,dataType:l.data_type||"kv",inputsSchema:l.inputs_schema_definition??void 0,outputsSchema:l.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(f=>f.inputs),outputs:c.flatMap(f=>f.outputs?[f.outputs]:[]),datasetId:d.id})}catch(f){throw console.error(`An error occurred while creating dataset ${u}. You should delete it manually.`),f}}parseTokenOrUrl(e,n,r=2,i="dataset"){try{return ee(e),[n,e]}catch{}try{const a=new URL(e).pathname.split("/").filter(o=>o!=="");if(a.length>=r){const o=a[a.length-r];return[n,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch{throw new Error(`Invalid public ${i} URL or token: ${e}`)}}}const qL=t=>!!["TRACING_V2","TRACING"].find(n=>$r(n)==="true");function KL(t){return t.replace(/[-:.]/g,"")}function JL(t,e,n=1){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return KL(`${new Date(t).toISOString().slice(0,-1)}${r}Z`)+e}class Kl{constructor(e,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=n}static fromHeader(e){const n=e.split(",");let r={},i=[];for(const s of n){const[a,o]=s.split("="),l=decodeURIComponent(o);a==="langsmith-metadata"?r=JSON.parse(l):a==="langsmith-tags"&&(i=l.split(","))}return new Kl(r,i)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class pt{constructor(e){var o;Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const n=pt.getDefaultConfig(),{metadata:r,...i}=e,s=i.client??pt.getSharedClient(),a={...r,...(o=i==null?void 0:i.extra)==null?void 0:o.metadata};if(i.extra={...i.extra,metadata:a},Object.assign(this,{...n,...i,client:s}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const l=JL(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+l:this.dotted_order=l}}static getDefaultConfig(){return{id:gt(),run_type:"chain",project_name:Ur("LANGCHAIN_PROJECT")??Ur("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:Ur("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:Ur("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return pt.sharedClient||(pt.sharedClient=new Ha),pt.sharedClient}createChild(e){var l,u,c,d,f,h;const n=this.child_execution_order+1,r=new pt({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:n,child_execution_order:n}),i=Symbol.for("lc:child_config"),s=((l=e.extra)==null?void 0:l[i])??this.extra[i];if(QL(s)){const p={...s},v=XL(p.callbacks)?(c=(u=p.callbacks).copy)==null?void 0:c.call(u):void 0;v&&(Object.assign(v,{_parentRunId:r.id}),(h=(f=(d=v.handlers)==null?void 0:d.find(Ax))==null?void 0:f.updateFromRunTree)==null||h.call(f,r),p.callbacks=v),r.extra[i]=p}const a=new Set;let o=this;for(;o!=null&&!a.has(o.id);)a.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,n),o=o.parent_run;return this.child_runs.push(r),r}async end(e,n,r=Date.now()){this.outputs=this.outputs??e,this.error=this.error??n,this.end_time=this.end_time??r}_convertToCreate(e,n,r=!0){var l;const i=e.extra??{};if(i.runtime||(i.runtime={}),n)for(const[u,c]of Object.entries(n))i.runtime[u]||(i.runtime[u]=c);let s,a;return r?(a=(l=e.parent_run)==null?void 0:l.id,s=[]):(s=e.child_runs.map(u=>this._convertToCreate(u,n,r)),a=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:s,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags}}async postRun(e=!0){try{const n=await xx(),r=await this._convertToCreate(this,n,!0);if(await this.client.createRun(r),!e){Sx("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const i of this.child_runs)await i.postRun(!1)}}catch(n){console.error(`Error in postRun for run ${this.id}:`,n)}}async patchRun(){var e;try{const n={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags};await this.client.updateRun(this.id,n)}catch(n){console.error(`Error in patchRun for run ${this.id}`,n)}}toJSON(){return this._convertToCreate(this,void 0,!1)}static fromRunnableConfig(e,n){var u,c,d,f;const r=e==null?void 0:e.callbacks;let i,s,a,o=qL();if(r){const h=((u=r==null?void 0:r.getParentRunId)==null?void 0:u.call(r))??"",p=(c=r==null?void 0:r.handlers)==null?void 0:c.find(v=>(v==null?void 0:v.name)=="langchain_tracer");i=(d=p==null?void 0:p.getRun)==null?void 0:d.call(p,h),s=p==null?void 0:p.projectName,a=p==null?void 0:p.client,o=o||!!p}return i?new pt({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:a,tracingEnabled:o,project_name:s,tags:[...new Set(((i==null?void 0:i.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(f=i==null?void 0:i.extra)==null?void 0:f.metadata,...e==null?void 0:e.metadata}}}).createChild(n):new pt({...n,client:a,tracingEnabled:o,project_name:s})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,n){var u;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=r["langsmith-trace"];if(!i||typeof i!="string")return;const s=i.trim(),a=s.split(".").map(c=>{const[d,f]=c.split("Z");return{strTime:d,time:Date.parse(d+"Z"),uuid:f}}),o=a[0].uuid,l={...n,name:(n==null?void 0:n.name)??"parent",run_type:(n==null?void 0:n.run_type)??"chain",start_time:(n==null?void 0:n.start_time)??Date.now(),id:(u=a.at(-1))==null?void 0:u.uuid,trace_id:o,dotted_order:s};if(r.baggage&&typeof r.baggage=="string"){const c=Kl.fromHeader(r.baggage);l.metadata=c.metadata,l.tags=c.tags}return new pt(l)}toHeaders(e){var r;const n={"langsmith-trace":this.dotted_order,baggage:new Kl((r=this.extra)==null?void 0:r.metadata,this.tags).toHeader()};if(e)for(const[i,s]of Object.entries(n))e.set(i,s);return n}}Object.defineProperty(pt,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function Ax(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function lv(t){return Array.isArray(t)&&t.some(e=>Ax(e))}function XL(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function QL(t){var e;return t!==void 0&&typeof t.callbacks=="object"&&(lv((e=t.callbacks)==null?void 0:e.handlers)||lv(t.callbacks))}const Ix="0.1.61";var jp={exports:{}};jp.exports;(function(t){const n=(s=0)=>a=>`\x1B[${38+s};5;${a}m`,r=(s=0)=>(a,o,l)=>`\x1B[${38+s};2;${a};${o};${l}m`;function i(){const s=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[u,c]of Object.entries(l))a[u]={open:`\x1B[${c[0]}m`,close:`\x1B[${c[1]}m`},l[u]=a[u],s.set(c[0],c[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:s,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=n(),a.color.ansi16m=r(),a.bgColor.ansi256=n(10),a.bgColor.ansi16m=r(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,u)=>o===l&&l===u?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(u/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:u}=l.groups;u.length===3&&(u=u.split("").map(d=>d+d).join(""));const c=Number.parseInt(u,16);return[c>>16&255,c>>8&255,c&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(t,"exports",{enumerable:!0,get:i})})(jp);var YL=jp.exports;const Nx=lu(YL);function Qe(t,e){return`${t.open}${e}${t.close}`}function kt(t,e){try{return JSON.stringify(t,null,2)}catch{return e}}function uv(t){return typeof t=="string"?t.trim():t==null?t:kt(t,t.toString())}function zn(t){if(!t.end_time)return"";const e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:at}=Nx;class cv extends oo{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const n=[];let r=e;for(;r.parent_run_id;){const i=this.runMap.get(r.parent_run_id);if(i)n.push(i),r=i;else break}return n}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((i,s,a)=>{const o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===a.length-1?Qe(Nx.bold,o):o}).join(" > ");return Qe(at.grey,r)}onChainStart(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.green,"[chain/start]")} [${n}] Entering Chain run with input: ${kt(e.inputs,"[inputs]")}`)}onChainEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.cyan,"[chain/end]")} [${n}] [${zn(e)}] Exiting Chain run with output: ${kt(e.outputs,"[outputs]")}`)}onChainError(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.red,"[chain/error]")} [${n}] [${zn(e)}] Chain run errored with error: ${kt(e.error,"[error]")}`)}onLLMStart(e){const n=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${Qe(at.green,"[llm/start]")} [${n}] Entering LLM run with input: ${kt(r,"[inputs]")}`)}onLLMEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.cyan,"[llm/end]")} [${n}] [${zn(e)}] Exiting LLM run with output: ${kt(e.outputs,"[response]")}`)}onLLMError(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.red,"[llm/error]")} [${n}] [${zn(e)}] LLM run errored with error: ${kt(e.error,"[error]")}`)}onToolStart(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.green,"[tool/start]")} [${n}] Entering Tool run with input: "${uv(e.inputs.input)}"`)}onToolEnd(e){var r;const n=this.getBreadcrumbs(e);console.log(`${Qe(at.cyan,"[tool/end]")} [${n}] [${zn(e)}] Exiting Tool run with output: "${uv((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.red,"[tool/error]")} [${n}] [${zn(e)}] Tool run errored with error: ${kt(e.error,"[error]")}`)}onRetrieverStart(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.green,"[retriever/start]")} [${n}] Entering Retriever run with input: ${kt(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.cyan,"[retriever/end]")} [${n}] [${zn(e)}] Exiting Retriever run with output: ${kt(e.outputs,"[outputs]")}`)}onRetrieverError(e){const n=this.getBreadcrumbs(e);console.log(`${Qe(at.red,"[retriever/error]")} [${n}] [${zn(e)}] Retriever run errored with error: ${kt(e.error,"[error]")}`)}onAgentAction(e){const n=e,r=this.getBreadcrumbs(e);console.log(`${Qe(at.blue,"[agent/action]")} [${r}] Agent selected action: ${kt(n.actions[n.actions.length-1],"[action]")}`)}}class ra extends oo{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:n,projectName:r,client:i}=e;this.projectName=r??ii("LANGCHAIN_PROJECT")??ii("LANGCHAIN_SESSION"),this.exampleId=n,this.client=i??new Ha({});const s=ra.getTraceableRunTree();s&&this.updateFromRunTree(s)}async _convertToCreate(e,n=void 0){return{...e,extra:{...e.extra,runtime:await wN()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:n}}async persistRun(e){}async onRunCreate(e){const n=await this._convertToCreate(e,this.exampleId);await this.client.createRun(n)}async onRunUpdate(e){const n={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,n)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let n=e;const r=new Set;for(;n.parent_run&&!(r.has(n.id)||(r.add(n.id),!n.parent_run));)n=n.parent_run;r.clear();const i=[n];for(;i.length>0;){const s=i.shift();!s||r.has(s.id)||(r.add(s.id),this.runMap.set(s.id,s),s.child_runs&&i.push(...s.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const n={},r=[];for(const[i,s]of this.runMap){const a=new pt({...s,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});n[i]=a,r.push([i,s.dotted_order])}r.sort((i,s)=>!i[1]||!s[1]?0:i[1].localeCompare(s[1]));for(const[i]of r){const s=this.runMap.get(i),a=n[i];if(!(!s||!a)&&s.parent_run_id){const o=n[s.parent_run_id];o&&(o.child_runs.push(a),a.parent_run=o)}}return n[e]}static getTraceableRunTree(){try{return oN()}catch{return}}}let nd;function e2(){const t="default"in Nn?Nn.default:Nn;return new t({autoStart:!0,concurrency:1})}async function Ce(t,e){e===!0?await t():(typeof nd>"u"&&(nd=e2()),nd.add(t))}const t2=t=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(n=>ii(n)==="true");class n2{setHandler(e){return this.setHandlers([e])}}class Gu{constructor(e,n,r,i,s,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;try{await((r=n.handleText)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleText: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleCustomEvent(e,n,r,i,s){await Promise.all(this.handlers.map(a=>Ce(async()=>{var o;try{await((o=a.handleCustomEvent)==null?void 0:o.call(a,e,n,this.runId,this.tags,this.metadata))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}}class r2 extends Gu{getChild(e){const n=new _t(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetriever`),n.raiseError)throw i}},n.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreRetriever)try{await((r=n.handleRetrieverError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverError: ${i}`),n.raiseError)throw e}},n.awaitHandlers)))}}class dv extends Gu{async handleLLMNewToken(e,n,r,i,s,a){await Promise.all(this.handlers.map(o=>Ce(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMNewToken)==null?void 0:l.call(o,e,n??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMError: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreLLM)try{await((r=n.handleLLMEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class i2 extends Gu{getChild(e){const n=new _t(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleChainError(e,n,r,i,s){await Promise.all(this.handlers.map(a=>Ce(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainError)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleChainEnd(e,n,r,i,s){await Promise.all(this.handlers.map(a=>Ce(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainEnd)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentAction)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentAction: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleAgentEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleAgentEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class s2 extends Gu{getChild(e){const n=new _t(this.runId);return n.setHandlers(this.inheritableHandlers),n.addTags(this.inheritableTags),n.addMetadata(this.inheritableMetadata),e&&n.addTags([e],!1),n}async handleToolError(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolError)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolError: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(n=>Ce(async()=>{var r;if(!n.ignoreAgent)try{await((r=n.handleToolEnd)==null?void 0:r.call(n,e,this.runId,this._parentRunId,this.tags))}catch(i){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolEnd: ${i}`),n.raiseError)throw i}},n.awaitHandlers)))}}class _t extends n2{constructor(e,n){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n==null?void 0:n.handlers)??this.handlers,this.inheritableHandlers=(n==null?void 0:n.inheritableHandlers)??this.inheritableHandlers,this.tags=(n==null?void 0:n.tags)??this.tags,this.inheritableTags=(n==null?void 0:n.inheritableTags)??this.inheritableTags,this.metadata=(n==null?void 0:n.metadata)??this.metadata,this.inheritableMetadata=(n==null?void 0:n.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,n,r=void 0,i=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(n.map(async(u,c)=>{const d=c===0&&r?r:gt();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return Cs(f)&&f._createRunForLLMStart(e,[u],d,this._parentRunId,s,this.tags,this.metadata,l),Ce(async()=>{var h;try{await((h=f.handleLLMStart)==null?void 0:h.call(f,e,[u],d,this._parentRunId,s,this.tags,this.metadata,l))}catch(p){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${p}`),f.raiseError)throw p}},f.awaitHandlers)})),new dv(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,n,r=void 0,i=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(n.map(async(u,c)=>{const d=c===0&&r?r:gt();return await Promise.all(this.handlers.map(f=>{if(!f.ignoreLLM)return Cs(f)&&f._createRunForChatModelStart(e,[u],d,this._parentRunId,s,this.tags,this.metadata,l),Ce(async()=>{var h,p;try{if(f.handleChatModelStart)await((h=f.handleChatModelStart)==null?void 0:h.call(f,e,[u],d,this._parentRunId,s,this.tags,this.metadata,l));else if(f.handleLLMStart){const v=cx(u);await((p=f.handleLLMStart)==null?void 0:p.call(f,e,[v],d,this._parentRunId,s,this.tags,this.metadata,l))}}catch(v){if((f.raiseError?console.error:console.warn)(`Error in handler ${f.constructor.name}, handleLLMStart: ${v}`),f.raiseError)throw v}},f.awaitHandlers)})),new dv(d,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,n,r=gt(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreChain)return Cs(l)&&l._createRunForChainStart(e,n,r,this._parentRunId,this.tags,this.metadata,i,o),Ce(async()=>{var u;try{await((u=l.handleChainStart)==null?void 0:u.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,i,o))}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainStart: ${c}`),l.raiseError)throw c}},l.awaitHandlers)})),new i2(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,n,r=gt(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreAgent)return Cs(l)&&l._createRunForToolStart(e,n,r,this._parentRunId,this.tags,this.metadata,o),Ce(async()=>{var u;try{await((u=l.handleToolStart)==null?void 0:u.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleToolStart: ${c}`),l.raiseError)throw c}},l.awaitHandlers)})),new s2(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,n,r=gt(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreRetriever)return Cs(l)&&l._createRunForRetrieverStart(e,n,r,this._parentRunId,this.tags,this.metadata,o),Ce(async()=>{var u;try{await((u=l.handleRetrieverStart)==null?void 0:u.call(l,e,n,r,this._parentRunId,this.tags,this.metadata,o))}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleRetrieverStart: ${c}`),l.raiseError)throw c}},l.awaitHandlers)})),new r2(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,n,r,i,s){await Promise.all(this.handlers.map(a=>Ce(async()=>{var o;if(!a.ignoreCustomEvent)try{await((o=a.handleCustomEvent)==null?void 0:o.call(a,e,n,r,this.tags,this.metadata))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}addHandler(e,n=!0){this.handlers.push(e),n&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(n=>n!==e),this.inheritableHandlers=this.inheritableHandlers.filter(n=>n!==e)}setHandlers(e,n=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,n)}addTags(e,n=!0){this.removeTags(e),this.tags.push(...e),n&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(n=>!e.includes(n)),this.inheritableTags=this.inheritableTags.filter(n=>!e.includes(n))}addMetadata(e,n=!0){this.metadata={...this.metadata,...e},n&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const n of Object.keys(e))delete this.metadata[n],delete this.inheritableMetadata[n]}copy(e=[],n=!0){const r=new _t(this._parentRunId);for(const i of this.handlers){const s=this.inheritableHandlers.includes(i);r.addHandler(i,s)}for(const i of this.tags){const s=this.inheritableTags.includes(i);r.addTags([i],s)}for(const i of Object.keys(this.metadata)){const s=Object.keys(this.inheritableMetadata).includes(i);r.addMetadata({[i]:this.metadata[i]},s)}for(const i of e)r.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||r.addHandler(i,n);return r}static fromHandlers(e){class n extends ao{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:gt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new n),r}static configure(e,n,r,i,s,a,o){return this._configureSync(e,n,r,i,s,a,o)}static _configureSync(e,n,r,i,s,a,o){var f,h;let l;(e||n)&&(Array.isArray(e)||!e?(l=new _t,l.setHandlers((e==null?void 0:e.map(Jl))??[],!0)):l=e,l=l.copy(Array.isArray(n)?n.map(Jl):n==null?void 0:n.handlers,!1));const u=ii("LANGCHAIN_VERBOSE")==="true"||(o==null?void 0:o.verbose),c=((f=ra.getTraceableRunTree())==null?void 0:f.tracingEnabled)||t2(),d=c||(ii("LANGCHAIN_TRACING")??!1);if(u||d){if(l||(l=new _t),u&&!l.handlers.some(p=>p.name===cv.prototype.name)){const p=new cv;l.addHandler(p,!0)}if(d&&!l.handlers.some(p=>p.name==="langchain_tracer")&&c){const p=new ra;l.addHandler(p,!0),l._parentRunId=((h=ra.getTraceableRunTree())==null?void 0:h.id)??l._parentRunId}}return(r||i)&&l&&(l.addTags(r??[]),l.addTags(i??[],!1)),(s||a)&&l&&(l.addMetadata(s??{}),l.addMetadata(a??{},!1)),l}}function Jl(t){return"name"in t?t:ao.fromMethods(t)}class a2{getStore(){}run(e,n){return n()}}const o2=new a2,rd=Symbol.for("ls:tracing_async_local_storage"),fv=Symbol.for("lc:child_config");class l2{getInstance(){return globalThis[rd]??o2}getRunnableConfig(){var n,r;return(r=(n=this.getInstance().getStore())==null?void 0:n.extra)==null?void 0:r[fv]}runWithConfig(e,n,r){var u;const i=_t._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),s=this.getInstance(),a=i==null?void 0:i.getParentRunId(),o=(u=i==null?void 0:i.handlers)==null?void 0:u.find(c=>(c==null?void 0:c.name)==="langchain_tracer");let l;return o&&a?l=o.convertToRunTree(a):r||(l=new pt({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[fv]:e}),s.run(l,n)}initializeGlobalInstance(e){globalThis[rd]===void 0&&(globalThis[rd]=e)}}const si=new l2;async function xr(t,e){if(e===void 0)return t;let n;return Promise.race([t.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,i)=>{n=()=>{i(new Error("Aborted"))},e.addEventListener("abort",n),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",n))}class St extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const n=this.reader.cancel();this.reader.releaseLock(),await n}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const n=e.getReader();return new St({start(r){return i();function i(){return n.read().then(({done:s,value:a})=>{if(s){r.close();return}return r.enqueue(a),i()})}},cancel(){n.releaseLock()}})}static fromAsyncGenerator(e){return new St({async pull(n){const{value:r,done:i}=await e.next();i&&n.close(),n.enqueue(r)},async cancel(n){await e.return(n)}})}}function jx(t,e=2){const n=Array.from({length:e},()=>[]);return n.map(async function*(i){for(;;)if(i.length===0){const s=await t.next();for(const a of n)a.push(s)}else{if(i[0].done)return;yield i.shift().value}})}function Xt(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){const n={...t};for(const[r,i]of Object.entries(e))r in n&&!Array.isArray(n[r])?n[r]=Xt(n[r],i):n[r]=i;return n}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}class gs{constructor(e){var n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((n=this.config)==null?void 0:n.signal),this.setup=new Promise((r,i)=>{si.runWithConfig(e.config,async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,i):this.firstResult.then(s=>r(void 0),i)},!0)})}async next(...e){var n;return(n=this.signal)==null||n.throwIfAborted(),this.firstResultUsed?si.runWithConfig(this.config,this.signal?async()=>xr(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function u2(t,e,n,r,...i){const s=new gs({generator:e,startSetup:n,signal:r}),a=await s.setup;return{output:t(s,a,...i),setup:a}}class Zn{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const n=this.ops.concat(e.ops),r=Gl({},n);return new Wa({ops:n,state:r[r.length-1].newDocument})}}class Wa extends Zn{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const n=this.ops.concat(e.ops),r=Gl(this.state,e.ops);return new Wa({ops:n,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const n=Gl({},e.ops);return new Wa({ops:e.ops,state:n[n.length-1].newDocument})}}const $x=t=>t.name==="log_stream_tracer";async function hv(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=t;if(["retriever","llm","prompt"].includes(t.run_type))return n;if(!(Object.keys(n).length===1&&(n==null?void 0:n.input)===""))return n.input}async function pv(t,e){const{outputs:n}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?n:n!==void 0&&Object.keys(n).length===1&&(n==null?void 0:n.output)!==void 0?n.output:n}function c2(t){return t!==void 0&&t.message!==void 0}class mv extends oo{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=St.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||n.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),r}async*tapOutputIterable(e,n){for await(const r of n){if(e!==this.rootId){const i=this.keyMapByRunId[e];i&&await this.writer.write(new Zn({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var i;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Zn({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const n=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=n===1?e.name:`${e.name}:${n}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await hv(e,this._schemaFormat)),await this.writer.write(new Zn({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const n=this.keyMapByRunId[e.id];if(n===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${n}/inputs`,value:await hv(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${n}/final_output`,value:await pv(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${n}/end_time`,value:new Date(e.end_time).toISOString()});const i=new Zn({ops:r});await this.writer.write(i)}finally{if(e.id===this.rootId){const n=new Zn({ops:[{op:"replace",path:"/final_output",value:await pv(e,this._schemaFormat)}]});await this.writer.write(n),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,n,r){const i=this.keyMapByRunId[e.id];if(i===void 0)return;const s=e.inputs.messages!==void 0;let a;s?c2(r==null?void 0:r.chunk)?a=r==null?void 0:r.chunk:a=new br({id:`run-${e.id}`,content:n}):a=n;const o=new Zn({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:n},{op:"add",path:`/logs/${i}/streamed_output/-`,value:a}]});await this.writer.write(o)}}const gv="__run";class as{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new as({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class qr extends as{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new qr({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function Fo({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const Lx=t=>t.name==="event_stream_tracer";class d2 extends oo{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=St.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const n=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||n.find(i=>{var s;return(s=this.includeTags)==null?void 0:s.includes(i)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&n.every(i=>{var s;return!((s=this.excludeTags)!=null&&s.includes(i))})),r}async*tapOutputIterable(e,n){const r=await n.next();if(r.done)return;const i=this.runInfoMap.get(e);if(i===void 0){yield r.value;return}function s(o,l){return o==="llm"&&typeof l=="string"?new as({text:l}):l}let a=this.tappedPromises.get(e);if(a===void 0){let o;a=new Promise(l=>{o=l}),this.tappedPromises.set(e,a);try{const l={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:s(i.runType,r.value)}},i),yield r.value;for await(const u of n)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:s(i.runType,u)}},i),yield u}finally{o()}}else{yield r.value;for await(const o of n)yield o}}async send(e,n){this._includeRun(n)&&await this.writer.write(e)}async sendEndEvent(e,n){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,n)}):await this.send(e,n)}async onLLMStart(e){var a,o;const n=Fo(e),r=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,i);const s=`on_${r}_start`;await this.send({event:s,data:{input:e.inputs},name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onLLMNewToken(e,n,r){const i=this.runInfoMap.get(e.id);let s,a;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")a="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?s=new br({content:n,id:`run-${e.id}`}):s=r.chunk.message;else if(i.runType==="llm")a="on_llm_stream",(r==null?void 0:r.chunk)===void 0?s=new as({text:n}):s=r.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:a,data:{chunk:s},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var a,o,l;const n=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(n===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const i=(a=e.outputs)==null?void 0:a.generations;let s;if(n.runType==="chat_model"){for(const u of i??[]){if(s!==void 0)break;s=(o=u[0])==null?void 0:o.message}r="on_chat_model_end"}else if(n.runType==="llm")s={generations:i==null?void 0:i.map(u=>u.map(c=>({text:c.text,generationInfo:c.generationInfo}))),llmOutput:((l=e.outputs)==null?void 0:l.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${n.runType}`);await this.sendEndEvent({event:r,data:{output:s,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onChainStart(e){var a,o;const n=Fo(e),r=e.run_type??"chain",i={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:n,runType:e.run_type};let s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},i.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,i.inputs=e.inputs.input):(s.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${r}_start`,data:s,name:n,tags:e.tags??[],run_id:e.id,metadata:((o=e.extra)==null?void 0:o.metadata)??{}},i)}async onChainEnd(e){var o;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,i=e.inputs??n.inputs??{},a={output:((o=e.outputs)==null?void 0:o.output)??e.outputs,input:i};i.input&&Object.keys(i).length===1&&(a.input=i.input,n.inputs=i.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata??{}},n)}async onToolStart(e){var i,s;const n=Fo(e),r={tags:e.tags??[],metadata:((i=e.extra)==null?void 0:i.metadata)??{},name:n,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:n,run_id:e.id,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{}},r)}async onToolEnd(e){var i;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(n.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async onRetrieverStart(e){var s,a;const n=Fo(e),i={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:n,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:n,tags:e.tags??[],run_id:e.id,metadata:((a=e.extra)==null?void 0:a.metadata)??{}},i)}async onRetrieverEnd(e){var r;const n=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),n===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:n.inputs},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}async handleCustomEvent(e,n,r){const i=this.runInfoMap.get(r);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:i.tags,metadata:i.metadata,data:n},i)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const id=25;async function Qt(t){return _t._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function yv(...t){const e={};for(const n of t.filter(r=>!!r))for(const r of Object.keys(n))if(r==="metadata")e[r]={...e[r],...n[r]};else if(r==="tags"){const i=e[r]??[];e[r]=[...new Set(i.concat(n[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...n[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=n.timeout:n.timeout!==void 0&&(e.timeout=Math.min(e.timeout,n.timeout));else if(r==="signal")e.signal===void 0?e.signal=n.signal:n.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,n.signal]):e.signal=n.signal);else if(r==="callbacks"){const i=e.callbacks,s=n.callbacks;if(Array.isArray(s))if(!i)e.callbacks=s;else if(Array.isArray(i))e.callbacks=i.concat(s);else{const a=i.copy();for(const o of s)a.addHandler(Jl(o),!0);e.callbacks=a}else if(s)if(!i)e.callbacks=s;else if(Array.isArray(i)){const a=s.copy();for(const o of i)a.addHandler(Jl(o),!0);e.callbacks=a}else e.callbacks=new _t(s._parentRunId,{handlers:i.handlers.concat(s.handlers),inheritableHandlers:i.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(i.tags.concat(s.tags))),inheritableTags:Array.from(new Set(i.inheritableTags.concat(s.inheritableTags))),metadata:{...i.metadata,...s.metadata}})}else{const i=r;e[i]=n[i]??e[i]}return e}const f2=new Set(["string","number","boolean"]);function se(t){var r;const e=si.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:i,runName:s,...a}=e;n=Object.entries(a).reduce((o,[l,u])=>(u!==void 0&&(o[l]=u),o),n)}if(t&&(n=Object.entries(t).reduce((i,[s,a])=>(a!==void 0&&(i[s]=a),i),n)),n!=null&&n.configurable)for(const i of Object.keys(n.configurable))f2.has(typeof n.configurable[i])&&!((r=n.metadata)!=null&&r[i])&&(n.metadata||(n.metadata={}),n.metadata[i]=n.configurable[i]);if(n.timeout!==void 0){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const i=AbortSignal.timeout(n.timeout);n.signal!==void 0?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,i])):n.signal=i,delete n.timeout}return n}function We(t={},{callbacks:e,maxConcurrency:n,recursionLimit:r,runName:i,configurable:s,runId:a}={}){const o=se(t);return e!==void 0&&(delete o.runName,o.callbacks=e),r!==void 0&&(o.recursionLimit=r),n!==void 0&&(o.maxConcurrency=n),i!==void 0&&(o.runName=i),s!==void 0&&(o.configurable={...o.configurable,...s}),a!==void 0&&delete o.runId,o}const h2=[400,401,402,403,404,405,406,407,409],p2=t=>{var n,r;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;const e=((n=t==null?void 0:t.response)==null?void 0:n.status)??(t==null?void 0:t.status);if(e&&h2.includes(+e))throw t;if(((r=t==null?void 0:t.error)==null?void 0:r.code)==="insufficient_quota"){const i=new Error(t==null?void 0:t.message);throw i.name="InsufficientQuotaError",i}};class $p{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??p2;const n="default"in Nn?Nn.default:Nn;this.queue=new n({concurrency:this.maxConcurrency})}call(e,...n){return this.queue.add(()=>Wl(()=>e(...n).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,n,...r){return e.signal?Promise.race([this.call(n,...r),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(n,...r)}fetch(...e){return this.call(()=>fetch(...e).then(n=>n.ok?n:Promise.reject(n)))}}class Dx extends oo{constructor({config:e,onStart:n,onEnd:r,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=n,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function Lp(t){return t?t.lc_runnable:!1}class m2{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,n){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const i=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(n)),this.includeTags!==void 0&&(r=r||i.some(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(n)),this.excludeTags!==void 0&&(r=r&&i.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),r}}function sd(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}const g2=["*","_","`"];function y2(t){let e="";for(const[n,r]of Object.entries(t))e+=`	classDef ${n} ${r};
`;return e}function v2(t,e,n){const{firstNode:r,lastNode:i,nodeColors:s,withStyles:a=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=n??{};let u=a?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(a){const h="default",p={[h]:"{0}({1})"};r!==void 0&&(p[r]="{0}([{1}]):::first"),i!==void 0&&(p[i]="{0}([{1}]):::last");for(const[v,w]of Object.entries(t)){const m=w.name.split(":").pop()??"";let y=g2.some(x=>m.startsWith(x)&&m.endsWith(x))?`<p>${m}</p>`:m;Object.keys(w.metadata??{}).length&&(y+=`<hr/><small><em>${Object.entries(w.metadata??{}).map(([x,T])=>`${x} = ${T}`).join(`
`)}</em></small>`);const b=(p[v]??p[h]).replace("{0}",sd(v)).replace("{1}",y);u+=`	${b}
`}}const c={};for(const h of e){const p=h.source.split(":"),v=h.target.split(":"),w=p.filter((m,g)=>m===v[g]).join(":");c[w]||(c[w]=[]),c[w].push(h)}const d=new Set;function f(h,p){const v=h.length===1&&h[0].source===h[0].target;if(p&&!v){const w=p.split(":").pop();if(d.has(w))throw new Error(`Found duplicate subgraph '${w}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(w),u+=`	subgraph ${w}
`}for(const w of h){const{source:m,target:g,data:y,conditional:b}=w;let x="";if(y!==void 0){let T=y;const R=T.split(" ");R.length>l&&(T=Array.from({length:Math.ceil(R.length/l)},(k,G)=>R.slice(G*l,(G+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),x=b?` -. &nbsp;${T}&nbsp; .-> `:` -- &nbsp;${T}&nbsp; --> `}else x=b?" -.-> ":" --> ";u+=`	${sd(m)}${x}${sd(g)};
`}for(const w in c)w.startsWith(`${p}:`)&&w!==p&&f(c[w],w);p&&!v&&(u+=`	end
`)}f(c[""]??[],"");for(const h in c)!h.includes(":")&&h!==""&&f(c[h],h);return a&&(u+=y2(s??{})),u}async function w2(t,e){let{backgroundColor:n="white"}=e??{};const r=btoa(t);n!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const i=`https://mermaid.ink/img/${r}?bgColor=${n}`,s=await fetch(i);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}function _2(t,e){if(t!==void 0&&!ea(t))return t;if(Lp(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch{return e.getName()}else return e.name??"UnknownSchema"}function b2(t){return Lp(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...ro(t.data.schema),title:t.data.name}}}class Zu{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((n,r)=>{e[n.id]=ea(n.id)?r:n.id}),{nodes:Object.values(this.nodes).map(n=>({id:e[n.id],...b2(n)})),edges:this.edges.map(n=>{const r={source:e[n.source],target:e[n.target]};return typeof n.data<"u"&&(r.data=n.data),typeof n.conditional<"u"&&(r.conditional=n.conditional),r})}}addNode(e,n,r){if(n!==void 0&&this.nodes[n]!==void 0)throw new Error(`Node with id ${n} already exists`);const i=n??gt(),s={id:i,data:e,name:_2(n,e),metadata:r};return this.nodes[i]=s,s}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(n=>n.source!==e.id&&n.target!==e.id)}addEdge(e,n,r,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[n.id]===void 0)throw new Error(`Target node ${n.id} not in graph`);const s={source:e.id,target:n.id,data:r,conditional:i};return this.edges.push(s),s}firstNode(){return vv(this)}lastNode(){return wv(this)}extend(e,n=""){let r=n;Object.values(e.nodes).map(u=>u.id).every(ea)&&(r="");const s=u=>r?`${r}:${u}`:u;Object.entries(e.nodes).forEach(([u,c])=>{this.nodes[s(u)]={...c,id:s(u)}});const a=e.edges.map(u=>({...u,source:s(u.source),target:s(u.target)}));this.edges=[...this.edges,...a];const o=e.firstNode(),l=e.lastNode();return[o?{id:s(o.id),data:o.data}:void 0,l?{id:s(l.id),data:l.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&vv(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&wv(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),n=new Map;Object.values(e).forEach(i=>{n.set(i,(n.get(i)||0)+1)});const r=i=>{const s=e[i];return ea(i)&&n.get(s)===1?s:i};return new Zu({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,s])=>[r(i),{...s,id:r(i)}])),edges:this.edges.map(i=>({...i,source:r(i.source),target:r(i.target)}))})}drawMermaid(e){const{withStyles:n,curveStyle:r,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:s}=e??{},a=this.reid(),o=a.firstNode(),l=a.lastNode();return v2(a.nodes,a.edges,{firstNode:o==null?void 0:o.id,lastNode:l==null?void 0:l.id,withStyles:n,curveStyle:r,nodeColors:i,wrapLabelNWords:s})}async drawMermaidPng(e){const n=this.drawMermaid(e);return w2(n,{backgroundColor:e==null?void 0:e.backgroundColor})}}function vv(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function wv(t,e=[]){const n=new Set(t.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),r=[];for(const i of Object.values(t.nodes))!e.includes(i.id)&&!n.has(i.id)&&r.push(i);return r.length===1?r[0]:void 0}function x2(t){const e=new TextEncoder,n=new ReadableStream({async start(r){for await(const i of t)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return St.fromReadableStream(n)}function _v(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}const S2=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function Mf(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*bv(t,e){for(;;){const{value:n,done:r}=si.runWithConfig(t,e.next.bind(e),!0);if(r)break;yield n}}async function*xv(t,e){const n=e[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await si.runWithConfig(t,n.next.bind(e),!0);if(i)break;yield r}}function je(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}class Oe extends ri{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const n=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${n}${e}`:n}bind(e){return new Kr({bound:this,kwargs:e,config:{}})}map(){return new Xl({bound:this})}withRetry(e){return new E2({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Kr({bound:this,config:e,kwargs:{}})}withFallbacks(e){const n=Array.isArray(e)?e:e.fallbacks;return new P2({runnable:this,fallbacks:n})}_getOptionsList(e,n=0){if(Array.isArray(e)&&e.length!==n)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${n} inputs`);if(Array.isArray(e))return e.map(se);if(n>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:n},(i,s)=>se(s===0?e:r))}return Array.from({length:n},()=>se(e))}async batch(e,n,r){var l;const i=this._getOptionsList(n??{},e.length),s=((l=i[0])==null?void 0:l.maxConcurrency)??(r==null?void 0:r.maxConcurrency),a=new $p({maxConcurrency:s,onFailedAttempt:u=>{throw u}}),o=e.map((u,c)=>a.call(async()=>{try{return await this.invoke(u,i[c])}catch(d){if(r!=null&&r.returnExceptions)return d;throw d}}));return Promise.all(o)}async*_streamIterator(e,n){yield this.invoke(e,n)}async stream(e,n){const r=se(n),i=new gs({generator:this._streamIterator(e,r),config:r});return await i.setup,St.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let n;e===void 0?n=se(e):n=se({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[n,r]}async _callWithConfig(e,n,r){const i=se(r),s=await Qt(i),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),je(n,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(i==null?void 0:i.runName)??this.getName()));delete i.runId;let o;try{const l=e.call(this,n,i,a);o=await xr(l,r==null?void 0:r.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(je(o,"output"))),o}async _batchWithConfig(e,n,r,i){var u;const s=this._getOptionsList(r??{},n.length),a=await Promise.all(s.map(Qt)),o=await Promise.all(a.map(async(c,d)=>{const f=await(c==null?void 0:c.handleChainStart(this.toJSON(),je(n[d],"input"),s[d].runId,s[d].runType,void 0,void 0,s[d].runName??this.getName()));return delete s[d].runId,f}));let l;try{const c=e.call(this,n,s,o,i);l=await xr(c,(u=s==null?void 0:s[0])==null?void 0:u.signal)}catch(c){throw await Promise.all(o.map(d=>d==null?void 0:d.handleChainError(c))),c}return await Promise.all(o.map(c=>c==null?void 0:c.handleChainEnd(je(l,"output")))),l}async*_transformStreamWithConfig(e,n,r){let i,s=!0,a,o=!0;const l=se(r),u=await Qt(l);async function*c(){for await(const f of e){if(s)if(i===void 0)i=f;else try{i=Xt(i,f)}catch{i=void 0,s=!1}yield f}}let d;try{const f=await u2(n.bind(this),c(),async()=>u==null?void 0:u.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName()),r==null?void 0:r.signal,l);delete l.runId,d=f.setup;const h=d==null?void 0:d.handlers.find(Lx);let p=f.output;h!==void 0&&d!==void 0&&(p=h.tapOutputIterable(d.runId,p));const v=d==null?void 0:d.handlers.find($x);v!==void 0&&d!==void 0&&(p=v.tapOutputIterable(d.runId,p));for await(const w of p)if(yield w,o)if(a===void 0)a=w;else try{a=Xt(a,w)}catch{a=void 0,o=!1}}catch(f){throw await(d==null?void 0:d.handleChainError(f,void 0,void 0,void 0,{inputs:je(i,"input")})),f}await(d==null?void 0:d.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:je(i,"input")}))}getGraph(e){const n=new Zu,r=n.addNode({name:`${this.getName()}Input`,schema:Zr.any()}),i=n.addNode(this),s=n.addNode({name:`${this.getName()}Output`,schema:Zr.any()});return n.addEdge(r,i),n.addEdge(i,s),n}pipe(e){return new kn({first:this,last:Vr(e)})}pick(e){return this.pipe(new k2(e))}assign(e){return this.pipe(new Mx(new ys({steps:e})))}async*transform(e,n){let r;for await(const i of e)r===void 0?r=i:r=Xt(r,i);yield*this._streamIterator(r,se(n))}async*streamLog(e,n,r){const i=new mv({...r,autoClose:!1,_schemaFormat:"original"}),s=se(n);yield*this._streamLog(e,i,s)}async*_streamLog(e,n,r){const{callbacks:i}=r;if(i===void 0)r.callbacks=[n];else if(Array.isArray(i))r.callbacks=i.concat([n]);else{const l=i.copy();l.addHandler(n,!0),r.callbacks=l}const s=this.stream(e,r);async function a(){try{const l=await s;for await(const u of l){const c=new Zn({ops:[{op:"add",path:"/streamed_output/-",value:u}]});await n.writer.write(c)}}finally{await n.writer.close()}}const o=a();try{for await(const l of n)yield l}finally{await o}}streamEvents(e,n,r){let i;if(n.version==="v1")i=this._streamEventsV1(e,n,r);else if(n.version==="v2")i=this._streamEventsV2(e,n,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return n.encoding==="text/event-stream"?x2(i):St.fromAsyncGenerator(i)}async*_streamEventsV2(e,n,r){var h;const i=new d2({...r,autoClose:!1}),s=se(n),a=s.runId??gt();s.runId=a;const o=s.callbacks;if(o===void 0)s.callbacks=[i];else if(Array.isArray(o))s.callbacks=o.concat(i);else{const p=o.copy();p.addHandler(i,!0),s.callbacks=p}const l=this;async function u(){try{const p=await l.stream(e,s),v=i.tapOutputIterable(a,p);for await(const w of v);}finally{await i.finish()}}const c=u();let d=!1,f;try{for await(const p of i){if(!d){p.data.input=e,d=!0,f=p.run_id,yield p;continue}p.run_id===f&&p.event.endsWith("_end")&&(h=p.data)!=null&&h.input&&delete p.data.input,yield p}}finally{await c}}async*_streamEventsV1(e,n,r){let i,s=!1;const a=se(n),o=a.tags??[],l=a.metadata??{},u=a.runName??this.getName(),c=new mv({...r,autoClose:!1,_schemaFormat:"streaming_events"}),d=new m2({...r}),f=this._streamLog(e,c,a);for await(const p of f){if(i?i=i.concat(p):i=Wa.fromRunLogPatch(p),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;const g={...i.state},y={run_id:g.id,event:`on_${g.type}_start`,name:u,tags:o,metadata:l,data:{input:e}};d.includeEvent(y,g.type)&&(yield y)}const v=p.ops.filter(g=>g.path.startsWith("/logs/")).map(g=>g.path.split("/")[2]),w=[...new Set(v)];for(const g of w){let y,b={};const x=i.state.logs[g];if(x.end_time===void 0?x.streamed_output.length>0?y="stream":y="start":y="end",y==="start")x.inputs!==void 0&&(b.input=x.inputs);else if(y==="end")x.inputs!==void 0&&(b.input=x.inputs),b.output=x.final_output;else if(y==="stream"){const T=x.streamed_output.length;if(T!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${T} instead. Encountered in: "${x.name}"`);b={chunk:x.streamed_output[0]},x.streamed_output=[]}yield{event:`on_${x.type}_${y}`,name:x.name,run_id:x.id,tags:x.tags,metadata:x.metadata,data:b}}const{state:m}=i;if(m.streamed_output.length>0){const g=m.streamed_output.length;if(g!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${g} instead. Encountered in: "${m.name}"`);const y={chunk:m.streamed_output[0]};m.streamed_output=[];const b={event:`on_${m.type}_stream`,run_id:m.id,tags:o,metadata:l,name:u,data:y};d.includeEvent(b,m.type)&&(yield b)}}const h=i==null?void 0:i.state;if(h!==void 0){const p={event:`on_${h.type}_end`,name:u,run_id:h.id,tags:o,metadata:l,data:{output:h.final_output}};d.includeEvent(p,h.type)&&(yield p)}}static isRunnable(e){return Lp(e)}withListeners({onStart:e,onEnd:n,onError:r}){return new Kr({bound:this,config:{},configFactories:[i=>({callbacks:[new Dx({config:i,onStart:e,onEnd:n,onError:r})]})]})}asTool(e){return C2(this,e)}}class Kr extends Oe{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const n=yv(this.config,...e);return yv(n,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(n))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,n){return this.bound.invoke(e,await this._mergeConfig(se(n),this.kwargs))}async batch(e,n,r){const i=Array.isArray(n)?await Promise.all(n.map(async s=>this._mergeConfig(se(s),this.kwargs))):await this._mergeConfig(se(n),this.kwargs);return this.bound.batch(e,i,r)}async*_streamIterator(e,n){yield*this.bound._streamIterator(e,await this._mergeConfig(se(n),this.kwargs))}async stream(e,n){return this.bound.stream(e,await this._mergeConfig(se(n),this.kwargs))}async*transform(e,n){yield*this.bound.transform(e,await this._mergeConfig(se(n),this.kwargs))}streamEvents(e,n,r){const i=this,s=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(se(n),i.kwargs),version:n.version},r)};return St.fromAsyncGenerator(s())}static isRunnableBinding(e){return e.bound&&Oe.isRunnable(e.bound)}withListeners({onStart:e,onEnd:n,onError:r}){return new Kr({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new Dx({config:i,onStart:e,onEnd:n,onError:r})]})]})}}class Xl extends Oe{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Xl({bound:this.bound.bind(e)})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _invoke(e,n,r){return this.bound.batch(e,We(n,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:n,onError:r}){return new Xl({bound:this.bound.withListeners({onStart:e,onEnd:n,onError:r})})}}class E2 extends Kr{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,n,r){const i=e>1?`retry:attempt:${e}`:void 0;return We(n,{callbacks:r==null?void 0:r.getChild(i)})}async _invoke(e,n,r){return Wl(i=>super.invoke(e,this._patchConfigForRetry(i,n,r)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async _batch(e,n,r,i){const s={};try{await Wl(async a=>{const o=e.map((f,h)=>h).filter(f=>s[f.toString()]===void 0||s[f.toString()]instanceof Error),l=o.map(f=>e[f]),u=o.map(f=>this._patchConfigForRetry(a,n==null?void 0:n[f],r==null?void 0:r[f])),c=await super.batch(l,u,{...i,returnExceptions:!0});let d;for(let f=0;f<c.length;f+=1){const h=c[f],p=o[f];h instanceof Error&&d===void 0&&(d=h,d.input=l[f]),s[p.toString()]=h}if(d)throw d;return c},{onFailedAttempt:a=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>s[parseInt(a,10)])}async batch(e,n,r){return this._batchWithConfig(this._batch.bind(this),e,n,r)}}class kn extends Oe{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,n){var l;const r=se(n),i=await Qt(r),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),je(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let a=e,o;try{const u=[this.first,...this.middle];for(let c=0;c<u.length;c+=1){const f=u[c].invoke(a,We(r,{callbacks:s==null?void 0:s.getChild(`seq:step:${c+1}`)}));a=await xr(f,n==null?void 0:n.signal)}if((l=n==null?void 0:n.signal)!=null&&l.aborted)throw new Error("Aborted");o=await this.last.invoke(a,We(r,{callbacks:s==null?void 0:s.getChild(`seq:step:${this.steps.length}`)}))}catch(u){throw await(s==null?void 0:s.handleChainError(u)),u}return await(s==null?void 0:s.handleChainEnd(je(o,"output"))),o}async batch(e,n,r){var l;const i=this._getOptionsList(n??{},e.length),s=await Promise.all(i.map(Qt)),a=await Promise.all(s.map(async(u,c)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),je(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,d}));let o=e;try{for(let u=0;u<this.steps.length;u+=1){const d=this.steps[u].batch(o,a.map((f,h)=>{const p=f==null?void 0:f.getChild(`seq:step:${u+1}`);return We(i[h],{callbacks:p})}),r);o=await xr(d,(l=i[0])==null?void 0:l.signal)}}catch(u){throw await Promise.all(a.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(a.map(u=>u==null?void 0:u.handleChainEnd(je(o,"output")))),o}async*_streamIterator(e,n){var d;const r=await Qt(n),{runId:i,...s}=n??{},a=await(r==null?void 0:r.handleChainStart(this.toJSON(),je(e,"input"),i,void 0,void 0,void 0,s==null?void 0:s.runName)),o=[this.first,...this.middle,this.last];let l=!0,u;async function*c(){yield e}try{let f=o[0].transform(c(),We(s,{callbacks:a==null?void 0:a.getChild("seq:step:1")}));for(let h=1;h<o.length;h+=1)f=await o[h].transform(f,We(s,{callbacks:a==null?void 0:a.getChild(`seq:step:${h+1}`)}));for await(const h of f)if((d=n==null?void 0:n.signal)==null||d.throwIfAborted(),yield h,l)if(u===void 0)u=h;else try{u=Xt(u,h)}catch{u=void 0,l=!1}}catch(f){throw await(a==null?void 0:a.handleChainError(f)),f}await(a==null?void 0:a.handleChainEnd(je(u,"output")))}getGraph(e){const n=new Zu;let r=null;return this.steps.forEach((i,s)=>{const a=i.getGraph(e);s!==0&&a.trimFirstNode(),s!==this.steps.length-1&&a.trimLastNode(),n.extend(a);const o=a.firstNode();if(!o)throw new Error(`Runnable ${i} has no first node`);r&&n.addEdge(r,o),r=a.lastNode()}),n}pipe(e){return kn.isRunnableSequence(e)?new kn({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new kn({first:this.first,middle:[...this.middle,this.last],last:Vr(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Oe.isRunnable(e)}static from([e,...n],r){return new kn({first:Vr(e),middle:n.slice(0,-1).map(Vr),last:Vr(n[n.length-1]),name:r})}}class ys extends Oe{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[n,r]of Object.entries(e.steps))this.steps[n]=Vr(r)}static from(e){return new ys({steps:e})}async invoke(e,n){const r=se(n),i=await Qt(r),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const a={};try{const o=Object.entries(this.steps).map(async([l,u])=>{a[l]=await u.invoke(e,We(r,{callbacks:s==null?void 0:s.getChild(`map:key:${l}`)}))});await xr(Promise.all(o),n==null?void 0:n.signal)}catch(o){throw await(s==null?void 0:s.handleChainError(o)),o}return await(s==null?void 0:s.handleChainEnd(a)),a}async*_transform(e,n,r){const i={...this.steps},s=jx(e,Object.keys(i).length),a=new Map(Object.entries(i).map(([o,l],u)=>{const c=l.transform(s[u],We(r,{callbacks:n==null?void 0:n.getChild(`map:key:${o}`)}));return[o,c.next().then(d=>({key:o,gen:c,result:d}))]}));for(;a.size;){const o=Promise.race(a.values()),{key:l,result:u,gen:c}=await xr(o,r==null?void 0:r.signal);a.delete(l),u.done||(yield{[l]:u.value},a.set(l,c.next().then(d=>({key:l,gen:c,result:d}))))}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=se(n),s=new gs({generator:this.transform(r(),i),config:i});return await s.setup,St.fromAsyncGenerator(s)}}class Dp extends Oe{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!Sp(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,n){const[r]=this._getOptionsList(n??{},1),i=await Qt(r),s=this.func(We(r,{callbacks:i}),e);return xr(s,r==null?void 0:r.signal)}async*_streamIterator(e,n){var s,a;const[r]=this._getOptionsList(n??{},1),i=await this.invoke(e,n);if(Mf(i)){for await(const o of i)(s=r==null?void 0:r.signal)==null||s.throwIfAborted(),yield o;return}if(S2(i)){for(;;){(a=r==null?void 0:r.signal)==null||a.throwIfAborted();const o=i.next();if(o.done)break;yield o.value}return}yield i}static from(e){return new Dp({func:e})}}function T2(t){if(Sp(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class uo extends Oe{static lc_name(){return"RunnableLambda"}constructor(e){if(Sp(e.func))return Dp.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),T2(e.func),this.func=e.func}static from(e){return new uo({func:e})}async _invoke(e,n,r){return new Promise((i,s)=>{const a=We(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((n==null?void 0:n.recursionLimit)??id)-1});si.runWithConfig(a,async()=>{var o,l;try{let u=await this.func(e,{...a});if(u&&Oe.isRunnable(u)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");u=await u.invoke(e,{...a,recursionLimit:(a.recursionLimit??id)-1})}else if(Mf(u)){let c;for await(const d of xv(a,u))if((o=n==null?void 0:n.signal)==null||o.throwIfAborted(),c===void 0)c=d;else try{c=Xt(c,d)}catch{c=d}u=c}else if(_v(u)){let c;for(const d of bv(a,u))if((l=n==null?void 0:n.signal)==null||l.throwIfAborted(),c===void 0)c=d;else try{c=Xt(c,d)}catch{c=d}u=c}i(u)}catch(u){s(u)}})})}async invoke(e,n){return this._callWithConfig(this._invoke.bind(this),e,n)}async*_transform(e,n,r){var o,l;let i;for await(const u of e)if(i===void 0)i=u;else try{i=Xt(i,u)}catch{i=u}const s=We(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??id)-1}),a=await new Promise((u,c)=>{si.runWithConfig(s,async()=>{try{const d=await this.func(i,{...s,config:s});u(d)}catch(d){c(d)}})});if(a&&Oe.isRunnable(a)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const u=await a.stream(i,s);for await(const c of u)yield c}else if(Mf(a))for await(const u of xv(s,a))(o=r==null?void 0:r.signal)==null||o.throwIfAborted(),yield u;else if(_v(a))for(const u of bv(s,a))(l=r==null?void 0:r.signal)==null||l.throwIfAborted(),yield u;else yield a}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=se(n),s=new gs({generator:this.transform(r(),i),config:i});return await s.setup,St.fromAsyncGenerator(s)}}class P2 extends Oe{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,n){var u;const r=se(n),i=await Qt(n),{runId:s,...a}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),je(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName));let l;for(const c of this.runnables()){(u=r==null?void 0:r.signal)==null||u.throwIfAborted();try{const d=await c.invoke(e,We(a,{callbacks:o==null?void 0:o.getChild()}));return await(o==null?void 0:o.handleChainEnd(je(d,"output"))),d}catch(d){l===void 0&&(l=d)}}throw l===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(l)),l)}async*_streamIterator(e,n){var d;const r=se(n),i=await Qt(n),{runId:s,...a}=r,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),je(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName));let l,u;for(const f of this.runnables()){(d=r==null?void 0:r.signal)==null||d.throwIfAborted();const h=We(a,{callbacks:o==null?void 0:o.getChild()});try{u=await f.stream(e,h);break}catch(p){l===void 0&&(l=p)}}if(u===void 0){const f=l??new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(f)),f}let c;try{for await(const f of u){yield f;try{c=c===void 0?c:Xt(c,f)}catch{c=void 0}}}catch(f){throw await(o==null?void 0:o.handleChainError(f)),f}await(o==null?void 0:o.handleChainEnd(je(c,"output")))}async batch(e,n,r){var l;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const i=this._getOptionsList(n??{},e.length),s=await Promise.all(i.map(u=>Qt(u))),a=await Promise.all(s.map(async(u,c)=>{const d=await(u==null?void 0:u.handleChainStart(this.toJSON(),je(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,d}));let o;for(const u of this.runnables()){(l=i[0].signal)==null||l.throwIfAborted();try{const c=await u.batch(e,a.map((d,f)=>We(i[f],{callbacks:d==null?void 0:d.getChild()})),r);return await Promise.all(a.map((d,f)=>d==null?void 0:d.handleChainEnd(je(c[f],"output")))),c}catch(c){o===void 0&&(o=c)}}throw o?(await Promise.all(a.map(u=>u==null?void 0:u.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function Vr(t){if(typeof t=="function")return new uo({func:t});if(Oe.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){const e={};for(const[n,r]of Object.entries(t))e[n]=Vr(r);return new ys({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class Mx extends Oe{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof ys&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,n){const r=await this.mapper.invoke(e,n);return{...e,...r}}async*_transform(e,n,r){const i=this.mapper.getStepsKeys(),[s,a]=jx(e),o=this.mapper.transform(a,We(r,{callbacks:n==null?void 0:n.getChild()})),l=o.next();for await(const u of s){if(typeof u!="object"||Array.isArray(u))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof u}`);const c=Object.fromEntries(Object.entries(u).filter(([d])=>!i.includes(d)));Object.keys(c).length>0&&(yield c)}yield(await l).value;for await(const u of o)yield u}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=se(n),s=new gs({generator:this.transform(r(),i),config:i});return await s.setup,St.fromAsyncGenerator(s)}}class k2 extends Oe{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const n=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return n.length===0?void 0:Object.fromEntries(n)}}async invoke(e,n){return this._callWithConfig(this._pick.bind(this),e,n)}async*_transform(e){for await(const n of e){const r=await this._pick(n);r!==void 0&&(yield r)}}transform(e,n){return this._transformStreamWithConfig(e,this._transform.bind(this),n)}async stream(e,n){async function*r(){yield e}const i=se(n),s=new gs({generator:this.transform(r(),i),config:i});return await s.setup,St.fromAsyncGenerator(s)}}class Sv extends Kr{constructor(e){const n=kn.from([uo.from(async r=>{let i;if(ux(r))try{i=await this.schema.parseAsync(r.args)}catch{throw new VI("Received tool input did not match expected schema",JSON.stringify(r.args))}else i=r;return i}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:n,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function C2(t,e){var i;const n=e.name??t.getName(),r=e.description??((i=e.schema)==null?void 0:i.description);return e.schema.constructor===Zr.ZodString?new Sv({name:n,description:r,schema:Zr.object({input:Zr.string()}).transform(s=>s.input),bound:t}):new Sv({name:n,description:r,schema:e.schema,bound:t})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var R2=typeof window=="object"?window:{},J="0123456789abcdef".split(""),O2=[-2147483648,8388608,32768,128],Vt=[24,16,8,0],Ie=[];function nn(t){t?(Ie[0]=Ie[16]=Ie[1]=Ie[2]=Ie[3]=Ie[4]=Ie[5]=Ie[6]=Ie[7]=Ie[8]=Ie[9]=Ie[10]=Ie[11]=Ie[12]=Ie[13]=Ie[14]=Ie[15]=0,this.blocks=Ie):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}nn.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===R2.ArrayBuffer&&(t=new Uint8Array(t));for(var n,r=0,i,s=t.length||0,a=this.blocks;r<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(i=this.start;r<s&&i<64;++r)a[i>>2]|=t[r]<<Vt[i++&3];else for(i=this.start;r<s&&i<64;++r)n=t.charCodeAt(r),n<128?a[i>>2]|=n<<Vt[i++&3]:n<2048?(a[i>>2]|=(192|n>>6)<<Vt[i++&3],a[i>>2]|=(128|n&63)<<Vt[i++&3]):n<55296||n>=57344?(a[i>>2]|=(224|n>>12)<<Vt[i++&3],a[i>>2]|=(128|n>>6&63)<<Vt[i++&3],a[i>>2]|=(128|n&63)<<Vt[i++&3]):(n=65536+((n&1023)<<10|t.charCodeAt(++r)&1023),a[i>>2]|=(240|n>>18)<<Vt[i++&3],a[i>>2]|=(128|n>>12&63)<<Vt[i++&3],a[i>>2]|=(128|n>>6&63)<<Vt[i++&3],a[i>>2]|=(128|n&63)<<Vt[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=a[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};nn.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=O2[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};nn.prototype.hash=function(){var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,s,a,o,l=this.blocks;for(a=16;a<80;++a)o=l[a-3]^l[a-8]^l[a-14]^l[a-16],l[a]=o<<1|o>>>31;for(a=0;a<20;a+=5)s=e&n|~e&r,o=t<<5|t>>>27,i=o+s+i+1518500249+l[a]<<0,e=e<<30|e>>>2,s=t&e|~t&n,o=i<<5|i>>>27,r=o+s+r+1518500249+l[a+1]<<0,t=t<<30|t>>>2,s=i&t|~i&e,o=r<<5|r>>>27,n=o+s+n+1518500249+l[a+2]<<0,i=i<<30|i>>>2,s=r&i|~r&t,o=n<<5|n>>>27,e=o+s+e+1518500249+l[a+3]<<0,r=r<<30|r>>>2,s=n&r|~n&i,o=e<<5|e>>>27,t=o+s+t+1518500249+l[a+4]<<0,n=n<<30|n>>>2;for(;a<40;a+=5)s=e^n^r,o=t<<5|t>>>27,i=o+s+i+1859775393+l[a]<<0,e=e<<30|e>>>2,s=t^e^n,o=i<<5|i>>>27,r=o+s+r+1859775393+l[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,o=r<<5|r>>>27,n=o+s+n+1859775393+l[a+2]<<0,i=i<<30|i>>>2,s=r^i^t,o=n<<5|n>>>27,e=o+s+e+1859775393+l[a+3]<<0,r=r<<30|r>>>2,s=n^r^i,o=e<<5|e>>>27,t=o+s+t+1859775393+l[a+4]<<0,n=n<<30|n>>>2;for(;a<60;a+=5)s=e&n|e&r|n&r,o=t<<5|t>>>27,i=o+s+i-1894007588+l[a]<<0,e=e<<30|e>>>2,s=t&e|t&n|e&n,o=i<<5|i>>>27,r=o+s+r-1894007588+l[a+1]<<0,t=t<<30|t>>>2,s=i&t|i&e|t&e,o=r<<5|r>>>27,n=o+s+n-1894007588+l[a+2]<<0,i=i<<30|i>>>2,s=r&i|r&t|i&t,o=n<<5|n>>>27,e=o+s+e-1894007588+l[a+3]<<0,r=r<<30|r>>>2,s=n&r|n&i|r&i,o=e<<5|e>>>27,t=o+s+t-1894007588+l[a+4]<<0,n=n<<30|n>>>2;for(;a<80;a+=5)s=e^n^r,o=t<<5|t>>>27,i=o+s+i-899497514+l[a]<<0,e=e<<30|e>>>2,s=t^e^n,o=i<<5|i>>>27,r=o+s+r-899497514+l[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,o=r<<5|r>>>27,n=o+s+n-899497514+l[a+2]<<0,i=i<<30|i>>>2,s=r^i^t,o=n<<5|n>>>27,e=o+s+e-899497514+l[a+3]<<0,r=r<<30|r>>>2,s=n^r^i,o=e<<5|e>>>27,t=o+s+t-899497514+l[a+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0};nn.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return J[t>>28&15]+J[t>>24&15]+J[t>>20&15]+J[t>>16&15]+J[t>>12&15]+J[t>>8&15]+J[t>>4&15]+J[t&15]+J[e>>28&15]+J[e>>24&15]+J[e>>20&15]+J[e>>16&15]+J[e>>12&15]+J[e>>8&15]+J[e>>4&15]+J[e&15]+J[n>>28&15]+J[n>>24&15]+J[n>>20&15]+J[n>>16&15]+J[n>>12&15]+J[n>>8&15]+J[n>>4&15]+J[n&15]+J[r>>28&15]+J[r>>24&15]+J[r>>20&15]+J[r>>16&15]+J[r>>12&15]+J[r>>8&15]+J[r>>4&15]+J[r&15]+J[i>>28&15]+J[i>>24&15]+J[i>>20&15]+J[i>>16&15]+J[i>>12&15]+J[i>>8&15]+J[i>>4&15]+J[i&15]};nn.prototype.toString=nn.prototype.hex;nn.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255]};nn.prototype.array=nn.prototype.digest;nn.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};const A2=t=>new nn(!0).update(t).hex(),Ev=(...t)=>A2(t.join("_"));class I2{}const N2=new Map;class Mp extends I2{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,n){return Promise.resolve(this.cache.get(Ev(e,n))??null)}async update(e,n,r){this.cache.set(Ev(e,n),r)}static global(){return new Mp(N2)}}class Fx extends ri{}class Ux extends Fx{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Lu(this.value)]}}class j2 extends Fx{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return cx(this.messages)}toChatMessages(){return this.messages}}var qu={};qu.byteLength=D2;qu.toByteArray=F2;qu.fromByteArray=B2;var dn=[],Rt=[],$2=typeof Uint8Array<"u"?Uint8Array:Array,ad="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pi=0,L2=ad.length;pi<L2;++pi)dn[pi]=ad[pi],Rt[ad.charCodeAt(pi)]=pi;Rt[45]=62;Rt[95]=63;function Vx(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function D2(t){var e=Vx(t),n=e[0],r=e[1];return(n+r)*3/4-r}function M2(t,e,n){return(e+n)*3/4-n}function F2(t){var e,n=Vx(t),r=n[0],i=n[1],s=new $2(M2(t,r,i)),a=0,o=i>0?r-4:r,l;for(l=0;l<o;l+=4)e=Rt[t.charCodeAt(l)]<<18|Rt[t.charCodeAt(l+1)]<<12|Rt[t.charCodeAt(l+2)]<<6|Rt[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Rt[t.charCodeAt(l)]<<2|Rt[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=Rt[t.charCodeAt(l)]<<10|Rt[t.charCodeAt(l+1)]<<4|Rt[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function U2(t){return dn[t>>18&63]+dn[t>>12&63]+dn[t>>6&63]+dn[t&63]}function V2(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(U2(r));return i.join("")}function B2(t){for(var e,n=t.length,r=n%3,i=[],s=16383,a=0,o=n-r;a<o;a+=s)i.push(V2(t,a,a+s>o?o:a+s));return r===1?(e=t[n-1],i.push(dn[e>>2]+dn[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(dn[e>>10]+dn[e>>4&63]+dn[e<<2&63]+"=")),i.join("")}var z2=Object.defineProperty,H2=(t,e,n)=>e in t?z2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,W2=(t,e,n)=>(H2(t,e+"",n),n);function G2(t,e){let n=Array.from({length:t.length},(r,i)=>({start:i,end:i+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){const s=t.slice(n[i].start,n[i+1].end),a=e.get(s.join(","));a!=null&&(r==null||a<r[0])&&(r=[a,i])}if(r!=null){const i=r[1];n[i]={start:n[i].start,end:n[i+1].end},n.splice(i+1,1)}else break}return n}function Z2(t,e){return t.length===1?[e.get(t.join(","))]:G2(t,e).map(n=>e.get(t.slice(n.start,n.end).join(","))).filter(n=>n!=null)}function q2(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Ff=class{constructor(t,e){Un(this,"specialTokens");Un(this,"inverseSpecialTokens");Un(this,"patStr");Un(this,"textEncoder",new TextEncoder);Un(this,"textDecoder",new TextDecoder("utf-8"));Un(this,"rankMap",new Map);Un(this,"textMap",new Map);this.patStr=t.pat_str;const n=t.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{const[s,a,...o]=i.split(" "),l=Number.parseInt(a,10);return o.forEach((u,c)=>r[u]=l+c),r},{});for(const[r,i]of Object.entries(n)){const s=qu.toByteArray(r);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,s])=>(r[s]=this.textEncoder.encode(i),r),{})}encode(t,e=[],n="all"){const r=new RegExp(this.patStr,"ug"),i=Ff.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(n==="all"?Object.keys(this.specialTokens).filter(u=>!a.has(u)):n);if(o.size>0){const u=Ff.specialTokenRegex([...o]),c=t.match(u);if(c!=null)throw new Error(`The text contains a special token that is not allowed: ${c[0]}`)}let l=0;for(;;){let u=null,c=l;for(;i.lastIndex=c,u=i.exec(t),!(u==null||a.has(u[0]));)c=u.index+1;const d=(u==null?void 0:u.index)??t.length;for(const h of t.substring(l,d).matchAll(r)){const p=this.textEncoder.encode(h[0]),v=this.rankMap.get(p.join(","));if(v!=null){s.push(v);continue}s.push(...Z2(p,this.rankMap))}if(u==null)break;let f=this.specialTokens[u[0]];s.push(f),l=u.index+u[0].length}return s}decode(t){const e=[];let n=0;for(let s=0;s<t.length;++s){const a=t[s],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),n+=o.length)}const r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.length;return this.textDecoder.decode(r)}},Bx=Ff;W2(Bx,"specialTokenRegex",t=>new RegExp(t.map(e=>q2(e)).join("|"),"g"));function K2(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":return"o200k_base";default:throw new Error("Unknown model")}}const Uo={},J2=new $p({});async function X2(t){return t in Uo||(Uo[t]=J2.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new Bx(e)).catch(e=>{throw delete Uo[t],e})),await Uo[t]}async function Q2(t){return X2(K2(t))}const Y2=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t,eD=()=>!1;class tD extends Oe{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??eD(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class nD extends tD{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:n,...r}){super({callbacks:e??n,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r.cache=="object"?this.cache=r.cache:r.cache?this.cache=Mp.global():this.cache=void 0,this.caller=new $p(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let n=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Q2("modelName"in this?Y2(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{n=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return n}static _convertInputToPromptValue(e){return typeof e=="string"?new Ux(e):Array.isArray(e)?new j2(e.map(Us)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...n}){const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([a,o])=>o!==void 0).map(([a,o])=>`${a}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class Ql extends Oe{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,n){const r=se(n);return this.func&&await this.func(e,r),this._callWithConfig(i=>Promise.resolve(i),e,r)}async*transform(e,n){const r=se(n);let i,s=!0;for await(const a of this._transformStreamWithConfig(e,o=>o,r))if(yield a,s)if(i===void 0)i=a;else try{i=Xt(i,a)}catch{i=void 0,s=!1}this.func&&i!==void 0&&await this.func(i,r)}static assign(e){return new Mx(new ys({steps:e}))}}function Yl(t){return typeof(t==null?void 0:t.parse)=="function"}class qn extends nD{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptionsCompat(e){const[n,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=n.signal,[n,r]}async invoke(e,n){const r=qn._convertInputToPromptValue(e);return(await this.generatePrompt([r],n,n==null?void 0:n.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,n,r){throw new Error("Not implemented.")}async*_streamIterator(e,n){var r;if(this._streamResponseChunks===qn.prototype._streamResponseChunks)yield this.invoke(e,n);else{const s=qn._convertInputToPromptValue(e).toChatMessages(),[a,o]=this._separateRunnableConfigFromCallOptionsCompat(n),l={...a.metadata,...this.getLsParams(o)},u=await _t.configure(a.callbacks,this.callbacks,a.tags,this.tags,l,this.metadata,{verbose:this.verbose}),c={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},d=await(u==null?void 0:u.handleChatModelStart(this.toJSON(),[s],a.runId,void 0,c,void 0,void 0,a.runName));let f,h;try{for await(const p of this._streamResponseChunks(s,o,d==null?void 0:d[0])){if(p.message.id==null){const v=(r=d==null?void 0:d.at(0))==null?void 0:r.runId;v!=null&&p.message._updateId(`run-${v}`)}p.message.response_metadata={...p.generationInfo,...p.message.response_metadata},yield p.message,f?f=f.concat(p):f=p,Ay(p.message)&&p.message.usage_metadata!==void 0&&(h={tokenUsage:{promptTokens:p.message.usage_metadata.input_tokens,completionTokens:p.message.usage_metadata.output_tokens,totalTokens:p.message.usage_metadata.total_tokens}})}}catch(p){throw await Promise.all((d??[]).map(v=>v==null?void 0:v.handleLLMError(p))),p}await Promise.all((d??[]).map(p=>p==null?void 0:p.handleLLMEnd({generations:[[f]],llmOutput:h})))}}getLsParams(e){return{ls_model_type:"chat",ls_stop:e.stop}}async _generateUncached(e,n,r){var h,p;const i=e.map(v=>v.map(Us)),s={...r.metadata,...this.getLsParams(n)},a=await _t.configure(r.callbacks,this.callbacks,r.tags,this.tags,s,this.metadata,{verbose:this.verbose}),o={options:n,invocation_params:this==null?void 0:this.invocationParams(n),batch_size:1},l=await(a==null?void 0:a.handleChatModelStart(this.toJSON(),i,r.runId,void 0,o,void 0,void 0,r.runName)),u=[],c=[];if(!!(l!=null&&l[0].handlers.find(v=>Lx(v)||$x(v)))&&i.length===1&&this._streamResponseChunks!==qn.prototype._streamResponseChunks)try{const v=await this._streamResponseChunks(i[0],n,l==null?void 0:l[0]);let w,m;for await(const g of v){if(g.message.id==null){const y=(h=l==null?void 0:l.at(0))==null?void 0:h.runId;y!=null&&g.message._updateId(`run-${y}`)}w===void 0?w=g:w=Xt(w,g),Ay(g.message)&&g.message.usage_metadata!==void 0&&(m={tokenUsage:{promptTokens:g.message.usage_metadata.input_tokens,completionTokens:g.message.usage_metadata.output_tokens,totalTokens:g.message.usage_metadata.total_tokens}})}if(w===void 0)throw new Error("Received empty response from chat model call.");u.push([w]),await(l==null?void 0:l[0].handleLLMEnd({generations:u,llmOutput:m}))}catch(v){throw await(l==null?void 0:l[0].handleLLMError(v)),v}else{const v=await Promise.allSettled(i.map((w,m)=>this._generate(w,{...n,promptIndex:m},l==null?void 0:l[m])));await Promise.all(v.map(async(w,m)=>{var g,y,b;if(w.status==="fulfilled"){const x=w.value;for(const T of x.generations){if(T.message.id==null){const R=(g=l==null?void 0:l.at(0))==null?void 0:g.runId;R!=null&&T.message._updateId(`run-${R}`)}T.message.response_metadata={...T.generationInfo,...T.message.response_metadata}}return x.generations.length===1&&(x.generations[0].message.response_metadata={...x.llmOutput,...x.generations[0].message.response_metadata}),u[m]=x.generations,c[m]=x.llmOutput,(y=l==null?void 0:l[m])==null?void 0:y.handleLLMEnd({generations:[x.generations],llmOutput:x.llmOutput})}else return await((b=l==null?void 0:l[m])==null?void 0:b.handleLLMError(w.reason)),Promise.reject(w.reason)}))}const f={generations:u,llmOutput:c.length?(p=this._combineLLMOutput)==null?void 0:p.call(this,...c):void 0};return Object.defineProperty(f,gv,{value:l?{runIds:l==null?void 0:l.map(v=>v.runId)}:void 0,configurable:!0}),f}async _generateCached({messages:e,cache:n,llmStringKey:r,parsedOptions:i,handledOptions:s}){const a=e.map(w=>w.map(Us)),o={...s.metadata,...this.getLsParams(i)},l=await _t.configure(s.callbacks,this.callbacks,s.tags,this.tags,o,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1,cached:!0},c=await(l==null?void 0:l.handleChatModelStart(this.toJSON(),a,s.runId,void 0,u,void 0,void 0,s.runName)),d=[],h=(await Promise.allSettled(a.map(async(w,m)=>{const g=qn._convertInputToPromptValue(w).toString(),y=await n.lookup(g,r);return y==null&&d.push(m),y}))).map((w,m)=>({result:w,runManager:c==null?void 0:c[m]})).filter(({result:w})=>w.status==="fulfilled"&&w.value!=null||w.status==="rejected"),p=[];await Promise.all(h.map(async({result:w,runManager:m},g)=>{if(w.status==="fulfilled"){const y=w.value;return p[g]=y,y.length&&await(m==null?void 0:m.handleLLMNewToken(y[0].text)),m==null?void 0:m.handleLLMEnd({generations:[y]})}else return await(m==null?void 0:m.handleLLMError(w.reason)),Promise.reject(w.reason)}));const v={generations:p,missingPromptIndices:d};return Object.defineProperty(v,gv,{value:c?{runIds:c==null?void 0:c.map(w=>w.runId)}:void 0,configurable:!0}),v}async generate(e,n,r){let i;Array.isArray(n)?i={stop:n}:i=n;const s=e.map(h=>h.map(Us)),[a,o]=this._separateRunnableConfigFromCallOptionsCompat(i);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(s,o,a);const{cache:l}=this,u=this._getSerializedCacheKeyParametersForCall(o),{generations:c,missingPromptIndices:d}=await this._generateCached({messages:s,cache:l,llmStringKey:u,parsedOptions:o,handledOptions:a});let f={};if(d.length>0){const h=await this._generateUncached(d.map(p=>s[p]),o,a);await Promise.all(h.generations.map(async(p,v)=>{const w=d[v];c[w]=p;const m=qn._convertInputToPromptValue(s[w]).toString();return l.update(m,u,p)})),f=h.llmOutput??{}}return{generations:c,llmOutput:f}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,n,r){const i=e.map(s=>s.toChatMessages());return this.generate(i,n,r)}async call(e,n,r){return(await this.generate([e.map(Us)],n,r)).generations[0][0].message}async callPrompt(e,n,r){const i=e.toChatMessages();return this.call(i,n,r)}async predictMessages(e,n,r){return this.call(e,n,r)}async predict(e,n,r){const i=new Lu(e),s=await this.call([i],n,r);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content}withStructuredOutput(e,n){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');const r=e,i=n==null?void 0:n.name,s=r.description??"A function available to call.",a=n==null?void 0:n.method,o=n==null?void 0:n.includeRaw;if(a==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l=i??"extract",u;Yl(r)?u=[{type:"function",function:{name:l,description:s,parameters:ro(r)}}]:("name"in r&&(l=r.name),u=[{type:"function",function:{name:l,description:s,parameters:r}}]);const c=this.bindTools(u),d=uo.from(v=>{if(!v.tool_calls||v.tool_calls.length===0)throw new Error("No tool calls found in the response.");const w=v.tool_calls.find(m=>m.name===l);if(!w)throw new Error(`No tool call found with name ${l}.`);return w.args});if(!o)return c.pipe(d).withConfig({runName:"StructuredOutput"});const f=Ql.assign({parsed:(v,w)=>d.invoke(v.raw,w)}),h=Ql.assign({parsed:()=>null}),p=f.withFallbacks({fallbacks:[h]});return kn.from([{raw:c},p]).withConfig({runName:"StructuredOutputRunnable"})}}const gi="0.5.0";let Tv=!1,ia,zx,Hx,Uf,Wx,Gx,Zx,qx,Kx;function rD(t,e={auto:!1}){if(Tv)throw new Error(`you must \`import 'groq-sdk/shims/${t.kind}'\` before importing anything else from groq-sdk`);if(ia)throw new Error(`can't \`import 'groq-sdk/shims/${t.kind}'\` after \`import 'groq-sdk/shims/${ia}'\``);Tv=e.auto,ia=t.kind,zx=t.fetch,Hx=t.FormData,Uf=t.File,Wx=t.ReadableStream,Gx=t.getMultipartRequestOptions,Zx=t.getDefaultAgent,qx=t.fileFromPath,Kx=t.isFsReadStream}class iD{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function sD({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new iD(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:a=>!1}}ia||rD(sD(),{auto:!0});class Yt extends Error{}class Je extends Yt{constructor(e,n,r,i){super(`${Je.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e)return new Ku({cause:zf(n)});const s=n;return e===400?new Xx(e,s,r,i):e===401?new Qx(e,s,r,i):e===403?new Yx(e,s,r,i):e===404?new e1(e,s,r,i):e===409?new t1(e,s,r,i):e===422?new n1(e,s,r,i):e===429?new r1(e,s,r,i):e>=500?new i1(e,s,r,i):new Je(e,s,r,i)}}class Vf extends Je{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class Ku extends Je{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class Jx extends Ku{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Xx extends Je{constructor(){super(...arguments),this.status=400}}class Qx extends Je{constructor(){super(...arguments),this.status=401}}class Yx extends Je{constructor(){super(...arguments),this.status=403}}class e1 extends Je{constructor(){super(...arguments),this.status=404}}class t1 extends Je{constructor(){super(...arguments),this.status=409}}class n1 extends Je{constructor(){super(...arguments),this.status=422}}class r1 extends Je{constructor(){super(...arguments),this.status=429}}class i1 extends Je{}class Di{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;const i=new aD;async function*s(){if(!e.body)throw n.abort(),new Yt("Attempted to iterate over a response with no body");const o=new ai,l=Pv(e.body);for await(const u of l)for(const c of o.decode(u)){const d=i.decode(c);d&&(yield d)}for(const u of o.flush()){const c=i.decode(u);c&&(yield c)}}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let o=!1;try{for await(const l of s())if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null){let u;try{u=JSON.parse(l.data)}catch(c){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),c}if(u&&u.error)throw new Je(void 0,u.error,void 0,void 0);yield u}}o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||n.abort()}}return new Di(a,n)}static fromReadableStream(e,n){let r=!1;async function*i(){const a=new ai,o=Pv(e);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of i())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new Di(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=r.next();e.push(a),n.push(a)}return s.shift()}});return[new Di(()=>i(e),this.controller),new Di(()=>i(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new Wx({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await n.next();if(a)return i.close();const o=r.encode(JSON.stringify(s)+`
`);i.enqueue(o)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}class aD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=oD(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}class ai{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let n=this.decodeText(e);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=ai.NEWLINE_CHARS.has(n[n.length-1]||"");let i=n.split(ai.NEWLINE_REGEXP);return i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Yt(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Yt(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Yt("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}ai.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);ai.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function oD(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}function Pv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const s1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",a1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Fp(t),Fp=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",lD=t=>a1(t)||s1(t)||Kx(t);async function o1(t,e,n){var i;if(t=await t,n??(n=a1(t)?{lastModified:t.lastModified,type:t.type}:{}),s1(t)){const s=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Uf([s],e,n)}const r=await uD(t);if(e||(e=dD(t)??"unknown_file"),!n.type){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new Uf(r,e,n)}async function uD(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Fp(t))e.push(await t.arrayBuffer());else if(fD(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${cD(t)}`);return e}function cD(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function dD(t){var e;return od(t.name)||od(t.filename)||((e=od(t.path))==null?void 0:e.split(/[\\/]/).pop())}const od=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},fD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",kv=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",l1=async t=>{const e=await hD(t.body);return Gx(e,t)},hD=async t=>{const e=new Hx;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Bf(e,n,r))),e},Bf=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(lD(n)){const r=await o1(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Bf(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>Bf(t,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Wi={};async function u1(t){const{response:e}=t;if(t.options.stream)return Gi("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Di.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const s=await e.json();return Gi("response",e.status,e.url,e.headers,s),s}const i=await e.text();return Gi("response",e.status,e.url,e.headers,i),i}class Ju extends Promise{constructor(e,n=u1){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new Ju(this.responsePromise,async n=>e(await this.parseResponse(n)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class pD{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e4,httpAgent:i,fetch:s}){this.baseURL=e,this.maxRetries=ld("maxRetries",n),this.timeout=ld("timeout",r),this.httpAgent=i,this.fetch=s??zx}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...wD(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${PD()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&Fp(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:n,...i,body:s}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){var p;const{method:n,path:r,query:i,headers:s={}}=e,a=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:kv(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(r,i);"timeout"in e&&ld("timeout",e.timeout);const u=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??Zx(l),d=u+1e3;typeof((p=c==null?void 0:c.options)==null?void 0:p.timeout)=="number"&&d>(c.options.timeout??0)&&(c.options.timeout=d),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:e,headers:s,contentLength:o});return{req:{method:n,...a&&{body:a},headers:f,...c&&{agent:c},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:n,contentLength:r}){const i={};r&&(i["content-length"]=r);const s=this.defaultHeaders(e);return Iv(i,s),Iv(i,n),kv(e.body)&&ia!=="node"&&delete i["content-type"],this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,i){return Je.generate(e,n,r,i)}request(e,n=null){return new Ju(this.makeRequest(e,n))}async makeRequest(e,n){var c,d;const r=await e;n==null&&(n=r.maxRetries??this.maxRetries),await this.prepareOptions(r);const{req:i,url:s,timeout:a}=this.buildRequest(r);if(await this.prepareRequest(i,{url:s,options:r}),Gi("request",s,r,i.headers),(c=r.signal)!=null&&c.aborted)throw new Vf;const o=new AbortController,l=await this.fetchWithTimeout(s,i,a,o).catch(zf);if(l instanceof Error){if((d=r.signal)!=null&&d.aborted)throw new Vf;if(n)return this.retryRequest(r,n);throw l.name==="AbortError"?new Jx:new Ku({cause:l})}const u=gD(l.headers);if(!l.ok){if(n&&this.shouldRetry(l)){const m=`retrying, ${n} attempts remaining`;return Gi(`response (error; ${m})`,l.status,s,u),this.retryRequest(r,n,u)}const f=await l.text().catch(m=>zf(m).message),h=_D(f),p=h?void 0:f;throw Gi(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,l.status,s,u,p),this.makeStatusError(l.status,h,p,u)}return{response:l,options:r,controller:o}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new mD(this,r,e)}buildURL(e,n){const r=xD(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return ED(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Yt(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,i){const{signal:s,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let i;const s=r==null?void 0:r["retry-after-ms"];if(s){const o=parseFloat(s);Number.isNaN(o)||(i=o)}const a=r==null?void 0:r["retry-after"];if(a&&!i){const o=parseFloat(a);Number.isNaN(o)?i=Date.parse(a)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=e.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,o)}return await SD(i),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${gi}`}}class mD extends Ju{constructor(e,n,r){super(n,async i=>new r(e,i.response,await u1(i),i.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const gD=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),yD=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gi,"X-Stainless-OS":Rv(Deno.build.os),"X-Stainless-Arch":Cv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gi,"X-Stainless-OS":Rv(process.platform),"X-Stainless-Arch":Cv(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=vD();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vD(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${s}.${a}`}}}return null}const Cv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Rv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ov;const wD=()=>Ov??(Ov=yD()),_D=t=>{try{return JSON.parse(t)}catch{return}},bD=new RegExp("^(?:[a-z]+:)?//","i"),xD=t=>bD.test(t),SD=t=>new Promise(e=>setTimeout(e,t)),ld=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Yt(`${t} must be an integer`);if(e<0)throw new Yt(`${t} must be a positive integer`);return e},zf=t=>t instanceof Error?t:new Error(t),Av=t=>{var e,n,r,i;if(typeof process<"u")return((e=Wi==null?void 0:Wi[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(i=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:i.trim()};function ED(t){if(!t)return!0;for(const e in t)return!1;return!0}function TD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Iv(t,e){for(const n in e){if(!TD(e,n))continue;const r=n.toLowerCase();if(!r)continue;const i=e[n];i===null?delete t[r]:i!==void 0&&(t[r]=i)}}function Gi(t,...e){typeof process<"u"&&(Wi==null?void 0:Wi.DEBUG)==="true"&&console.log(`Groq:DEBUG:${t}`,...e)}const PD=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),kD=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class Cr{constructor(e){this._client=e}}class eu extends Cr{create(e,n){return this._client.post("/openai/v1/audio/transcriptions",l1({body:e,...n}))}}eu||(eu={});class tu extends Cr{create(e,n){return this._client.post("/openai/v1/audio/translations",l1({body:e,...n}))}}tu||(tu={});class nu extends Cr{constructor(){super(...arguments),this.transcriptions=new eu(this._client),this.translations=new tu(this._client)}}(function(t){t.Transcriptions=eu,t.Translations=tu})(nu||(nu={}));let ru=class extends Cr{create(e,n){return this._client.post("/openai/v1/chat/completions",{body:e,...n,stream:e.stream??!1})}};ru||(ru={});class iu extends Cr{constructor(){super(...arguments),this.completions=new ru(this._client)}}(function(t){t.Completions=ru})(iu||(iu={}));class su extends Cr{}su||(su={});class au extends Cr{create(e,n){return this._client.post("/openai/v1/embeddings",{body:e,...n})}}au||(au={});class ou extends Cr{retrieve(e,n){return this._client.get(`/openai/v1/models/${e}`,n)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,n){return this._client.delete(`/openai/v1/models/${e}`,n)}}ou||(ou={});var c1;class Pe extends pD{constructor({baseURL:e=Av("GROQ_BASE_URL"),apiKey:n=Av("GROQ_API_KEY"),...r}={}){if(n===void 0)throw new Yt("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const i={apiKey:n,...r,baseURL:e||"https://api.groq.com"};if(!i.dangerouslyAllowBrowser&&kD())throw new Yt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Groq({ apiKey, dangerouslyAllowBrowser: true })`);super({baseURL:i.baseURL,timeout:i.timeout??6e4,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new su(this),this.chat=new iu(this),this.embeddings=new au(this),this.audio=new nu(this),this.models=new ou(this),this._options=i,this.apiKey=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}c1=Pe;Pe.Groq=c1;Pe.GroqError=Yt;Pe.APIError=Je;Pe.APIConnectionError=Ku;Pe.APIConnectionTimeoutError=Jx;Pe.APIUserAbortError=Vf;Pe.NotFoundError=e1;Pe.ConflictError=t1;Pe.RateLimitError=r1;Pe.BadRequestError=Xx;Pe.AuthenticationError=Qx;Pe.InternalServerError=i1;Pe.PermissionDeniedError=Yx;Pe.UnprocessableEntityError=n1;Pe.toFile=o1;Pe.fileFromPath=qx;(function(t){t.Completions=su,t.Chat=iu,t.Embeddings=au,t.Audio=nu,t.Models=ou})(Pe||(Pe={}));class CD extends Oe{parseResultWithPrompt(e,n,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,n){return typeof e=="string"?this._callWithConfig(async(r,i)=>this.parseResult([{text:r}],i==null?void 0:i.callbacks),e,{...n,runType:"parser"}):this._callWithConfig(async(r,i)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],i==null?void 0:i.callbacks),e,{...n,runType:"parser"})}}class d1 extends CD{parseResult(e,n){return this.parse(e[0].text,n)}async parseWithPrompt(e,n,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class Up extends Error{constructor(e,n,r,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=n,this.observation=r,this.sendToLLM=i,i&&(r===void 0||n===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true")}}function Hf(t,e){const n=typeof t;if(n!==typeof e)return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!Hf(t[i],e[i]))return!1;return!0}if(n==="object"){if(!t||!e)return t===e;const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const a of r)if(!Hf(t[a],e[a]))return!1;return!0}return t===e}class RD extends d1{async*_transform(e){for await(const n of e)typeof n=="string"?yield this.parseResult([{text:n}]):yield this.parseResult([{message:n,text:this._baseMessageToString(n)}])}async*transform(e,n){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...n,runType:"parser"})}}class f1 extends RD{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let n,r;for await(const i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let s;if(DI(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");s=new qr({message:i,text:i.content})}else if(bp(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");s=new qr({message:HI(i),text:i.content})}else s=new as({text:i});r===void 0?r=s:r=r.concat(s);const a=await this.parsePartialResult([r]);a!=null&&!Hf(a,n)&&(this.diff?yield this._diff(n,a):yield a,n=a)}}getFormatInstructions(){return""}}class OD extends d1{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const n=Zr.object(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Zr.string().describe(i)])));return new this(n)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(ro(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,s)=>`"${s.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(r))}catch(n){throw new Up(`Failed to parse. Text: "${e}". Error: ${n}`,e)}}}class AD extends f1{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,n){if(n)return e?hN(e,n):[{op:"replace",path:"",value:n}]}async parsePartialResult(e){return Py(e[0].text)}async parse(e){return Py(e,JSON.parse)}getFormatInstructions(){return""}}function h1(t,e){if(t.function===void 0)return;let n;if(e!=null&&e.partial)try{n=wp(t.function.arguments??"{}")}catch{return}else try{n=JSON.parse(t.function.arguments)}catch(i){throw new Up([`Function "${t.function.name}" arguments:`,"",t.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}const r={name:t.function.name,args:n,type:"tool_call"};return e!=null&&e.returnId&&(r.id=t.id),r}function ID(t){if(t.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:t.id,type:"function",function:{name:t.name,arguments:JSON.stringify(t.args)}}}function ND(t,e){var n,r;return{name:(n=t.function)==null?void 0:n.name,args:(r=t.function)==null?void 0:r.arguments,id:t.id,error:e,type:"invalid_tool_call"}}class jD extends f1{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,n=!0){var a;const r=e[0].message;let i;if(lx(r)&&((a=r.tool_calls)!=null&&a.length)?i=r.tool_calls.map(o=>{const{id:l,...u}=o;return this.returnId?{id:l,...u}:u}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(l=>h1(l,{returnId:this.returnId,partial:n}))),!i)return[];const s=[];for(const o of i)if(o!==void 0){const l={type:o.name,args:o.args,id:o.id};s.push(l)}return s}}class Nv extends jD{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const n=await this.zodSchema.safeParseAsync(e);if(n.success)return n.data;throw new Up(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(n.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(s=>s.type===this.keyName);let i=r;if(r.length)return this.returnId||(i=r.map(s=>s.args)),this.returnSingle?i[0]:i}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(a=>a.type===this.keyName);let i=r;return r.length?(this.returnId||(i=r.map(a=>a.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(a=>this._validateResult(a)))):void 0}}function $D(t,e){return{name:t.name,description:t.description,parameters:ro(t.schema)}}function LD(t,e){let n;return UD(t)?n={type:"function",function:$D(t)}:n=t,n}function DD(t){return t!==void 0&&Array.isArray(t.lc_namespace)}function MD(t){return t!==void 0&&Oe.isRunnable(t)&&"lc_name"in t.constructor&&typeof t.constructor.lc_name=="function"&&t.constructor.lc_name()==="RunnableToolLike"}function FD(t){return!!t&&typeof t=="object"&&"name"in t&&"schema"in t&&Yl(t.schema)}function UD(t){return FD(t)||MD(t)||DD(t)}function VD(t){const e=t._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";default:throw new Error(`Unknown message type: ${e}`)}}function jv(t){return t.map(e=>{var r;if(typeof e.content!="string")throw new Error("Non string message content not supported");const n={role:VD(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id};return lx(e)&&((r=e.tool_calls)!=null&&r.length)?n.tool_calls=e.tool_calls.map(ID):(e.additional_kwargs.tool_calls!=null&&(n.tool_calls=e.additional_kwargs.tool_calls),e.tool_call_id!=null&&(n.tool_call_id=e.tool_call_id)),n})}function BD(t,e){const n=t.tool_calls;switch(t.role){case"assistant":{const r=[],i=[];for(const s of n??[])try{r.push(h1(s,{returnId:!0}))}catch(a){i.push(ND(s,a.message))}return new Rf({content:t.content||"",additional_kwargs:{tool_calls:n},tool_calls:r,invalid_tool_calls:i,usage_metadata:e})}default:return new ju(t.content||"",t.role??"unknown")}}function zD(t,e){if(t!=null&&t.length)return t.map(n=>{var r,i;return{id:n.id,name:(r=n.function)==null?void 0:r.name,args:(i=n.function)==null?void 0:i.arguments,type:"tool_call_chunk",index:e}})}function HD(t,e,n){const{role:r}=t,i=t.content??"";let s;t.function_call?s={function_call:t.function_call}:t.tool_calls?s={tool_calls:t.tool_calls}:s={};let a,o;if(n!=null&&n.usage&&(a={input_tokens:n.usage.prompt_tokens,output_tokens:n.usage.completion_tokens,total_tokens:n.usage.total_tokens},o=n.id),r==="user")return{message:new Du({content:i})};if(r==="assistant"){const l=zD(t.tool_calls,e);return{message:new br({content:i,additional_kwargs:s,tool_call_chunks:l?l.map(u=>({type:u.type,args:u.args,index:u.index})):void 0,usage_metadata:a,id:o}),toolCallData:l?l.map(u=>({id:u.id??"",name:u.name??"",index:u.index??e,type:"tool_call_chunk"})):void 0}}else return r==="system"?{message:new Mu({content:i})}:{message:new $u({content:i,role:r})}}class WD extends qn{static lc_name(){return"ChatGroq"}_llmType(){return"groq"}get lc_secrets(){return{apiKey:"GROQ_API_KEY"}}constructor(e){super(e??{}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","groq"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0});const n=(e==null?void 0:e.apiKey)||ii("GROQ_API_KEY");if(!n)throw new Error('Groq API key not found. Please set the GROQ_API_KEY environment variable or provide the key into "apiKey"');this.client=new Pe({apiKey:n,dangerouslyAllowBrowser:!0}),this.apiKey=n,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.modelName=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.model=this.modelName,this.streaming=(e==null?void 0:e.streaming)??this.streaming,this.stop=(e==null?void 0:e.stopSequences)??(typeof(e==null?void 0:e.stop)=="string"?[e.stop]:e==null?void 0:e.stop)??[],this.stopSequences=this.stop,this.maxTokens=e==null?void 0:e.maxTokens}getLsParams(e){const n=this.invocationParams(e);return{ls_provider:"groq",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:n.temperature??this.temperature,ls_max_tokens:n.max_tokens??this.maxTokens,ls_stop:e.stop}}async completionWithRetry(e,n){return this.caller.call(async()=>this.client.chat.completions.create(e,n))}invocationParams(e){const n=super.invocationParams(e);return e.tool_choice!==void 0&&(n.tool_choice=e.tool_choice),e.tools!==void 0&&(n.tools=e.tools),e.response_format!==void 0&&(n.response_format=e.response_format),{...n,stop:e.stop??this.stopSequences,model:this.model,temperature:this.temperature,max_tokens:this.maxTokens}}bindTools(e,n){return this.bind({tools:e.map(r=>LD(r)),...n})}async*_streamResponseChunks(e,n,r){var c,d;const i=this.invocationParams(n),s=jv(e),a=await this.completionWithRetry({...i,messages:s,stream:!0},{signal:n==null?void 0:n.signal,headers:n==null?void 0:n.headers});let o="";const l=[];let u;for await(const f of a){u=f;const h=f==null?void 0:f.choices[0];if(!h)continue;(c=h.delta)!=null&&c.role&&(o=h.delta.role);const{message:p,toolCallData:v}=HD({...h.delta,role:o},h.index,f.x_groq);if(v){const m=v.filter(g=>l.every(y=>y.id!==g.id));l.push(...m),yield new qr({message:new br({content:"",tool_call_chunks:m}),text:""})}const w=new qr({message:p,text:h.delta.content??"",generationInfo:{finishReason:h.finish_reason}});yield w,r==null||r.handleLLMNewToken(w.text??"")}if(u&&("choices"in u&&delete u.choices,yield new qr({message:new br({content:"",response_metadata:u}),text:""})),(d=n.signal)!=null&&d.aborted)throw new Error("AbortError")}async _generate(e,n,r){var i;if(this.streaming){const s={},a=this._streamResponseChunks(e,n,r),o={};for await(const u of a){const c=((i=u.generationInfo)==null?void 0:i.completion)??0;o[c]===void 0?o[c]=u:o[c]=o[c].concat(u)}return{generations:Object.entries(o).sort(([u],[c])=>parseInt(u,10)-parseInt(c,10)).map(([u,c])=>c),llmOutput:{estimatedTokenUsage:s}}}else return this._generateNonStreaming(e,n,r)}async _generateNonStreaming(e,n,r){var u;const i={},s=this.invocationParams(n),a=jv(e),o=await this.completionWithRetry({...s,stream:!1,messages:a},{signal:n==null?void 0:n.signal,headers:n==null?void 0:n.headers});if("usage"in o&&o.usage){const{completion_tokens:c,prompt_tokens:d,total_tokens:f}=o.usage;c&&(i.completionTokens=(i.completionTokens??0)+c),d&&(i.promptTokens=(i.promptTokens??0)+d),f&&(i.totalTokens=(i.totalTokens??0)+f)}const l=[];if("choices"in o&&o.choices)for(const c of o.choices){const d=((u=c.message)==null?void 0:u.content)??"";let f;i.totalTokens!==void 0&&(f={input_tokens:i.promptTokens??0,output_tokens:i.completionTokens??0,total_tokens:i.totalTokens});const h={text:d,message:BD(c.message??{role:"assistant"},f)};h.generationInfo={...c.finish_reason?{finish_reason:c.finish_reason}:{},...c.logprobs?{logprobs:c.logprobs}:{}},l.push(h)}return{generations:l,llmOutput:{tokenUsage:i}}}withStructuredOutput(e,n){const r=e,i=n==null?void 0:n.name,s=n==null?void 0:n.method,a=n==null?void 0:n.includeRaw;let o=i??"extract",l,u;if(s==="jsonMode")u=this.bind({response_format:{type:"json_object"}}),Yl(r)?l=OD.fromZodSchema(r):l=new AD;else if(Yl(r)){const h=ro(r);u=this.bind({tools:[{type:"function",function:{name:o,description:h.description,parameters:h}}],tool_choice:{type:"function",function:{name:o}}}),l=new Nv({returnSingle:!0,keyName:o,zodSchema:r})}else{let h;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(h=r,o=r.name):(o=r.title??o,h={name:o,description:r.description??"",parameters:r}),u=this.bind({tools:[{type:"function",function:h}],tool_choice:{type:"function",function:{name:o}}}),l=new Nv({returnSingle:!0,keyName:o})}if(!a)return u.pipe(l).withConfig({runName:"ChatGroqStructuredOutput"});const c=Ql.assign({parsed:(h,p)=>l.invoke(h.raw,p)}),d=Ql.assign({parsed:()=>null}),f=c.withFallbacks({fallbacks:[d]});return kn.from([{raw:u},f]).withConfig({runName:"ChatGroqStructuredOutput"})}}const GD="modulepreload",ZD=function(t){return"/portfolio/"+t},$v={},ud=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(o=>{if(o=ZD(o),o in $v)return;$v[o]=!0;const l=o.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${u}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":GD,l||(c.as="script",c.crossOrigin=""),c.href=o,a&&c.setAttribute("nonce",a),document.head.appendChild(c),l)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};class qD extends Oe{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=e;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const n=this.partialVariables??{},r={};for(const[s,a]of Object.entries(n))typeof a=="string"?r[s]=a:r[s]=await a();return{...r,...e}}async invoke(e,n){return this._callWithConfig(r=>this.formatPromptValue(r),e,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:n}=await ud(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>Mv);return{PromptTemplate:r}},void 0);return n.deserialize(e)}case void 0:{const{PromptTemplate:n}=await ud(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>Mv);return{PromptTemplate:r}},void 0);return n.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await ud(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-6ffel-kO.js");return{FewShotPromptTemplate:r}},[]);return n.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class KD extends qD{async formatPromptValue(e){const n=await this.format(e);return new Ux(n)}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var JD=Object.prototype.toString,vs=Array.isArray||function(e){return JD.call(e)==="[object Array]"};function Vp(t){return typeof t=="function"}function XD(t){return vs(t)?"array":typeof t}function cd(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Lv(t,e){return t!=null&&typeof t=="object"&&e in t}function QD(t,e){return t!=null&&typeof t!="object"&&t.hasOwnProperty&&t.hasOwnProperty(e)}var YD=RegExp.prototype.test;function eM(t,e){return YD.call(t,e)}var tM=/\S/;function nM(t){return!eM(tM,t)}var rM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function iM(t){return String(t).replace(/[&<>"'`=\/]/g,function(n){return rM[n]})}var sM=/\s*/,aM=/\s+/,Dv=/\s*=/,oM=/\s*\}/,lM=/#|\^|\/|>|\{|&|=|!/;function uM(t,e){if(!t)return[];var n=!1,r=[],i=[],s=[],a=!1,o=!1,l="",u=0;function c(){if(a&&!o)for(;s.length;)delete i[s.pop()];else s=[];a=!1,o=!1}var d,f,h;function p(k){if(typeof k=="string"&&(k=k.split(aM,2)),!vs(k)||k.length!==2)throw new Error("Invalid tags: "+k);d=new RegExp(cd(k[0])+"\\s*"),f=new RegExp("\\s*"+cd(k[1])),h=new RegExp("\\s*"+cd("}"+k[1]))}p(e||ft.tags);for(var v=new co(t),w,m,g,y,b,x;!v.eos();){if(w=v.pos,g=v.scanUntil(d),g)for(var T=0,R=g.length;T<R;++T)y=g.charAt(T),nM(y)?(s.push(i.length),l+=y):(o=!0,n=!0,l+=" "),i.push(["text",y,w,w+1]),w+=1,y===`
`&&(c(),l="",u=0,n=!1);if(!v.scan(d))break;if(a=!0,m=v.scan(lM)||"name",v.scan(sM),m==="="?(g=v.scanUntil(Dv),v.scan(Dv),v.scanUntil(f)):m==="{"?(g=v.scanUntil(h),v.scan(oM),v.scanUntil(f),m="&"):g=v.scanUntil(f),!v.scan(f))throw new Error("Unclosed tag at "+v.pos);if(m==">"?b=[m,g,w,v.pos,l,u,n]:b=[m,g,w,v.pos],u++,i.push(b),m==="#"||m==="^")r.push(b);else if(m==="/"){if(x=r.pop(),!x)throw new Error('Unopened section "'+g+'" at '+w);if(x[1]!==g)throw new Error('Unclosed section "'+x[1]+'" at '+w)}else m==="name"||m==="{"||m==="&"?o=!0:m==="="&&p(g)}if(c(),x=r.pop(),x)throw new Error('Unclosed section "'+x[1]+'" at '+v.pos);return dM(cM(i))}function cM(t){for(var e=[],n,r,i=0,s=t.length;i<s;++i)n=t[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(e.push(n),r=n));return e}function dM(t){for(var e=[],n=e,r=[],i,s,a=0,o=t.length;a<o;++a)switch(i=t[a],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":s=r.pop(),s[5]=i[2],n=r.length>0?r[r.length-1][4]:e;break;default:n.push(i)}return e}function co(t){this.string=t,this.tail=t,this.pos=0}co.prototype.eos=function(){return this.tail===""};co.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};co.prototype.scanUntil=function(e){var n=this.tail.search(e),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function os(t,e){this.view=t,this.cache={".":this.view},this.parent=e}os.prototype.push=function(e){return new os(e,this)};os.prototype.lookup=function(e){var n=this.cache,r;if(n.hasOwnProperty(e))r=n[e];else{for(var i=this,s,a,o,l=!1;i;){if(e.indexOf(".")>0)for(s=i.view,a=e.split("."),o=0;s!=null&&o<a.length;)o===a.length-1&&(l=Lv(s,a[o])||QD(s,a[o])),s=s[a[o++]];else s=i.view[e],l=Lv(i.view,e);if(l){r=s;break}i=i.parent}n[e]=r}return Vp(r)&&(r=r.call(this.view)),r};function st(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}st.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};st.prototype.parse=function(e,n){var r=this.templateCache,i=e+":"+(n||ft.tags).join(":"),s=typeof r<"u",a=s?r.get(i):void 0;return a==null&&(a=uM(e,n),s&&r.set(i,a)),a};st.prototype.render=function(e,n,r,i){var s=this.getConfigTags(i),a=this.parse(e,s),o=n instanceof os?n:new os(n,void 0);return this.renderTokens(a,o,r,e,i)};st.prototype.renderTokens=function(e,n,r,i,s){for(var a="",o,l,u,c=0,d=e.length;c<d;++c)u=void 0,o=e[c],l=o[0],l==="#"?u=this.renderSection(o,n,r,i,s):l==="^"?u=this.renderInverted(o,n,r,i,s):l===">"?u=this.renderPartial(o,n,r,s):l==="&"?u=this.unescapedValue(o,n):l==="name"?u=this.escapedValue(o,n,s):l==="text"&&(u=this.rawValue(o)),u!==void 0&&(a+=u);return a};st.prototype.renderSection=function(e,n,r,i,s){var a=this,o="",l=n.lookup(e[1]);function u(f){return a.render(f,n,r,s)}if(l){if(vs(l))for(var c=0,d=l.length;c<d;++c)o+=this.renderTokens(e[4],n.push(l[c]),r,i,s);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(e[4],n.push(l),r,i,s);else if(Vp(l)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,i.slice(e[3],e[5]),u),l!=null&&(o+=l)}else o+=this.renderTokens(e[4],n,r,i,s);return o}};st.prototype.renderInverted=function(e,n,r,i,s){var a=n.lookup(e[1]);if(!a||vs(a)&&a.length===0)return this.renderTokens(e[4],n,r,i,s)};st.prototype.indentPartial=function(e,n,r){for(var i=n.replace(/[^ \t]/g,""),s=e.split(`
`),a=0;a<s.length;a++)s[a].length&&(a>0||!r)&&(s[a]=i+s[a]);return s.join(`
`)};st.prototype.renderPartial=function(e,n,r,i){if(r){var s=this.getConfigTags(i),a=Vp(r)?r(e[1]):r[e[1]];if(a!=null){var o=e[6],l=e[5],u=e[4],c=a;l==0&&u&&(c=this.indentPartial(a,u,o));var d=this.parse(c,s);return this.renderTokens(d,n,r,c,i)}}};st.prototype.unescapedValue=function(e,n){var r=n.lookup(e[1]);if(r!=null)return r};st.prototype.escapedValue=function(e,n,r){var i=this.getConfigEscape(r)||ft.escape,s=n.lookup(e[1]);if(s!=null)return typeof s=="number"&&i===ft.escape?String(s):i(s)};st.prototype.rawValue=function(e){return e[1]};st.prototype.getConfigTags=function(e){return vs(e)?e:e&&typeof e=="object"?e.tags:void 0};st.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!vs(e))return e.escape};var ft={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){Ga.templateCache=t},get templateCache(){return Ga.templateCache}},Ga=new st;ft.clearCache=function(){return Ga.clearCache()};ft.parse=function(e,n){return Ga.parse(e,n)};ft.render=function(e,n,r,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+XD(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Ga.render(e,n,r,i)};ft.escape=iM;ft.Scanner=co;ft.Context=os;ft.Writer=st;function p1(){ft.escape=t=>t}const m1=t=>{const e=t.split(""),n=[],r=(s,a)=>{for(let o=a;o<e.length;o+=1)if(s.includes(e[o]))return o;return-1};let i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")n.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")n.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){const s=r("}",i);if(s<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:e.slice(i+1,s).join("")}),i=s+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{const s=r("{}",i),a=(s<0?e.slice(i):e.slice(i,s)).join("");n.push({type:"literal",text:a}),i=s<0?e.length:s}}return n},fM=t=>t.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),hM=t=>{p1();const e=ft.parse(t);return fM(e)},pM=(t,e)=>m1(t).reduce((n,r)=>{if(r.type==="variable"){if(r.name in e){const i=typeof e[r.name]=="string"?e[r.name]:JSON.stringify(e[r.name]);return n+i}throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),mM=(t,e)=>(p1(),ft.render(t,e)),Wf={"f-string":pM,mustache:mM},gM={"f-string":m1,mustache:hM},Vs=(t,e,n)=>Wf[e](t,n),yM=(t,e)=>gM[e](t),vM=(t,e,n)=>{if(!(e in Wf)){const r=Object.keys(Wf);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${r}`)}try{const r=n.reduce((i,s)=>(i[s]="foo",i),{});Array.isArray(t)?t.forEach(i=>{if(i.type==="text")Vs(i.text,e,r);else if(i.type==="image_url")if(typeof i.image_url=="string")Vs(i.image_url,e,r);else{const s=i.image_url.url;Vs(s,e,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):Vs(t,e,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}};class Br extends KD{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let n=this.inputVariables;this.partialVariables&&(n=n.concat(Object.keys(this.partialVariables))),vM(this.template,this.templateFormat,n)}}_getPromptType(){return"prompt"}async format(e){const n=await this.mergePartialAndUserVariables(e);return Vs(this.template,this.templateFormat,n)}static fromExamples(e,n,r,i=`

`,s=""){const a=[s,...e,n].join(i);return new Br({inputVariables:r,template:a})}static fromTemplate(e,n){const{templateFormat:r="f-string",...i}=n??{},s=new Set;return yM(e,r).forEach(a=>{a.type==="variable"&&s.add(a.name)}),new Br({inputVariables:[...s],templateFormat:r,template:e,...i})}async partial(e){const n=this.inputVariables.filter(s=>!(s in e)),r={...this.partialVariables??{},...e},i={...this,inputVariables:n,partialVariables:r};return new Br(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Br({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const Mv=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Br},Symbol.toStringTag,{value:"Module"})),wM=()=>{const[t,e]=S.useState("Ask me something..."),n=S.useRef(null),[r,i]=S.useState(""),[s,a]=S.useState(!1),[o,l]=S.useState([]),u=S.useRef(null);S.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[o]);const c=()=>{n.current&&n.current.focus()},d=g=>{i(g.target.value)},f=()=>{const g=`<span class="text-text-green pr-1">$ - </span><span>${r}</span>`;l([...o,g])},h=new WD({apiKey:"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",model:"llama-3.1-70b-versatile",temperature:0}),w=Br.fromTemplate("You are a chatbot that is present on my portfolio website, but you do not know the contents of this website. You will be provided a query. The query can range from a greeting to a question about the cosmos.  Your task will be to respond to the query. Keep the answer as short as possible.  Respond in a html format with divs, spans and a tags where necessary and use tailwind classes for styling.  The text size should be sm and the text colour should be white. Use colors like red, green, blue and yellow for a tags.  Do not set the height of any of the html components and answer in simple paragarphs.  Query: {query}").pipe(h),m=async g=>{await w.invoke({query:g}).then(y=>{l(b=>[...b,y.content]),a(!1)})};return _.jsx(_.Fragment,{children:_.jsxs("div",{className:"absolute left-0 bottom-0 w-full h-1/2 py-3 px-6 text-white bg-secondary-background border-t border-border-color flex flex-col",onClick:c,children:[_.jsxs("div",{className:"flex pb-4 flex-row justify-between relative",children:[_.jsx("div",{className:"uppercase text-xs border-b pb-1 border-orange-color",children:"Terminal"}),_.jsx("div",{className:"absolute -right-4"})]}),_.jsxs("div",{className:"flex-grow overflow-auto scrollbar",ref:u,children:[_.jsx("div",{children:o.map((g,y)=>_.jsx(_M,{text:g},y))}),_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute h-full left-0 top-0  text-text-green ",children:"$ -"}),_.jsx("input",{autoFocus:!0,className:"w-full outline-none pl-10 bg-transparent",type:"text",placeholder:t,ref:n,value:r,onChange:d,onKeyDownCapture:g=>{s||g.key==="Enter"&&(r==="clear"?(l([]),e("Ask me something...")):(a(!0),m(r),f(),scrollTo(n),e("")),i(""))}})]})]})]})})},_M=({text:t})=>_.jsx("div",{dangerouslySetInnerHTML:{__html:t}}),bM=()=>{document.title="Aayush Regmi | Contact";const[t,e]=S.useState(!0);return S.useEffect(()=>{const n=r=>{r.ctrlKey&&r.key==="j"&&(r.preventDefault(),console.log("Ctrl + J was pressed! "+t),e(!t))};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}),_.jsx(_.Fragment,{children:_.jsxs("div",{className:"relative flex flex-col h-full",children:[_.jsx(LO,{showTerminal:t}),t&&_.jsx(wM,{})]})})},xM=[{title:"Rupse Holidays",description:"Website made for the Rupse Holidays travel agency where my role was to work as a frontend developer",ref_img:"./rupse.png",tools:["React","Node JS","Tailwind","Next UI"],url:"https://github.com/ElytraSolutions/Rupse_holidays"},{title:"Upschool",description:"Learning Management System website where I worked in the frontend portion in a team.",ref_img:"./upschool.png",tools:["React","Laravel","Tailwind","Typescript"],url:"https://github.com/ElytraSolutions/upschool_frontend"},{title:"PDF Bot",description:"Takes handwritten pdf from the user and answer questions based on the pdf.",ref_img:"./pdf_bot.png",tools:["Python","LLM","LangChain","RAG","Streamlit"],url:"https://github.com/ayushregmi/Handwritten-PDF-chatbot"},{title:"Face Recognition",description:"Transfer Learning on Yolo to detect faces at real time",ref_img:"./default_project_background.png",tools:["Python","Yolo","PyTorch","Opencv"],url:"https://github.com/ayushregmi/Face-Detection"},{title:"AI News Anchor",description:"Generates audio and video for a given text",ref_img:"./default_project_background.png",tools:["Python","PyTorch","Transformers"],url:"https://github.com/WarClub/Landmark_gen_iter_1"},{title:"Player Recommendation System",description:"Based on a football player's performance from the past 3 seasons, recommend similar players",ref_img:"./default_project_background.png",tools:["Python","pandas","scikit-learn"],url:"https://github.com/WarClub/Football-Players-Recommendation"},{title:"Multimodel Classification",description:"Classifies documents into 5 classes based on the image and text content of the document",ref_img:"./default_project_background.png",tools:["Python","Pytorch"],url:"https://github.com/ayushregmi/Multimodel-classification"}],SM=()=>{document.title="Aayush Regmi | Projects";const t=S.useRef(),e=S.useRef();S.useEffect(()=>{const a=window.innerHeight,o=window.innerWidth;t.current.style.height=`${a-parseInt(o>=768?25:21)-parseInt(o>=900?32:24)}px`},[]);const[n,r]=S.useState(null);S.useEffect(()=>{r(3);const a=new ResizeObserver(o=>{const l=o[0].contentRect.width;l>=1080?e.current.style.gridTemplateColumns="repeat(3, 1fr)":l>680?(e.current.style.gridTemplateColumns="repeat(2, 1fr)",r(2)):(e.current.style.gridTemplateColumns="repeat(1, 1fr)",r(1))});return t.current&&a.observe(t.current),()=>{a.disconnect()}},[]);const i=()=>({transform:["scale3d(1,1,1)","scale3d(2,.3,1)","scale3d(.75,1.25,1)","scale3d(1.25,.85,1)","scale3d(.9,1.05,1)","scale3d(1,1,1)"],transtion:[0,.4,.6,.7,.8,0]}),s=(a,o)=>a.split("").map((u,c)=>{const[d,f]=S.useState(!1);return u===" "?_.jsx("span",{children:""}):_.jsx(Ub.span,{animate:()=>({...i()}),whileHover:()=>{if(!d)return f(!0),i()},onHoverEnd:()=>{f(!1)},className:`${u===" "?"pr-2":""} ${o}`,children:u},c)});return _.jsx(_.Fragment,{children:_.jsxs("div",{ref:t,className:"py-10 px-5 xs:px-8 sm:px-10 ml:px-20 relative w-full overflow-y-scroll overflow-x-hidden bg-default-background/95 text-4xl text-gray-300 scrollbar",children:[_.jsxs("div",{className:"group relative inline-block",children:[_.jsx("div",{className:"flex flex-row items-center",children:s("Projects","text-text-blue")}),_.jsx("div",{className:"absolute -bottom-1 left-2 h-[2px] w-10 bg-text-yellow group-hover:w-11/12 group-hover:left-1 duration-300"})]}),_.jsx("div",{ref:e,className:"grid  mt-8 sm:mt-14 gap-x-3 gap-y-6 sm:px-5",children:xM.map((a,o)=>_.jsx(EM,{project:a},o))})]})})},EM=({project:t})=>{const{title:e,description:n,ref_img:r,tools:i,url:s}=t;return _.jsx(_.Fragment,{children:_.jsxs(Ea,{to:s,className:"group bg-[#171717] relative overflow-hidden rounded-lg border-default-background hover:border-text-green border-2 flex flex-col",children:[_.jsx("div",{className:"overflow-hidden h-[200px] rounded-lg object-center pointer-events-none",children:_.jsx("img",{className:"h-full w-full object-cover object-center group-hover:scale-110 duration-300",src:r,alt:e})}),_.jsxs("div",{className:"flex-grow flex flex-col justify-between",children:[_.jsxs("div",{className:"px-5 pt-5",children:[_.jsx("div",{className:"text-xl font-black",children:e}),_.jsx("div",{className:"text-xs mt-1",children:n})]}),_.jsx("div",{className:"px-5 pt-10 pb-5 flex gap-x-3 gap-y-2 flex-wrap",children:i.map((a,o)=>_.jsx("div",{className:`text-xs border rounded-lg px-2 ${o%3===0?"text-text-green border-text-green":o%3===1?"text-text-blue border-text-blue":"text-text-yellow border-text-yellow"}`,children:a},o))})]})]})})},TM=()=>{const[t,e]=S.useState(0),n=S.useCallback(i=>{for(let s=0;s<tr.length;s++)if(i===tr[s][2])return s},[tr]),r=fs();return S.useEffect(()=>{const i=r.pathname;e(n(i))},[r.pathname,n]),_.jsx(_.Fragment,{children:_.jsxs("div",{className:"w-full flex flex-row h-6 ml:h-8 text-[0.6em] ml:text-[0.7em] lg:text-xs xl:text-sm font-thin ml:font-base",children:[tr.map((i,s)=>_.jsx(PM,{tab_info:i,selected:s===t},s)),_.jsx("div",{className:"border-b border-b-border-color flex-grow bg-secondary-background "})]})})},PM=({tab_info:t,selected:e})=>{const[n,r,i,s]=t,a=s==="E"?"text-text-red":s==="U"?"text-text-green":s==="M"?"text-text-yellow":"text-text-white";return _.jsx(_.Fragment,{children:_.jsxs(Ea,{className:`${a} font-default flex flex-row items-center gap-1 sm:gap-2 pl-1  ml:pl-2  border-r border-border-color ${e?"border-t-2 border-t-orange-color bg-default-background/95":"border-b bg-secondary-background "}`,to:i,children:[_.jsx("img",{src:r,className:"h-3 w-3 pointer-events-none"}),_.jsxs("div",{className:"flex flex-row justify-between gap-1 xs:gap-2 sm:gap-4 flex-grow items-center pr-2  sm:pr-4",children:[_.jsx("div",{children:n}),(s==="M"||s==="U")&&_.jsx("div",{children:s==="M"?"M":"U"})]})]})})};function kM(){return _.jsx(_.Fragment,{children:_.jsxs("div",{className:"flex flex-col h-screen bg-default-background font-default max-h-screen text-white",children:[_.jsx(sP,{}),_.jsxs("div",{className:"bg-black flex flex-row flex-grow h-full",children:[_.jsx(WT,{}),_.jsxs("div",{className:"flex flex-col flex-grow bg-default-background relative",children:[_.jsx("img",{src:"./bg.jpg",className:"h-full w-full object-cover object-left absolute"}),_.jsx("div",{className:"z-10",children:_.jsx(TM,{})}),_.jsx("div",{className:"flex-grow",children:_.jsxs(jT,{children:[_.jsx($s,{path:"/portfolio",element:_.jsx(jO,{})}),_.jsx($s,{path:"/portfolio/about",element:_.jsx($O,{})}),_.jsx($s,{path:"/portfolio/projects",element:_.jsx(SM,{})}),_.jsx($s,{path:"/portfolio/contact",element:_.jsx(bM,{})})]})})]})]})]})})}dd.createRoot(document.getElementById("root")).render(_.jsx(Zt.StrictMode,{children:_.jsx(VT,{children:_.jsx(kM,{})})}));export{KD as B,Br as P,vM as c,Vs as r};
